"use strict";angular.module("indeuApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","mgcrea.ngStrap","datatables","datatables.buttons","datatables.bootstrap","datatables.select","datatables.options","ngTagsInput","bootstrap3-typeahead","textAngular","textAngularSetup","ngFileUpload","fancyboxplus","ESPBA","Meta","angular-loading-bar","ui.calendar","leaflet-directive","ui-notification","ngRateIt","angular-smilies"]).config(["$locationProvider","$routeProvider","cfpLoadingBarProvider","NotificationProvider","$tooltipProvider",function(a,b,c,d,e){c.includeSpinner=!1,"localhost:9000"==window.location.host?(a.html5Mode(!1),a.hashPrefix("")):a.html5Mode(!0),d.setOptions({delay:4e3,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"left",positionY:"top"}),angular.extend(e.defaults,{placement:"top",container:"body",trigger:"hover"}),b.when("/",{templateUrl:"views/frontpage.html",controller:"FrontpageCtrl",controllerAs:"frontpage"}).when("/bliv-medlem",{templateUrl:"views/bliv-medlem.html",controller:"BlivMedlemCtrl",controllerAs:"blivmedlem"}).when("/medlem",{templateUrl:"views/medlem.html",controller:"MedlemCtrl",controllerAs:"medlem"}).when("/s/:url*",{templateUrl:function(a){return"/pages/"+a.name+".html"},controller:"CMSController"}).when("/dig",{templateUrl:"views/dig.forside.html",controller:"DigForsideCtrl",controllerAs:"digside"}).when("/medlemmer/:id/:navn",{templateUrl:"views/medlem.forside.html",controller:"MedlemForsideCtrl",controllerAs:"medlemforside"}).when("/grupper/:id/:navn",{templateUrl:"views/gruppe.forside.html",controller:"GruppeForsideCtrl",controllerAs:"gruppeforside"}).when("/artikel/:id/:header",{templateUrl:"views/article.forside.html",controller:"ArticleForsideCtrl",controllerAs:"articleforside"}).when("/event/:id/:navn",{templateUrl:"views/event.forside.html",controller:"EventForsideCtrl",controllerAs:"eventforside"}).when("/det-sker",{templateUrl:"views/kalender.forside.html",controller:"KalenderForsideCtrl",controllerAs:"kalenderforside"}).when("/soeg",{templateUrl:"views/search.html",controller:"SearchCtrl",controllerAs:"search"}).when("/admin-forside",{templateUrl:"views/admin.forside.html",controller:"AdminForsideCtrl",controllerAs:"adminforside"}).when("/admin-overblik",{templateUrl:"views/admin.overblik.html",controller:"AdminCtrl",controllerAs:"administration"}).when("/admin-foreninger",{templateUrl:"views/admin.foreninger.html",controller:"AdminForeningerCtrl",controllerAs:"administration"}).when("/admin-artikler",{templateUrl:"views/admin.artikler.html",controller:"AdminArtiklerCtrl",controllerAs:"administration"}).when("/admin-brugere",{templateUrl:"views/admin.brugere.html",controller:"AdminBrugereCtrl",controllerAs:"brugere"}).when("/admin-grupper",{templateUrl:"views/admin.grupper.html",controller:"AdminGrupperCtrl",controllerAs:"grupper"}).when("/admin-events",{templateUrl:"views/admin.events.html",controller:"AdminEventsCtrl",controllerAs:"events"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location","Lookup","ESPBA","Meta","Login",function(a,b,c,d,e,f){a.$on("$stateChangeError",function(a,b,c,d,e,f){a.preventDefault()}),a.$on("$routeChangeSuccess",function(){f.updateLastSeen()}),"localhost"===b.host()?d.setHost("http://localhost/html/indeu/app/"):d.setHost("https://opgavesnyd.dk/"),d.setApiPath("api/espba.php"),d.init().then(function(){c.init()}),moment.tz.setDefault("Europe/Copenhagen")}]),angular.module("indeuApp").directive("onlyDigits",function(){return{require:"ngModel",restrict:"A",link:function(a,b,c,d){function e(a){if(a){var b=a.replace(/[^0-9.]/g,"");return b.split(".").length>2&&(b=b.substring(0,b.length-1)),b!==a&&(d.$setViewValue(b),d.$render()),parseFloat(b)}}d.$parsers.push(e)}}}),angular.module("indeuApp").directive("selectOnClick",["$window",function(a){return{restrict:"A",link:function(b,c,d){c.on("click",function(){a.getSelection().toString()||this.setSelectionRange(0,this.value.length)})}}}]),angular.module("indeuApp").directive("onlyNumbers",function(){return{require:"ngModel",restrict:"A",link:function(a,b,c,d){function e(a){if(a){var b=a.replace(/[^0-9]/g,"");return b!==a&&(d.$setViewValue(b),d.$render()),parseInt(b,10)}}d.$parsers.push(e)}}}),angular.module("indeuApp").directive("inputEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.inputEnter,{event:b})}),b.preventDefault())})}}),angular.module("indeuApp").directive("bsCollapseIcons",["$timeout",function(a){return{restrict:"A",priority:1e3,link:function(b,c,d){c.on("click",".panel-heading",function(){var a=$(this),b=a.find("i");a.parent().find(".in").length?b.removeClass("fa-plus").removeClass("fa-minus").addClass("fa-plus"):b.removeClass("fa-plus").removeClass("fa-minus").addClass("fa-minus")}),a(function(){for(var a=c.find(".panel-heading"),b=0,d=a.length;b<d;b++){var e=$(a[b]),f=e.find("i");if(!f.length){var g=e.find("a").first(),h=g.html();g.html("<i></i>"+h),f=g.find("i"),f.addClass("fa text-muted")}1==e.parent().find(".in").length?f.removeClass("fa-plus").removeClass("fa-minus").addClass("fa-minus"):f.removeClass("fa-plus").removeClass("fa-minus").addClass("fa-plus")}},100)}}}]),angular.module("indeuApp").directive("readMore",["$timeout",function(a){return{restrict:"AE",link:function(b,c,d){a(function(){if(c[0].offsetHeight>60){var a=(new Date).getTime(),b="readMore"+a,d=" ▼  Læs mere",e='<code><a href="#" class="unstyled '+b+'">'+d+"</a></code><br><br>";c[0].style.height="70px",c[0].style.overflowY="hidden",$(c).after(e),$("body").on("click","."+b,function(){$(this).text()==d?(c[0].style.height="auto",c[0].style.overflowY="visible",$(this).text(" ▲  Læs mindre")):(c[0].style.height="70px",c[0].style.overflowY="hidden",$(this).text(d),$("body").animate({scrollTop:$(this).offset().top-70},"fast"))})}},150)}}}]);var isLocalHost="localhost"===location.hostname||"127.0.0.1"===location.hostname;angular.module("indeuApp").directive("debugLink",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){a(function(){var a=c.attr("href");a&&isLocalHost&&"/"==a.charAt(0)&&c.attr("href","#"+a)},100)}}}]),angular.module("indeuApp").directive("adminWidth",["$location",function(a){return{restrict:"A",link:function(b,c,d){b.$watch(function(){return c[0].childNodes.length},function(b,d){if(b!==d){a.path().indexOf("/admin")>-1?(c.removeClass("max-width"),c.addClass("admin-max-width")):(c.addClass("max-width"),c.removeClass("admin-max-width"))}})}}}]),angular.module("indeuApp").directive("adminIsSelected",["$location",function(a){return{restrict:"A",link:function(b,c,d){var e=c.attr("href"),f=a.path();e.indexOf(f)>-1?c.addClass("selected"):c.removeClass("selected")}}}]),angular.module("indeuApp").directive("adresseOpslag",["$parse","TicketService",function(a,b){return{restrict:"A",link:function(a,c,d){function e(){$(c).typeahead("destroy"),$(c).on("click",function(){var a=$(c).data("adresseItem");if(a){var b=a.streetName;a.streetBuildingIdentifier&&(b+=" "+a.streetBuildingIdentifier),$(c).val(b),$(c).trigger("keyup")}}),$(c).typeahead({displayText:function(a){switch(d.adresseType){case"stednavne_v2":return a.presentationString;case"adresser":return a.presentationString;default:return null}},afterSelect:function(a){$(c).data("adresseItem",a),h&&h(a)},items:20,source:function(a,c){switch(d.adresseType){case"adresser":var e="https://services.kortforsyningen.dk/Geosearch?search=*"+a+"*&resources=adresser&crs=EPSG:4326&limit=10&ticket="+b.get();break;case"stednavne_v2":var e="https://services.kortforsyningen.dk/Geosearch?search="+a+"*&resources=stednavne_v2&limit=10&ticket="+b.get()}return $.getJSON(e,function(a){var b=[];for(var d in a.data)b.push(a.data[d]);return c(b)})}})}var f=d.adresseType,g=d.adresseOnSelect,h=a[g]?a[g]:null;d.$observe("adresseType",function(a){f=a,e()})}}}]),angular.module("indeuApp").directive("comments",["$timeout","Login","Utils","ESPBA","Lookup","Notification","Log",function(a,b,c,d,e,f,g){return{templateUrl:"views/inc/inc.comments.html",restrict:"E",scope:{onCommentAdded:"@",userId:"@",hash:"@"},link:function(h,i,j){function k(a){function b(a,b){return new Date(a).valueOf()>new Date(b).valueOf()}function c(a,d,e){if(void 0!=a[d]){for(var f=a[d].sort(b),g=0;g<f.length;g++)e.push(f[g]),c(a,f[g].id,e);return e}}for(var d={},e=0;e<a.length;e++)void 0==d[a[e].parent_id]&&(d[a[e].parent_id]=[]),d[a[e].parent_id].push(a[e]);return c(d,0,[])}h.isLoggedIn=b.isLoggedIn(),h.user=b.currentUser();var l=function(){h.actionCancel()};h.$watch("hash",function(){h.reloadComments(),h.hash&&h.user&&l()}),h.canSave=function(a){return!!h.comment&&""!=h.comment[a]},h.textAreaAdjust=function(a){var b=document.getElementById(a);b&&(b.style.height="1px",b.style.height=25+b.scrollHeight+"px")},h.actionCancel=function(b){h.actionAnswer="",h.comment={hash:h.hash,user_id:h.user.id,parent_id:0,content:""},a(function(){h.textAreaAdjust("comment-content")})},h.actionSave=function(){var b=function(a){for(var b=0,c=h.comments.length;b<c;b++)if(h.comments[b].id==a)return h.comments[b].user;return!1},c={};if(h.comment.parent_id){var e=b(h.comment.parent_id);c.type=e.id==h.comment.user_id?g.COMMENT_OWN_COMMENT:g.COMMENT_COMMENT,c.context_user_id=e.id}else c.type=g.COMMENT_ENTITY;c.user_id=h.comment.user_id,c.hash=h.comment.hash,h.comment.contentAnswer&&(h.comment.content=h.comment.contentAnswer,delete h.comment.contentAnswer),d.insert("comment",h.comment).then(function(b){g.log(c),h.actionCancel(),h.reloadComments(),a(function(){var c=angular.element("#comment"+b.data[0].id);$("body").animate({scrollTop:c.offset().top-60},"slow"),a(function(){f.primary("Din kommentar er blevet offentliggjort")},50)},200)})},h.reloadComments=function(){var a=this;d.get("comment",{hash:h.hash}).then(function(b){function c(a){for(var c=0,d=b.data.length;c<d;c++)if(b.data[c].id==a)return e.getUser(b.data[c].user_id);return null}var d=b.data.length?b.data.length:0,f=1==d?"kommentar":"kommentarer";if(h.commentsHeader=d+" "+f,b.data.length){var g=k(b.data);g.forEach(function(b){b.dateStamp=moment(b.created_timestamp).fromNow(),b.user=e.getUser(b.user_id),b.content=a.testYoutube(b.content),b.parent_id&&(b.parent_user=c(b.parent_id))}),h.comments=g}})},h.commentById=function(a){for(var b=h.comments,c=0,d=b.length;c<d;c++)if(b[c].id==a)return b[a];return!1},h.indentClass=function(a){function b(a){for(var b=0,c=h.comments.length;b<c;b++)if(h.comments[b].id==a)return h.comments[b].parent_id}var c=0,d=a;do{(d=b(d))>0&&c++}while(d>0);switch(c){case 0:return"";case 1:return"indent1";case 2:return"indent2";case 3:return"indent3";case 4:return"indent4";case 5:return"indent5";case 6:return"indent6";case 7:return"indent7";case 8:return"indent8";default:return"indent9"}},h.setActionAnswer=function(b){h.comment={hash:h.hash,user_id:h.user.id,parent_id:b,content:"",contentAnswer:""},h.actionAnswer=b,a(function(){$("#answer-comment-content"+b).focus().trigger("keyup")})},h.testYoutube=function(a){for(var b,d="";a.length>0;)if(b=a.match(/\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[A-Z0-9+&@#\/%=~_|]/i)){var e=b.index,f=b[0],g=f.length>10?f.slice(0,30)+"...":f;e>0&&(d+=a.slice(0,e));var h=c.parse_url(f),i=h.query?h.query.split("=").pop():null,j=h.path?h.path.split(".").pop():null;if(~["www.youtube.com"].indexOf(h.host)&&i)d+='<iframe type="text/html" width="500" height="265" frameborder="0" allowfullscreen ',d+='src="https://www.youtube.com/embed/'+i+'?autoplay=0&enablejsapi=1">',d+="</iframe>";else if(~["gifv"].indexOf(j)){var k=f.split(".");k.pop(),k.push("mp4"),k=k.join("."),d+='<video width="500" height="265" controls>',d+='<source src="'+k+'" type="video/mp4">',d+="Your browser does not support the video tag.",d+="</video>"}else d+=~["jpg","png","gif"].indexOf(j)?'<img src="'+f+'">':'<a href="'+f+'" target=_blank title="'+f+'">'+g+"</a>";a=a.slice(e+f.length)}else d+=a.slice(0),a="";return d}}}}]),angular.module("indeuApp").directive("socialLinks",["$timeout","Utils",function(a,b){return{priority:1e3,link:function(a,c,d){function e(a,c,d){var e=f[a];if(!e||""==e||null==e)return"";var g='<div class="layout-social">';return g+='<i class="fa fa-fw fa-x2 '+c+'" title="'+d+'"></i>',g+='<a target=_blank href="'+e+'" title="'+d+'">'+b.plainText(e,40)+"</a>",g+="</div>"}var f;d.$observe("socialLinks",function(){if(f=d.socialLinks){try{f=JSON.parse(f)}catch(a){return}var a="";a+=e("email","fa-envelope-o","Email"),a+=e("homepage","fa-external-link","Hjemmeside"),a+=e("facebook","fa-facebook-official","Facebook profil"),a+=e("twitter","fa-twitter","Twitter konto"),a+=e("linkedin","fa-linkedin","LinkedIn konto"),c.append(a)}})}}}]),angular.module("indeuApp").directive("editEvent",["Utils","ESPBA","Lookup","Login","SelectBrugerModal","SelectGruppeModal","Notification","Const","Log",function(a,b,c,d,e,f,g,h,i){return{templateUrl:"views/inc/inc.editEvent.html",restrict:"A",transclude:!0,scope:{onSave:"&",onCancel:"&",userId:"@",groupId:"@",eventParticipants:"="},replace:!0,controller:["$scope",function(a){a.event={visibility_level:2,date:new Date,user_id:0,from:"",to:"",name:"",about:"",image:"",address:""},a.eventMap=h.defaultMap(),a.eventAdresseSelect=function(b){a.event.postal_code=b.postCodeIdentifier,a.event.city=b.districtName,a.event.lat=b.y||b.yMin,a.event.lng=b.x||b.xMin,a.event.lat&&a.event.lng&&(a.eventMap.markers.marker={lat:parseFloat(a.event.lat),lng:parseFloat(a.event.lng),focus:!0,draggable:!0},a.eventMap.center={lat:parseFloat(a.event.lat),lng:parseFloat(a.event.lng),zoom:12}),a.$apply()}}],link:function(h,j,k){h.group_id=k.groupId||!1,h.user_id=k.userId||!1;var l=(k.userId,k.onSave||!1),m=k.onCancel||!1,n=k.editEvent||!1;n&&b.get("event",{id:n}).then(function(b){if(h.event=b.data[0],h.event.visibility_level=parseInt(h.event.visibility_level),h.event.from=a.removeSecs(h.event.from),h.event.to=a.removeSecs(h.event.to),b.data[0].lat&&b.data[0].lng){var c={lat:parseFloat(b.data[0].lat),lng:parseFloat(b.data[0].lng)};h.eventMap.markers.marker=c,c.zoom=11,h.eventMap.center=c}}),h.reloadContactPersons=function(){b.get("event_contactperson",{event_id:n}).then(function(a){a.data.forEach(function(a){a.user=c.getUser(a.user_id)}),h.event_contactpersons=a.data})},h.reloadContactPersons(),h.reloadGroups=function(){b.get("group_events",{event_id:n}).then(function(a){a.data.forEach(function(a){a.name=c.getGroup(a.group_id).name}),h.event_groups=a.data})},h.reloadGroups(),h.eventAction={},h.eventAction.caption=n?"Gem og afslut":"Opret og afslut",h.eventAction.addContact=function(){var a=h.event_contactpersons.map(function(a){return a.user_id});e.show(h,!1,a).then(function(a){a&&b.insert("event_contactperson",{event_id:h.event.id,user_id:a.id}).then(function(b){h.reloadContactPersons(),i.log({type:i.EVENT_CONTACTPERSON_ADDED,user_id:d.currentUser().id,context_user_id:a.id,hash:h.event.hash})})})},h.eventAction.removeContact=function(a,c){b.delete("event_contactperson",{id:a}).then(function(){h.reloadContactPersons(),i.log({type:i.EVENT_CONTACTPERSON_REMOVED,user_id:d.currentUser().id,context_user_id:c,hash:h.event.hash})})},h.eventAction.cannotRemoveContact=function(){g("Du kan ikke fjerne dig selv som kontaktperson")},h.eventAction.addGroup=function(){var a=h.event_groups.map(function(a){return a.group_id});f.show(h,!1,a).then(function(a){a&&b.insert("group_events",{event_id:h.event.id,group_id:a[0].id}).then(function(b){h.reloadGroups(),i.log({type:i.EVENT_GROUP_ADDED,user_id:d.currentUser().id,context_user_id:a[0].id,hash:h.event.hash})})})},h.eventAction.removeGroup=function(a,c){b.delete("group_events",{id:a}).then(function(){h.reloadGroups(),i.log({type:i.EVENT_GROUP_REMOVED,user_id:d.currentUser().id,context_user_id:c,hash:h.event.hash})})},h.eventAction.canSave=function(){var a=h.event;return a.name&&a.date&&a.from&&a.address},h.eventAction.save=function(){n?b.update("event",h.event).then(function(){l&&h.onSave(),i.log({type:i.EVENT_EDITED,user_id:d.currentUser().id,hash:h.event.hash})}):(h.event.user_id=h.user_id,h.event.hash=a.getHash(),b.insert("event",h.event).then(function(a){h.group_id?(b.insert("group_events",{group_id:h.group_id,event_id:a.data[0].id}).then(function(){l&&h.onSave()}),b.insert("event_contactperson",{event_id:a.data[0].id,user_id:h.user_id}).then(function(){l&&h.onSave()})):l&&h.onSave(),i.log({type:i.EVENT_CREATED,user_id:d.currentUser().id,hash:a.data[0].hash})}))},h.eventAction.cancel=function(){m&&h.onCancel()}}}}]),angular.module("indeuApp").directive("editArticle",["$timeout","Utils","ESPBA","Login","Log","ImageUploadModal","Notification","SelectGruppeModal","Lookup",function(a,b,c,d,e,f,g,h,i){return{templateUrl:"views/inc/inc.editArticle.html",restrict:"A",transclude:!0,scope:{onSave:"&",onCancel:"&",userId:"@",groupId:"@"},replace:!0,controller:["$scope",function(a){a.article={visibility_level:2,header:"",sub_header:"",content:"",image:"",user_id:null,author_id:null}}],link:function(a,j,k){a.group_id=k.groupId||!1,a.user_id=k.userId||!1,a.article.user_id=a.user_id;var l=(k.userId,k.groupId,k.onSave||!1),m=k.onCancel||!1,n=k.editArticle||!1;n&&c.get("article",{id:n}).then(function(b){a.article=b.data[0],a.article.visibility_level=parseInt(a.article.visibility_level)}),a.reloadGroups=function(){c.get("group_articles",{article_id:n}).then(function(b){b.data.forEach(function(a){a.name=i.getGroup(a.group_id).name}),a.article_groups=b.data})},a.reloadGroups(),a.articleAction={},a.articleAction.caption=n?"Gem og afslut":"Opret og afslut",a.articleAction.canSave=function(){var b=a.article;return""!=b.header&&""!=b.content&&b.content.length>2},a.articleUploadImage=function(){f.show(a,"artikel").then(function(b){b&&(a.article.image=b.filename)})},a.articleAction.save=function(){n?c.update("article",a.article).then(function(){g.primary("<strong>"+a.article.header+"</strong> er opdateret"),l&&a.onSave(),e.log({type:e.ARTICLE_EDITED,user_id:d.currentUser().id,hash:a.article.hash})}):(a.article.user_id=a.user_id,a.article.hash=b.getHash(),c.insert("article",a.article).then(function(b){g.primary("<strong>"+a.article.header+"</strong> er oprettet"),a.group_id?c.insert("group_articles",{group_id:a.group_id,article_id:b.data[0].id}).then(function(){l&&a.onSave()}):l&&a.onSave(),e.log({type:e.ARTICLE_CREATED,user_id:d.currentUser().id,hash:b.data[0].hash})}))},a.articleAction.cancel=function(){m&&a.onCancel()},a.articleAction.addGroup=function(){var b=a.article_groups.map(function(a){return a.group_id});h.show(a,!1,b).then(function(b){b&&c.insert("group_articles",{article_id:n,group_id:b[0].id}).then(function(b){a.reloadGroups()})})},a.articleAction.removeGroup=function(b){c.delete("group_articles",{id:b}).then(function(){a.reloadGroups()})}}}}]),angular.module("indeuApp").directive("editProfile",["Utils","ESPBA","Lookup","Form","ImageUploadModal","Notification","Const","Log","Login",function(a,b,c,d,e,f,g,h,i){return{templateUrl:"views/inc/inc.editProfile.html",restrict:"A",transclude:!0,scope:{editProfile:"@",onSave:"&",onCancel:"&"},replace:!0,controller:["$scope",function(a){a.changed=!1,$("body").on("click",".panel-heading",function(){var a=$(this),b=$(this).find("i");a.parent().find(".in").length?b.removeClass("fa-plus").removeClass("fa-minus").addClass("fa-plus"):b.removeClass("fa-plus").removeClass("fa-minus").addClass("fa-minus")}),a.formSaveEnabled=function(a){return d.isEdited(a)},a.saveEnabled=function(){return a.changed},a.formSave=function(c){b.update("user",a.edit).then(function(b){d.reset(c),a.changed=!1})},a.adresseSelect=function(b){a.edit.postal_code=b.postCodeIdentifier,a.edit.city=b.districtName},a.changeImage=function(){var b={target:"medlem",title:"Skift profil billede",btnOk:"Ok",btnCancel:"Fortryd",currentImage:a.edit.image?"../media/medlem/"+a.edit.image:null};e.show(a,b).then(function(b){b&&(a.edit.image=b.filename,a.changed=!0)})}}],link:function(a,c,d){var e=d.onSave||!1,g=d.onCancel||!1;d.$observe("editProfile",function(c){a.user_id=d.editProfile,b.get("user",{id:a.user_id}).then(function(b){a.edit=b.data[0],a.$watch("edit.about",function(b,c){b&&b!=c&&(a.changed=!0)},!0),$('.panel-collapse:not(".in")').collapse("show")})}),a.doSaveClose=function(){b.update("user",a.edit).then(function(b){f("Profil opdateret ..."),e&&a.onSave(),h.log({type:h.USER_PROFILE_EDITED,user_id:i.currentUser().id})})},a.doCancel=function(){g&&a.onCancel()}}}}]),angular.module("indeuApp").directive("editGruppe",["$q","Utils","ESPBA","Lookup","Form","ImageUploadModal","SelectBrugerModal","Notification","Const","Log","Login","Settings","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return{templateUrl:"views/inc/editGruppe.directive.html",restrict:"A",transclude:!0,scope:{editProfile:"@",onSave:"&",onCancel:"&"},replace:!0,controller:["$scope",function(b){l.init(b),b.edit={id:-1,name:"",about:"",visibility_level:1,access_level:1,owner_id:k.currentUser().id,events_enabled:1,articles_enabled:!0,visible_social:!0,visible_members:1,allow_comments:!0,active:!0,accepted:!0},b.owner_btn_caption=d.getUser(k.currentUser().id).full_name,b.save_btn_caption="Opret og gem",b.changed=!1,b.formSaveEnabled=function(a){return e.isEdited(a)},b.canSave=function(){var a=b.edit;return!!a&&(""!=a.name&&""!=a.about&&""!=a.visibility_level&&""!=a.owner_id)},b.formSave=function(a){},b.selectOwner=function(){g.show(b,!1,b.edit.owner_id).then(function(a){a&&(b.edit.owner_id=a.id,b.owner_btn_caption=a.full_name)})},b.dtOptions=m.fromFnPromise(function(){var e=a.defer();return c.get("group_user",{group_id:b.edit.id}).then(function(a){b.data=[],b.current_user_ids=[];for(var c=0,f=a.data.length;c<f;c++)b.data.push(d.getUser(a.data[c].user_id)),b.current_user_ids.push(a.data[c].user_id);e.resolve(b.data)}),e.promise}).withOption("drawCallback",function(){}).withOption("scrollY",200).withOption("paging",!1).withOption("rowCallback",function(a,b){$(a).attr("user-id",b.id)}).withOption("dom","ft").withOption("stateSave",!0).withOption("language",i.dataTables_daDk).withButtons([{text:'<span><i class="fa fa-plus text-success"></i>&nbsp;Tilføj medlem</span>',className:"btn btn-xs",action:function(){g.show(b,!1,b.current_user_ids).then(function(a){a&&c.insert("group_user",{group_id:group_id,user_id:a[0].id}).then(function(){b.dtInstance.reloadData()})})}}]),b.dtInstanceCallback=function(a){b.dtInstance=a},b.dtColumns=[n.newColumn("id").withTitle("#").renderWith(function(a,b,c){return"display"===b?'<i class="fa fa-remove text-danger remove-medlem" data-user-id="'+a+'" title="Fjern medlem"></i>':a}),n.newColumn("full_name").withTitle("Navn"),n.newColumn("alias").withTitle("Alias"),n.newColumn("email").withTitle("Email")],$("body").on("click",".remove-medlem",function(){confirm("Fjern medlem fra gruppe?")&&c.delete("group_user",{group_id:group_id,user_id:$(this).data("user-id")}).then(function(){b.dtInstance.reloadData()})})}],link:function(a,d,e){var f=e.onSave||!1,g=e.onCancel||!1;e.$observe("editGruppe",function(b){a.edit.id=e.editGruppe,console.log(a.edit.id),parseInt(a.edit.id)&&c.get("group",{id:a.edit.id}).then(function(b){console.log("GROUP LOAD!!!!"),a.edit=b.data[0],a.$watch("edit.about",function(b,c){b&&b!=c&&(a.changed=!0)},!0)})}),a.doSaveClose=function(){a.edit.id?c.update("group",a.edit).then(function(b){console.log(b),h("Gruppe opdateret ..."),f&&a.onSave(),j.log({type:j.GROUP_EDITED,hash:a.edit.hash,user_id:k.currentUser().id})}):(a.edit.hash=b.getHash(),c.insert("group",a.edit).then(function(b){b=b.data[0],h("Gruppen <strong>"+b.name+"</strong> er oprettet."),f&&a.onSave(),j.log({type:j.GROUP_CREATED,hash:b.hash,user_id:k.currentUser().id}),c.insert("group_user",{user_id:k.currentUser().id,group_id:b.id}).then(function(a){j.log({type:j.GROUP_MEMBER_ADDED,hash:b.hash,user_id:k.currentUser().id}),h("Du følger nu gruppen <strong>"+b.name+"</strong>")})}))},a.doCancel=function(){g&&a.onCancel()}}}}]),angular.module("indeuApp").directive("userGroups",["$timeout","Utils","Lookup","ESPBA",function(a,b,c,d){return{templateUrl:"views/inc.userGroups.html",restrict:"A",transclude:!0,priority:500,scope:{personal:"@",userGroups:"@"},replace:!0,link:function(a,e,f){f.$observe("userGroups",function(e){var g=f.personal||!1;d.get("group_user",{user_id:e}).then(function(d){a.groups=[],d.data.forEach(function(d){var f=c.getGroup(d.group_id);f.is_owner=f.owner_id==e,f.owner_title=g?g+" er administrator af denne gruppe":"Du er administrator af denne gruppe",f.urlName=b.urlName(f.name),f.urlTitle=b.plainText(f.about,200),a.groups.push(f)})})})}}}]),angular.module("indeuApp").directive("entityArticles",["$timeout","Utils","Lookup","ESPBA",function(a,b,c,d){return{templateUrl:"views/inc.entityArticles.html",restrict:"A",transclude:!0,priority:500,scope:{entityType:"@",onEdit:"="},replace:!0,link:function(a,c,e){e.$observe("entityArticles",function(c){function f(c){c.forEach(function(a){a.created_timestamp=new Date(a.created_timestamp),a.dateInt=a.created_timestamp.valueOf(),a.urlName=b.plainText(b.urlName(a.header),50)}),a.articles=c}var g=e.entityArticles||!1,h=e.entityType||!1;if(a.user_id="user"==h?g:e.userId,g&&h)switch(h){case"user":d.get("article",{user_id:g}).then(function(a){f(a.data)});break;case"group":d.get("group_articles",{group_id:g}).then(function(a){for(var b=[],c=0,e=a.data.length;c<e;c++)d.get("article",{id:a.data[c].article_id}).then(function(a){b.push(a.data[0]),c>=e-1&&f(b)})})}})}}}]),angular.module("indeuApp").directive("entityEvents",["$timeout","Utils","Lookup","ESPBA",function(a,b,c,d){return{templateUrl:"views/inc.entityEvents.html",restrict:"A",transclude:!0,priority:500,scope:{entityType:"@",onEdit:"="},replace:!0,link:function(a,c,e){e.$observe("entityEvents",function(c){function f(c){c.forEach(function(a){a.created_timestamp=new Date(a.created_timestamp),a.date=new Date(a.date),a.dateInt=a.date.valueOf(),a.urlName=b.plainText(b.urlName(a.name),50),a.to="00:00:00"!=a.to?b.removeSecs(a.to):"",a.from=b.removeSecs(a.from)}),a.events=c}var g=e.entityEvents||!1,h=e.entityType||!1;if(a.user_id="user"==h?g:e.userId,g&&h){switch(h){case"user":d.get("event",{user_id:g}).then(function(a){f(a.data)});break;case"group":d.get("group_events",{group_id:g}).then(function(a){for(var b=[],c=0,e=a.data.length;c<e;c++)d.get("event",{id:a.data[c].event_id}).then(function(a){b.push(a.data[0]),c>=e-1&&f(b)})})}a.allEvents=!1;var i=(new Date).valueOf();a.filterEvent=function(b){return!!a.allEvents||b.dateInt>=i},a.setEventFilter=function(c){a.allEvents=c,c||b.scrollTo("#entity-event-directive")}}})}}}]),angular.module("indeuApp").directive("entityRating",["$timeout","$compile","Utils","Login","ESPBA","Lookup","Log",function(a,b,c,d,e,f,g){return{templateUrl:"views/inc/inc.entityRating.html",restrict:"EA",replace:!0,scope:{hash:"@",userId:"@"},link:function(a,b,d){function f(){e.prepared("GetStarRating",{user_id:a.userId,hash:a.hash}).then(function(b){var d=!!b.data.length&&b.data[0];if(d){if(d.rating?delete a.user:(a.user.id=a.userId,a.user.rating=0,a.user.readonly=!1),d.counter>0){var e="Samlet vurdering "+c.ratingStr(d.average)+" givet af "+d.counter;e+=1==d.counter?" bruger. ":" brugere. ",d.user_id&&(e+="Du gav karakteren "+c.ratingStr(d.rating)+" ",e+="for "+moment(d.created_timestamp).fromNow())}else var e="Endnu ingen har vurderet dette";a.total={average:d.average,title:e}}})}a.user={id:void 0,rating:void 0,readonly:!0},a.canSaveRating=function(){return a.user&&a.user.rating>0},a.saveRating=function(){e.insert("user_stars",{hash:a.hash,user_id:a.user.id,rating:a.user.rating}).then(function(){$(".btn-ngrateit").hide(),a.user.readonly=!0,e.prepared("UpdateStarRating",{hash:a.hash}).then(function(a){f()}),g.log({type:g.USER_ENTITY_RATING,user_id:a.user.id,hash:a.hash})})},d.$observe("hash",function(){a.userId&&(a.user.id=a.userId,a.user.rating=0,a.user.readonly=!1),a.hash&&f()})}}}]),angular.module("indeuApp").directive("recentArticles",["Utils","Login","Settings","ESPBA",function(a,b,c,d){return{templateUrl:"views/inc/inc.recentArticles.html",restrict:"EA",replace:!0,scope:{},controller:["$scope",function(a){c.init(a)}],link:function(c,e,f){c.showEmpty=function(){return e.find(".list-group-item").length<=0};var g=b.isLoggedIn(),h=g?{user_id:b.currentUser().id}:{};d.prepared("recentArticles",h).then(function(b){b.data.forEach(function(b){b.urlName=a.urlName(b.header),g||(b.user_visited=!0)}),c.articles=b.data})}}}]),angular.module("indeuApp").directive("recentEvents",["Utils","Login","Settings","ESPBA",function(a,b,c,d){return{templateUrl:"views/inc/inc.recentEvents.html",restrict:"EA",replace:!0,scope:{notVisitedOnly:"@"},controller:["$scope",function(a){c.init(a)}],link:function(c,e,f){c.showEmpty=function(){return e.find(".list-group-item").length<=0};var g=function(a,b){return a.length>b?a.substring(0,b)+" ..":a},h=b.isLoggedIn()?{user_id:b.currentUser().id}:{};d.prepared("RecentEvents",h).then(function(b){b.data.forEach(function(b){b.urlName=a.urlName(b.name),b.urlLink="/event/"+b.id+"/"+b.urlName,b.group_id=b.group_id||!1;var c=b.name;b.group_name?(b.group_urlName=a.urlName(b.group_name),b.group_urlLink="/grupper/"+b.group_id+"/"+b.group_urlName,b.name=g(b.name,25)):b.name=g(b.name,33),b.tooltip=c!=b.name?c:""}),c.events=b.data})}}}]),angular.module("indeuApp").directive("recentComments",["Utils","Login","ESPBA",function(a,b,c){return{templateUrl:"views/inc/inc.recentComments.html",restrict:"EA",replace:!0,scope:{recentComments:"@",limit:"@"},link:function(b,d,e){e.$observe("recentComments",function(){var a=e.recentComments,d=e.limit,f={hash:a};d&&(f.limit=d),c.prepared("RecentComments",f).then(function(a){a.data&&a.data.length&&(b.comments=a.data)})}),b.commentClick=function(b){a.scrollTo(b,"fast")}}}}]),angular.module("indeuApp").directive("upcomingEvents",["Utils","Login","ESPBA",function(a,b,c){return{templateUrl:"views/inc/inc.upcomingEvents.html",restrict:"EA",replace:!0,scope:{},link:function(d,e,f){var g=b.isLoggedIn()?"UpcomingEventsLoggedIn":"UpcomingEvents";c.prepared(g).then(function(b){b.data.forEach(function(b){b.urlName=a.urlName(b.name),b.from=a.removeSecs(b.from),b.to="00:00:00"!=b.to?a.removeSecs(b.to):""}),d.events=b.data})}}}]),angular.module("indeuApp").directive("eventParticipants",["$timeout","$compile","Utils","Login","ESPBA","Lookup",function(a,b,c,d,e,f){return{templateUrl:"views/inc/inc.eventParticipants.html",restrict:"A",replace:!0,scope:{eventParticipants:"@"},link:function(b,g,h){function i(e){var g=!!d.isLoggedIn()&&d.currentUser().id,h=!1,i=[];e.forEach(function(a){switch(a.feedback=parseInt(a.feedback),a.full_name=f.getUser(a.user_id).full_name,a.urlName=c.urlName(a.full_name),a.urlLink=c.isLocalHost()?"#/medlemmer/"+a.user_id+"/"+a.urlName:"/medlemmer/"+a.user_id+"/"+a.urlName,a.feedback){case 2:a.user_id==g?(h=!0,a.isUser=!0,i.unshift(a)):i.push(a)}}),b.participants=i,b.sep="",i.length<=0&&(b.message="Ingen har endnu tilkendegivet at deltage"),h?(1==i.length&&(b.message="Du deltager."),2==i.length&&(b.message="Du og"),3==i.length&&(b.message="Du samt",b.sep=" og "),i.length>3&&(b.message="Du samt",b.sep=", ")):2==i.length&&(b.sep=" og "),a(function(){})}h.$observe("eventParticipants",function(){b.message=void 0;var a=h.eventParticipants;""!=a&&e.get("event_user_feedback",{event_id:a}).then(function(a){i(a.data)})})}}}]),angular.module("indeuApp").directive("userEventsParticipate",["$timeout","Utils","Lookup","ESPBA",function(a,b,c,d){return{templateUrl:"views/inc/inc.userEventsParticipate.html",restrict:"A",transclude:!0,scope:{userEventsParticipate:"@"},replace:!0,link:function(a,c,e){e.$observe("userEventsParticipate",function(c){var f=e.userEventsParticipate;"string"==typeof f&&f.length>0&&(f=JSON.parse(f)),f&&f.id&&d.prepared("UserEventsParticipate",{user_id:f.id}).then(function(c){var d=(new Date).valueOf(),e=c.data.filter(function(a){return new Date(a.date).valueOf()>=d});e.forEach(function(a){a.urlName=b.urlName(a.name),
a.urlLink=b.isLocalHost()?"#/event/"+a.event_id+"/"+a.urlName:"/event/"+a.event_id+"/"+a.urlName}),a.events=e,a.calEvents=c.data.map(function(a){return{title:a.name,date:new Date(a.date),event_id:a.id,color:"#257e4a"}}),a.eventSources={events:a.calEvents}})}),a.uiConfig={calendar:{axisFormat:"HH:mm",height:"auto",editable:!1,displayEventTime:!1,defaultView:"agendaFourDay",views:{agendaFourDay:{type:"agenda",duration:{days:3},buttonText:"4 day",allDaySlot:!1,allDayText:"all-day",slotDuration:"02:00:00",minTime:"06:00:00",maxTime:"24:00:00",slotEventOverlap:!0,columnFormat:"DD/MM"}},header:{left:"",center:"",right:"prev,next"}}}}}}]),angular.module("indeuApp").directive("searchBox",["Redirect",function(a){return{templateUrl:"views/inc/inc.searchBox.html",restrict:"EA",replace:!0,scope:{},link:function(b,c,d){c.find("input").on("keydown",function(b){console.log(b.which,this.value.length),13===b.which&&this.value.length>0&&(console.log(this.value),a.search(this.value))})}}}]),angular.module("indeuApp").directive("userReactions",["$timeout","Login","Utils","Lookup","ESPBA","Settings",function(a,b,c,d,e,f){return{templateUrl:"views/inc/inc.userReactions.html",restrict:"A",transclude:!0,scope:{},controller:["$scope",function(a){f.init(a)}],replace:!0,link:function(a,d,f){if(b.isLoggedIn()){var g=b.currentUser().id;a.showEmpty=function(){return d.find(".list-group-item").length<=0};var h,i;e.prepared("UserReactions",{user_id:g}).then(function(b){var d=b.data.sort(function(a,b){return new Date(b.created_timestamp).valueOf()-new Date(a.created_timestamp).valueOf()});d.forEach(function(a){switch(a.show_name=a.full_name.length>10?a.first_name:a.full_name,a.title=a.full_name,a.userUrl=c.isLocalHost()?"/#/":"/",a.userUrl+="medlemmer/"+a.user_id+"/"+c.urlName(a.full_name),a.url=c.isLocalHost()?"/#/":"/",a.type){case"f":a.title+=" tilmeldte sig eventen "+a.caption,a.url+="event/";break;case"e":a.title+=" skrev en kommentar til "+a.caption,a.url+="event/";break;case"a":a.title+=" skrev en kommentar til "+a.caption,a.url+="artikel/";break;case"c":a.title+=" svarede på din kommentar "+a.caption}a.url+=a.id+"/"+c.urlName(a.caption)}),i=d,h=d.slice(0,5),a.reactions=a.Settings.recentReactionsShowAll?i:h,a.$watch("Settings.recentReactionsShowAll",function(){a.reactions=a.Settings.recentReactionsShowAll?i:h})})}}}}]),angular.module("indeuApp").directive("userRecentArticles",["Utils","Login","Settings","ESPBA",function(a,b,c,d){return{templateUrl:"views/inc/inc.userRecentArticles.html",restrict:"EA",replace:!0,scope:{userRecentArticles:"@"},link:function(b,c,e){b.showEmpty=function(){return c.find(".list-group-item").length<=0},e.$observe("userRecentArticles",function(){var c=e.userRecentArticles;d.get("article",{user_id:c},{orderBy:{field:"created_timestamp",order:"desc"}}).then(function(c){c.data.forEach(function(b){b.url=a.isLocalHost()?"/#/":"/",b.url+="artikel/"+b.id+"/"+a.urlName(b.header)}),b.articles=c.data})})}}}]),angular.module("indeuApp").directive("attachImage",["ImageUploadModal","Utils",function(a,b){return{templateUrl:"views/inc/attachImage.directive.html",restrict:"AE",transclude:!0,require:"?ngModel",scope:{type:"@",size:"@",title:"@"},replace:!0,controller:["$scope",function(a){}],link:function(b,c,d,e){b.image="",b.getSizeClass=function(){var a=d.size||"auto";if("auto"==a){var e=d.height||200;c.css("height",e),c.css("max-height",e),c.css("overflow","hidden")}return(b.image?"":"attach-image-icon ")+"attach-image-"+a},b.defaultImage='<i class="fa fa-user"></i>';var f,g,h=d.title||"Skift billede";e.$render=function(){f="",g="";var a=e.$modelValue;switch(d.type.toString().toLowerCase().slice(0,1)){case"a":b.defaultImage='<i class="fa fa-picture-o"></i>',f="artikel";break;case"u":b.defaultImage='<i class="fa fa-user"></i>',f="medlem";break;case"g":b.defaultImage='<i class="fa fa-group"></i>',f="gruppe"}g+="media/"+f+"/"+a,b.image=a?g:""},b.loadImage=function(){var c={target:f,title:h,btnOk:"Gem og luk",btnCancel:"Fortryd",currentImage:b.image};a.show(b,c).then(function(a){a&&(e.$setViewValue(a.filename),e.$render())})}}}}]),angular.module("indeuApp").directive("logNotifications",["Utils","Login","ESPBA","Log","Lookup",function(a,b,c,d,e){return{templateUrl:"views/inc/inc.logNotifications.html",restrict:"EA",replace:!0,scope:{userId:"@",hash:"@",limit:"=",notSeen:"="},link:function(f,g,h){function i(b){return b.article_id?' artiklen <a href="'+a.articleUrl(b.article_id,b.article_name)+'">'+b.article_name+"</a>":b.group_id?' gruppen <a href="'+a.gruppeUrl(b.group_id,b.group_name)+'">'+b.group_name+"</a>":b.event_id?' eventen <a href="'+a.eventUrl(b.event_id,b.event_name)+'">'+b.event_name+"</a>":b.forening_id?' foreningen <a href="'+a.foreningUrl(b.forening_id,b.forening_name)+'">'+b.forening_name+"</a>":"Should never happen"}function j(b){switch(b.type=parseInt(b.type),b.display_timestamp=moment(b.created_timestamp).fromNow().capitalize(),b.type){case d.USER_PROFILE_EDITED:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="redigerede din",b.action+=' <a href="'+a.userUrl(b.user_id,b.user_full_name)+'">profil</a>',b.title=b.userName+" "+a.plainText(b.action);break;case d.USER_ENTITY_RATING:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="gav",b.action+=" "+i(b),b.action+=" en brugervurdering",b.title=b.userName+" "+a.plainText(b.action);break;case d.ASSOCIATION_CREATED:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="oprettede foreningen",b.action+=' <a href="'+a.foreningUrl(b.forening_id,b.forening_name)+'">'+b.forening_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.ASSOCIATION_EDITED:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="redigerede foreningen",b.action+=' <a href="'+a.foreningUrl(b.forening_id,b.forening_name)+'">'+b.forening_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.ASSOCIATION_MEMBER_ADDED:b.userName=b.user_id==l?"Du":b.user_full_name;var c=b.context_user_id==l?"dig":b.context_user_full_name;b.action='tilføjede <a href="'+a.userUrl(b.context_user_id,b.context_user_full_name)+'">'+c+"</a>",b.action+=' til foreningen <a href="'+a.foreningUrl(b.forening_id,b.forening_name)+'">'+b.forening_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.ASSOCIATION_MEMBER_REMOVED:b.userName=b.user_id==l?"Du":b.user_full_name;var c=b.context_user_id==l?"dig":b.context_user_full_name;b.action='fjernede <a href="'+a.userUrl(b.context_user_id,b.context_user_full_name)+'">'+c+"</a>",b.action+=' fra foreningen <a href="'+a.foreningUrl(b.forening_id,b.forening_name)+'">'+b.forening_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.COMMENT_ENTITY:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="kommenterede",b.action+=i(b),b.title=a.plainText(b.action);break;case d.COMMENT_COMMENT:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="svarede ",b.action+=' <a href="'+a.userUrl(b.context_user_id,b.context_user_full_name)+'">'+b.context_user_full_name+"</a>",b.action+=" i "+i(b),b.title=a.plainText(b.action);break;case d.COMMENT_OWN_COMMENT:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="besvarede din egen kommentar",b.action+=" i "+i(b),b.title=a.plainText(b.action);break;case d.GROUP_MEMBER_ADDED:b.userName=b.user_id==l?"Du":b.user_full_name,b.url=a.gruppeUrl(b.group_id,b.group_name),b.title=b.userName+" "+b.action+" "+b.group_name,b.action='følger nu gruppen <a href="'+b.url+'">'+b.group_name+"</a>";break;case d.GROUP_CREATED:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="oprettede gruppen",b.action+=' <a href="'+a.gruppeUrl(b.group_id,b.group_name)+'">'+b.group_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.GROUP_EDITED:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="redigerede gruppen",b.action+=' <a href="'+a.gruppeUrl(b.group_id,b.group_name)+'">'+b.group_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.EVENT_CREATED:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="oprettede en ny event ",b.action+='  <a href="'+a.eventUrl(b.event_id,b.event_name)+'">'+b.event_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.EVENT_EDITED:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="redigerede eventen",b.action+='  <a href="'+a.eventUrl(b.event_id,b.event_name)+'">'+b.event_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.EVENT_CONTACTPERSON_ADDED:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="tilføjede";var c=b.context_user_id==l?"dig":b.context_user_full_name;b.action+='  <a href="'+a.userUrl(b.context_user_id,b.context_user_full_name)+'">'+c+"</a>",b.action+=' som kontaktperson til eventen <a href="'+a.eventUrl(b.event_id,b.event_name)+'">'+b.event_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.EVENT_CONTACTPERSON_REMOVED:b.userName=b.user_id==l?"Du":b.user_full_name;var c=b.context_user_id==l?"dig":b.context_user_full_name;b.action="fjernede",b.action+='  <a href="'+a.userUrl(b.context_user_id,b.context_user_full_name)+'">'+c+"</a>",b.action+=' som kontaktperson til eventen <a href="'+a.eventUrl(b.event_id,b.event_name)+'">'+b.event_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.EVENT_GROUP_ADDED:var f=e.getGroup(b.context_user_id);b.userName=b.user_id==l?"Du":b.user_full_name,b.action="tilføjede",b.action+='  <a href="'+a.gruppeUrl(f.id,f.name)+'">'+f.name+"</a>",b.action+=' til eventen <a href="'+a.eventUrl(b.event_id,b.event_name)+'">'+b.event_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.EVENT_GROUP_REMOVED:var f=e.getGroup(b.context_user_id);b.userName=b.user_id==l?"Du":b.user_full_name,b.action="fjernede",b.action+='  <a href="'+a.gruppeUrl(f.id,f.name)+'">'+f.name+"</a>",b.action+=' fra eventen <a href="'+a.eventUrl(b.event_id,b.event_name)+'">'+b.event_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.EVENT_FEEDBACK_1:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="deltager måske i eventen",b.action+=' <a href="'+a.eventUrl(b.event_id,b.event_name)+'">'+b.event_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.EVENT_FEEDBACK_2:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="deltager i eventen",b.action+=' <a href="'+a.eventUrl(b.event_id,b.event_name)+'">'+b.event_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.EVENT_FEEDBACK_REMOVE:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="deltager alligevel ikke i eventen",b.action+=' <a href="'+a.eventUrl(b.event_id,b.event_name)+'">'+b.event_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.ARTICLE_EDITED:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="redigerede artiklen",b.action+='  <a href="'+a.articleUrl(b.article_id,b.article_name)+'">'+b.article_name+"</a>",b.title=b.userName+" "+a.plainText(b.action);break;case d.ARTICLE_CREATED:b.userName=b.user_id==l?"Du":b.user_full_name,b.action="oprettede en ny artikel",b.action+='  <a href="'+a.articleUrl(b.article_id,b.article_name)+'">'+b.article_name+"</a>",b.title=b.userName+" "+a.plainText(b.action)}}function k(){var a={};f.userId&&(a.user_id=f.userId),f.hash&&(a.hash=f.hash),f.notSeen&&(a.notSeen="yes"),f.limit&&(a.limit=f.limit),c.prepared("Log",a).then(function(a){a.data.forEach(function(a){j(a)}),f.notifications=a.data})}var l=b.isLoggedIn()?b.currentUser().id:null;h.$observe("userId",function(){f.userId&&k()}),h.$observe("hash",function(){f.hash&&k()})}}}]),angular.module("indeuApp").controller("LoginCtrl",["$scope","$location","$window","ESPBA","Login","RememberMe",function(a,b,c,d,e,f){var g=f.get();a.user={navn:g.m,password:g.p,rememberMe:""!==g.p},a.canLogin=function(){return""!==a.user.navn&&""!==a.user.password},a.doLogin=function(){e.login(a.user.navn,a.user.password,a.user.rememberMe).then(function(d){d.error?a.user.error=d.error:(b.path("/admin-produkter"),c.location.reload())})}}]),angular.module("indeuApp").controller("NavbarCtrl",["$scope","$location","$timeout","$compile","Login","Lookup","RememberMe","ESPBA","Utils",function(a,b,c,d,e,f,g,h,i){a.isLoggedIn=function(){return e.isLoggedIn()?(a.user_name=e.currentUser().first_name,!0):(a.showSearch&&(a.showSearch=!1),!1)},a.userIsAdmin=function(){return!!e.isLoggedIn()&&e.isAdmin()},e.isLoggedIn()&&(a.showSearch||(a.showSearch=!0)),a.rememberMe=g.get(),a.isAdmin=e.isAdmin(),a.logout=function(){a.showSearch=!1,e.logout(),b.path("/"),a.reloadGroups()},a.login={error:"",email:a.rememberMe.m,password:a.rememberMe.p,rememberMe:1==a.rememberMe.rememberMe?1:0},a.showSearchForm=function(){return 1==a.showSearch},a.doLogin=function(){e.login(a.login.email,a.login.password,a.login.rememberMe).then(function(d){d&&d.error?a.login.error=d.error:(a.error="",a.isAdmin=e.isAdmin(),b.path("/dig"),a.reloadGroups(),c(function(){a.showSearch=!0},800))}).catch(function(b){a.errors.other=b.message})},a.showSearchBox=function(){return"/soeg"!=b.path()},a.reloadGroups=function(){var b=e.isLoggedIn()?{user_id:e.currentUser().id}:{};h.prepared("MenuGroups",b).then(function(b){if(b.data.length){a.groups&&delete a.groups;var d={f:[],s:[],t:[]},e="f",f=Math.abs(b.data.length/3),g=0;b.data.forEach(function(a){a.url=i.gruppeUrl(a.id,a.name),d[e].push(a),g++,g>f&&(e="s"),g>2*f&&(e="t")}),c(function(){a.groups=d,a.$apply()})}})},a.groups||a.reloadGroups()}]),angular.module("indeuApp").controller("FrontpageCtrl",["$scope","ESPBA","Lookup","Meta","Utils","Redirect","Notification",function(a,b,c,d,e,f,g){function h(){b.get("frontpage").then(function(c){var d=c.data[0];b.get("article",{id:d.promoted_article_id}).then(function(b){b=b.data[0],b.urlName=e.urlName(b.header);var c=e.trimHtml(b.content,500),d=e.isLocalHost()?'&nbsp;&nbsp;<a href="#/artikel/'+b.id+"/"+b.urlName+'" debug-link>Læs mere ...</a>':'&nbsp;&nbsp;<a href="artikel/'+b.id+"/"+b.urlName+'" debug-link>Læs mere ...</a>';c=[c.slice(0,c.length-10),d,c.slice(c.length-10)].join(""),b.html=c,a.article=b})})}d.setTitle("indeu.org"),d.setDescription("bla bla."),c.init().then(function(){h()}),f.message()&&(g(f.message()),f.clear())}]),angular.module("indeuApp").controller("BlivMedlemCtrl",["$scope","$q","$routeParams","$timeout","ESPBA","Lookup","Meta","Utils",function(a,b,c,d,e,f,g,h){a.reg={},a.canRegister=function(){return a.reg.fuldeNavn&&a.reg.email&&a.reg.adresse&&a.reg.postnr&&a.reg.by}}]),angular.module("indeuApp").controller("MedlemCtrl",["$scope","$q","$routeParams","$timeout","ESPBA","Lookup","Meta","Utils",function(a,b,c,d,e,f,g,h){a.reg={},a.canRegister=function(){return a.reg.fuldeNavn&&a.reg.email&&a.reg.adresse&&a.reg.postnr&&a.reg.by}}]),angular.module("indeuApp").controller("MedlemForsideCtrl",["$scope","$q","$routeParams","$timeout","ESPBA","Lookup","Meta","Utils","Login","Redirect",function(a,b,c,d,e,f,g,h,i,j){j.checkLogin("Du skal være logget ind for at kunne se medlemsprofiler");var k=c.id;e.get("user",{id:k}).then(function(b){a.user=b.data[0],a.user.image=a.user.image||"",d(function(){a.$apply()},10)}),e.get("group_user",{user_id:k}).then(function(b){a.groups=[],b.data.forEach(function(b){var c=f.getGroup(b.group_id);c.is_owner=c.owner_id==k,c.urlName=h.urlName(c.name),c.urlTitle=h.plainText(c.about,200),a.groups.push(c)})}),e.get("event",{user_id:k}).then(function(b){a.events=b.data}),e.get("article",{user_id:k}).then(function(b){a.articles=b.data,a.articles.forEach(function(a){a.headerUrl=h.urlName(a.header)})})}]),angular.module("indeuApp").controller("DigForsideCtrl",["$scope","$location","Settings","Login","ESPBA","Lookup","Meta","Utils","ImageUploadModal","Redirect",function(a,b,c,d,e,f,g,h,i,j){if(j.checkLogin("Du skal være logget ind for at kunne se din egen forside"),c.init(a),d.isLoggedIn())var k=d.currentUser().id;a.edit_event_id=void 0,a.edit_article_id=void 0,a.action="",a.setAction=function(b){""!=b&&""!=a.action&&a.action!=b||(a.action=b)},a.actionCancel=function(){a.action="",a.edit_article_id=void 0,a.edit_event_id=void 0},a.actionDisable=function(b){return a.action!=b&&""!=a.action},a.actionSaved=function(b){a.action="",a.edit_article_id=void 0,a.edit_event_id=void 0},a.editArticle=function(b){a.edit_article_id=b,a.action="a",h.scrollTop()},a.editEvent=function(b){a.edit_event_id=b,a.action="e",h.scrollTop()},a.actionProfileSaved=function(){a.actionSaved(),a.reload()},a.$watch("action",function(){switch(a.action){case"a":a.action_caption=a.edit_article_id?"rediger artikel":"opret artikel";break;case"g":a.action_caption=a.edit_gruppe_id?"rediger gruppe":"opret gruppe";break;case"e":a.action_caption=a.edit_gruppe_id?"rediger event":"opret event";break;default:a.action_caption=void 0}}),a.reload=function(){e.get("user",{id:k}).then(function(b){a.user=b.data[0],a.user.image=a.user.image||""})},a.reload(),a.calConfig={buttonText:{today:"I dag",month:"Denne måned",week:"uge",day:"dag",list:"list"},axisFormat:"HH:mm",fixedWeekCount:!1,height:"auto",editable:!1,displayEventTime:!1,defaultView:"agendaFiveDay",views:{agendaFiveDay:{type:"agenda",duration:{days:5},buttonText:"Kommende 5 dage",allDaySlot:!1,allDayText:"all-day",slotDuration:"02:00:00",minTime:"06:00:00",maxTime:"24:00:00",slotEventOverlap:!0,columnFormat:"DD/MM"}},header:{left:"title",center:"agendaFiveDay,month",right:"prev,next"},eventClick:function(a){console.log(arguments);var c="/event/"+a.event_id+"/"+a.urlName;b.path(c)}},e.prepared("UserEventsParticipate",{user_id:k}).then(function(b){var c=b.data.map(function(a){return{start:new Date(a.date+" "+a.from),end:new Date(a.date+" "+a.to),title:a.name,name:a.name,urlName:h.urlName(a.name),event_id:a.event_id,color:"#257e4a",allDay:!1}}),d=new Date,e=b.data.filter(function(a){var b=new Date(a.date+" "+a.from);if(b.valueOf()>=d.valueOf())return a.date=b,a.start=b,a.end=new Date(a.date+" "+a.to),a.urlName=h.urlName(a.name),a.urlLink=h.isLocalHost()?"#/event/"+a.event_id+"/"+a.urlName:"/event/"+a.event_id+"/"+a.urlName,!0});a.calConfig.futureEvents=e,a.calConfig.events=c}),e.get("group_user",{user_id:k}).then(function(b){var c=[];b.data.forEach(function(a){var b=f.getGroup(a.group_id);b.is_owner=b.owner_id==k,b.urlName=h.urlName(b.name),b.urlTitle=h.plainText(b.about,200),c.push(b)}),a.groups=c})}]),angular.module("indeuApp").controller("EventForsideCtrl",["$scope","Login","$routeParams","ESPBA","Lookup","Meta","Utils","Redirect","Const","UserVisits","Log",function(a,b,c,d,e,f,g,h,i,j,k){a.eventMap=i.defaultMap();var l=c.id;b.isLoggedIn()&&(a.user=b.currentUser()),a.reloadEvent=function(){d.get("event",{id:l}).then(function(c){a.event=c.data[0],j.visit(a.event.hash),a.event.from=g.createTime(a.event.from),a.event.to=g.createTime(a.event.to);var f=parseFloat(a.event.lat),i=parseFloat(a.event.lng);if(f&&i)switch(a.eventMap.markers.marker={lat:f,lng:i,focus:!0,draggable:!1},a.eventMap.center={lat:f,lng:i,zoom:13},a.event.visibility_level){case"1":break;case"2":b.isLoggedIn()||h.home("Du skal være logget ind for at kunne se denne event")}a.event_user=e.getUser(a.event.user_id),a.event_user.urlName=g.urlName(a.event_user.full_name),d.get("event_contactperson",{event_id:l}).then(function(b){var c=b.data.map(function(a){return a.user=e.getUser(a.user_id),a});a.event_contactpersons=c}),d.get("group_events",{event_id:l}).then(function(b){b.data.forEach(function(a){var b=e.getGroup(a.group_id);a.name=b.name,a.urlName=g.urlName(b.name)}),a.event_groups=b.data})}),b.isLoggedIn()&&d.get("event_user_feedback",{event_id:l,user_id:a.user.id}).then(function(b){b.data.length?a.feedback=b.data[0]:a.feedback={feedback:0,user_id:a.user.id,event_id:l}})},a.reloadEvent(),a.setFeedback=function(b){var c=a.event.id;if(a.event.id=void 0,0==b&&a.feedback.id)a.feedback.feedback=b,d.delete("event_user_feedback",{id:a.feedback.id}).then(function(){a.feedback.id=null,a.event.id=c,k.log({type:k.EVENT_FEEDBACK_REMOVE,user_id:a.user.id,hash:a.event.hash})});else{a.feedback.feedback=b;var e={type:1==b?k.EVENT_FEEDBACK_1:k.EVENT_FEEDBACK_2,user_id:a.user.id,hash:a.event.hash};a.feedback.id?d.update("event_user_feedback",a.feedback).then(function(){a.event.id=c,k.log(e)}):d.insert("event_user_feedback",a.feedback).then(function(b){a.feedback=b.data[0],a.event.id=c,k.log(e)})}},a.action="",a.setAction=function(b){""!=b&&""!=a.action&&a.action!=b||(a.action=b)},a.actionCancel=function(){a.action="",a.reloadEvent()},a.actionDisable=function(b){return a.action!=b&&""!=a.action},a.actionSaved=function(b){a.action="",a.reloadEvent()}}]),angular.module("indeuApp").controller("GruppeForsideCtrl",["$scope","Login","$routeParams","Const","ESPBA","Lookup","Meta","Utils","Log","Notification",function(a,b,c,d,e,f,g,h,i,j){function k(a){switch(parseInt(a)){case d.ACCESS_LEVEL_PUBLIC:return"Gruppen kan tilgåes af alle. ";case d.ACCESS_LEVEL_USERS:return"Gruppen kan kun tilgåes af brugere der er logget ind. ";default:return"Gruppen er lukket, kan kun tilgåes af medlemmer. "}}function l(a){switch(parseInt(a)){case d.VISIBILITY_LEVEL_PUBLIC:return"Gruppen er synlig for alle. ";case d.VISIBILITY_LEVEL_USERS:return"Gruppen er kun synlig for brugere der er logget ind. ";default:return"Gruppen er kun synlig for gruppens medlemmer. "}}var m=c.id;b.isLoggedIn()&&(a.user=b.currentUser()),a.action="",a.setAction=function(b){a.action=b},a.actionDisable=function(b){return a.action!=b&&""!=a.action},a.editEvent=function(b){a.edit_event_id=b,a.setAction("e")},a.btn_follow_caption="Følg gruppe",e.get("group",{id:m}).then(function(c){a.group=c.data[0],a.group.visible_members=1==a.group.visible_members,a.group.visible_social=1==a.group.visible_social,a.group.events_enabled=1==a.group.events_enabled,a.group.articles_enabled=1==a.group.articles_enabled,a.group.access_status=k(a.group.access_level),a.group.visibility_status=l(a.group.visibility_level),b.isLoggedIn()?(a.userIsOwner=b.currentUser().id==a.group.owner_id,a.userIsMember=b.isGroupMember(m),a.userIsMember||e.get("group_request",{group_id:a.group.id,user_id:a.user.id}).then(function(b){b.data.length&&(a.btn_follow_caption="Afventer ...")})):a.group.visibility_level==d.VISIBILITY_LEVEL_PUBLIC&&h.refreshPage("/")}),a.followRequest=function(){3==a.group.visibility_level?e.insert("group_reqest",{group_id:a.group.id,user_id:a.user.id}).then(function(){a.btn_follow_caption="Afventer ...",j("Anmodning om at følge gruppen afsendt"),i.log({type:i.GROUP_MEMBER_REQUEST,user_id:a.user.id,hash:a.group.hash})}):e.insert("group_user",{group_id:a.group.id,user_id:a.user.id}).then(function(){a.userIsMember=!0,j("Du følger nu <strong>"+a.group.name+"</strong>"),i.log({type:i.GROUP_MEMBER_ADDED,user_id:a.user.id,context_user_id:a.user.id,hash:a.group.hash})})},a.onEventSave=function(){a.setAction(""),a.loadEvents()},a.onArticleSave=function(){a.setAction(""),a.loadArticles()},a.onActionCancel=function(){a.setAction("")},e.get("group_user",{group_id:m}).then(function(b){a.group_users=[],b.data.forEach(function(b){var c=f.getUser(b.user_id);c.urlName=h.urlName(c.full_name),a.group_users.push(c)})})}]),angular.module("indeuApp").controller("KalenderForsideCtrl",["$scope","$location","Login","$timeout","leafletData","ESPBA","Lookup","Meta","Utils","Const",function(a,b,c,d,e,f,g,h,i,j){function k(){}h.setTitle("indeu.org"),h.setTitle("Kalender"),h.setDescription("Kalender");var l={};c.isLoggedIn()?(a.isLoggedIn=!0,l.user_id=c.currentUser().id):a.isLoggedIn=!1;var m=a.isLoggedIn?{}:{visibility_level:1};a.eventMap=j.defaultMap(),a.eventMap.center={lat:56.126627523318206,lng:11.697741782069205,zoom:6},a.eventMap.layers.baselayers.googleTerrain.visible=!1;var n=a.eventMap.layers.baselayers;a.eventMap.layers.baselayers={},a.eventMap.layers.baselayers.bw={visible:!0,name:"123",type:"xyz",maxZoom:18,minZoom:5,url:"http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",layerOptions:{subdomains:["a","b","c"],attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',continuousWorld:!0}},$.extend(a.eventMap.layers.baselayers,n);var o={iconUrl:"assets/images/blue.png",iconSize:[15,26],iconAnchor:[12,21],shadowAnchor:[4,62],popupAnchor:[-4,-20]};a.$on("leafletDirectiveMarker.click",function(b,c){e.getMap().then(function(b){var d=$.extend({},c.leafletObject._latlng);d.zoom=b._zoom+1,a.eventMap.center=d})}),f.prepared("RecentEvents",l).then(function(b){a.eventMap.markers=[],b.data.forEach(function(b){var c=parseFloat(b.lat),d=parseFloat(b.lng);c&&d&&a.eventMap.markers.push({lat:c,lng:d,icon:o})})}),f.get("event",m).then(function(b){a.events=[],b.data.forEach(function(b){a.events.push({title:b.name,date:new Date(b.date),event_id:b.id,color:"#257e4a"})}),a.eventSources={events:a.events},a.uiConfig={calendar:{height:"auto",editable:!1,displayEventTime:!1,header:{center:"title",right:"prev,next"},eventDrop:a.alertOnDrop,eventResize:a.alertOnResize,eventRender:a.eventRender,eventSources:a.eventSources,eventClick:a.eventClick,dayClick:a.dayClick}}}),a.eventClick=function(a,c,d){var e="/event/";e+=a.event_id+"/",e+=i.urlName(a.title),b.path(e)},a.dayClick=function(a){alert("ok")},a.eventRender=function(a,b,c){$(b).addClass("text-muted")},g.init().then(function(){k()})}]),angular.module("indeuApp").controller("ArticleForsideCtrl",["$scope","Login","$routeParams","ESPBA","Lookup","Meta","Utils","UserVisits","VisitCounter",function(a,b,c,d,e,f,g,h,i){b.isLoggedIn()&&(a.user=b.currentUser());var j=c.id;a.reload=function(b){d.get("article",{id:j}).then(function(c){var f=c.data[0];f.dateStamp=moment(f.created_timestamp).calendar(),f.realDate=moment(f.created_timestamp);var k=e.getUser(f.user_id);f.userFullName=k.full_name;var l="/medlemmer/"+k.id+"/"+g.urlName(k.full_name);g.isLocalHost()&&(l="#"+l),f.userUrlLink=l,a.article=f,b&&(h.visit(f.hash),i.visit(f.hash)),a.visitCounter=!1,a.user&&a.user.id==f.user_id&&d.get("visit_counter",{hash:f.hash}).then(function(b){if(b.data&&b.data.length){var b=b.data[0];a.visitCounter=b.counter}}),d.get("group_articles",{article_id:j}).then(function(b){b.data.forEach(function(a){var b=e.getGroup(a.group_id);a.name=b.name,a.urlName=g.urlName(b.name)}),a.article_groups=b.data})})},a.reload(!0),a.action="",a.setAction=function(b){""!=b&&""!=a.action&&a.action!=b||(a.action=b)},a.actionCancel=function(){a.action="",a.reload()},a.actionDisable=function(b){return a.action!=b&&""!=a.action},a.actionSaved=function(b){a.action="",a.reload()},a.onCommentAdded=function(a){alert("ok"),console.log(arguments)}}]),angular.module("indeuApp").controller("SearchCtrl",["$scope","$timeout","ESPBA","Lookup","Meta","Utils","Redirect","Notification","Settings",function(a,b,c,d,e,f,g,h,i){a.term=g.message(!0),i.init(a);var j=function(){var b={term:a.term,articles:a.Settings.searchWithinArticles,events:a.Settings.searchWithinEvents};c.prepared("Search",b).then(function(c){c.data.map(function(a){switch(a.date_str=moment(a.created_timestamp).format("llll").capitalize(),a.type){case"a":a.url=f.articleUrl(a.id,a.caption);break;case"e":a.url=f.eventUrl(a.id,a.caption);break;default:a.url="NOT SET!"}for(var c,d=new RegExp(b.term,"gi"),e=f.plainText(a.content),g="";c=d.exec(e);){""!=g&&(g+=" ...");var h=c.index-18<0?10-(c.index+18):10;if(g+=e.substr(c.index-h,h),g+="<strong>"+c[0]+"</strong>",g+=e.substr(d.lastIndex,33),g.length>200)break}a.content_extract=g}),a.results=c.data})};a.term&&j();var k=angular.element("#input");k.on("keydown",function(a){13===a.which&&this.value.length>0&&j()}),b(function(){k.focus()},15)}]),angular.module("indeuApp").controller("AdminCtrl",["$scope","$location","$timeout","ESPBA","Lookup","Meta","Utils","Login","Redirect",function(a,b,c,d,e,f,g,h,i){h.isLoggedIn()?h.isAdmin()||i.home("Du er ikke administrator"):i.home("Du er ikke logget ind")}]),angular.module("indeuApp").controller("AdminForsideCtrl",["$scope","$q","Utils","$timeout","ESPBA","SelectArtikelModal","Notification",function(a,b,c,d,e,f,g){e.get("frontpage",{}).then(function(b){a.frontpage=b.data.length?b.data[0]:{},a.frontpage.promoted_article_id&&0!=a.frontpage.promoted_article_id&&e.get("article",{id:a.frontpage.promoted_article_id}).then(function(b){a.promoted_article=b.data[0]})}),a.selectArtikel=function(){f.show(a).then(function(b){if(b){var c=b[0];a.promoted_article=c,a.frontpage.promoted_article_id=c.id,e.update("frontpage",a.frontpage).then(function(){g.primary("Cover forside artikel ændret til <strong>"+c.header+"</strong>")})}})}}]),angular.module("indeuApp").controller("AdminBrugereCtrl",["$scope","$q","Utils","$timeout","ESPBA","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions","BrugerModal","Const",function(a,b,c,d,e,f,g,h,i,j){h.setLoadingTemplate('<img src="images/ajax-loader.3fd27945.gif">'),a.dtInstanceCallback=function(b){a.dtInstance=b},a.dtColumns=[g.newColumn("id").withTitle("#").withClass("no-click").notSortable().renderWith(function(a,b,d,e){return"display"===b?'<a href="#/medlemmer/'+d.id+"/"+c.urlName(d.full_name)+'"><i class="fa fa-eye"></i></a>':a}),g.newColumn("first_name").withTitle("Fornavn"),g.newColumn("last_name").withTitle("Efternavn"),g.newColumn("alias").withTitle("Alias"),g.newColumn("email").withTitle("Email"),g.newColumn("logged_in").withTitle("Online").withClass("text-center").renderWith(function(a,b,c,d){return"display"===b?1==a?'<i class="fa fa-check"></i>':"":a}),g.newColumn("last_seen").withTitle("Sidst set").withOption("visible",!1),g.newColumn("created_timestamp").withTitle("Oprettet")],a.dtOptions=f.fromFnPromise(function(){var c=b.defer();return e.get("user",{}).then(function(b){a.data=b.data,c.resolve(a.data)}),c.promise}).withOption("drawCallback",function(){}).withOption("rowCallback",function(a,b){$(a).attr("user-id",b.id)}).withOption("dom","Blfrtip").withOption("stateSave",!0).withOption("language",j.dataTables_daDk).withButtons([{extend:"colvis",text:'Vis kolonner &nbsp;<i class="caret" style="position:relative;top:-3px;"></i>',className:"btn btn-default btn-xs colvis-btn"},{text:'<span><i class="fa fa-plus text-success"></i>&nbsp;Ny bruger</span>',className:"btn btn-xs",action:function(){i.show(a).then(function(){a.dtInstance.reloadData()})}}]),angular.element("#table-brugere").on("click","tbody td:not(.no-click)",function(b){var c=$(this).parent().attr("user-id");if(!c||i.isShown())return b.preventDefault(),void b.stopPropagation();i.show(a,c).then(function(){a.dtInstance.reloadData()})})}]),angular.module("indeuApp").controller("AdminGrupperCtrl",["$scope","$q","Utils","ESPBA","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions","GruppeModal","Lookup","Const",function(a,b,c,d,e,f,g,h,i,j){g.setLoadingTemplate('<img src="images/ajax-loader.3fd27945.gif">'),a.dtInstanceCallback=function(b){a.dtInstance=b};a.dtColumns=[f.newColumn("id").withTitle("#").withClass("no-click").renderWith(function(a,b,d,e){return"display"===b?'<a href="#/grupper/'+d.id+"/"+c.urlName(d.name)+'"><i class="fa fa-eye"></i></a>':a}),f.newColumn("name").withTitle("Navn"),f.newColumn("owner_id").withTitle("Ejer").renderWith(function(a,b){if("display"===b){if(!isNaN(a)){var c=parseInt(a);return i.getUser(c).full_name}return a}return a}),f.newColumn("about").withTitle("Beskrivelse").withClass("td-about-text").renderWith(function(a,b){return"display"===b?$(a).text():a}),f.newColumn("access_level").withTitle("Niveau").renderWith(function(a,b){return"display"===b?i.accessLevelName(a):a}),f.newColumn("visibility_level").withTitle("Synlighed").renderWith(function(a,b){return"display"===b?i.visibilityLevelName(a):a})],a.dtOptions=e.fromFnPromise(function(){var c=b.defer();return d.get("group",{}).then(function(b){a.data=b.data,c.resolve(a.data)}),c.promise}).withOption("drawCallback",function(){}).withOption("rowCallback",function(a,b){$(a).attr("group-id",b.id)}).withOption("dom","Blfrtip").withOption("stateSave",!0).withOption("language",j.dataTables_daDk).withButtons([{extend:"colvis",text:'Vis kolonner &nbsp;<i class="caret" style="position:relative;top:-3px;"></i>',className:"btn btn-default btn-xs colvis-btn"},{text:'<span><i class="fa fa-plus text-success"></i>&nbsp;Ny gruppe</span>',className:"btn btn-xs",action:function(){
h.show(a).then(function(){a.dtInstance.reloadData()})}}]),angular.element("#table-grupper").on("click","tbody td:not(.no-click)",function(b){var c=$(this).parent().attr("group-id");if(!c||h.isShown())return b.preventDefault(),void b.stopPropagation();h.show(a,c).then(function(){a.dtInstance.reloadData()})})}]),angular.module("indeuApp").controller("AdminForeningerCtrl",["$scope","$q","ESPBA","Utils","Const","Log","Login","ForeningModal","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions",function(a,b,c,d,e,f,g,h,i,j,k){k.setLoadingTemplate('<img src="images/ajax-loader.3fd27945.gif">'),a.dtInstanceCallback=function(b){a.dtInstance=b},a.dtColumns=[j.newColumn("id").withTitle("#").notSortable().withClass("no-click").renderWith(function(a,b,c){return"display"===b?'<a href="'+d.foreningUrl(c.id,c.name)+'" target=_blank><i class="fa fa-eye"></i></a>':a}),j.newColumn("created_timestamp").withTitle("Oprettet").renderWith(function(a){return moment(a).calendar()}),j.newColumn("active").withTitle("").renderWith(function(a){return"1"==a?'<i class="fa fa-check text-success"></i>':'<i class="fa fa-remove"></i>'}),j.newColumn("name").withTitle("Navn")],a.dtOptions=i.fromFnPromise(function(){var d=b.defer();return c.get("association",{}).then(function(b){a.data=b.data,d.resolve(a.data)}),d.promise}).withOption("rowCallback",function(a,b){$(a).attr("forening-id",b.id)}).withOption("dom","Blfrtip").withOption("stateSave",!0).withOption("language",e.dataTables_daDk).withButtons([{extend:"colvis",columns:":not(.no-colvis)",text:'Vis kolonner &nbsp;<i class="caret" style="position:relative;top:-3px;"></i>',className:"btn btn-default btn-xs colvis-btn"},{text:'<span><i class="fa fa-plus text-success"></i>&nbsp;Ny Forening</span>',className:"btn btn-xs",action:function(){h.show(a).then(function(b){b&&a.dtInstance.reloadData()})}}]),angular.element("#table-foreninger").on("click","tbody td:not(.no-click)",function(b){var c=$(this).parent().attr("forening-id");h.show(a,c).then(function(b){b&&a.dtInstance.reloadData()})})}]),angular.module("indeuApp").controller("AdminArtiklerCtrl",["$scope","$q","$timeout","ESPBA","Lookup","Meta","Utils","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions","ArtikelModal","Const",function(a,b,c,d,e,f,g,h,i,j,k,l){j.setLoadingTemplate('<img src="images/ajax-loader.3fd27945.gif">'),a.dtInstanceCallback=function(b){a.dtInstance=b};a.dtColumns=[i.newColumn("id").withTitle("").notSortable().withClass("no-click no-colvis").renderWith(function(a,b,c){return"display"===b?'<a href="'+g.articleUrl(c.id,c.header)+'" target=_blank><i class="fa fa-eye cursor-pointer"></i></a>':a}),i.newColumn("accepted").withTitle("★").renderWith(function(a,b,c){if("display"!==b)return a;switch(a=parseInt(a)){case 0:return'<i class="fa fa-remove text-danger"></i>';case 1:return'<i class="fa fa-check text-success"></i>';default:return'<i class="fa fa-question text-primary"></i>'}}),i.newColumn("created_timestamp").withTitle("Dato").renderWith(function(a,b,c){return"display"===b?moment(a).calendar():a}),i.newColumn("user_id").withTitle("Bruger").renderWith(function(a,b,c){return"display"===b?e.getUser(a).full_name:a}),i.newColumn("author_id").withTitle("Forfatter").renderWith(function(a,b,c){return"display"===b?parseInt(a)>0?e.getUser(a).full_name:"":a}),i.newColumn("header").withClass("td-about-text").withTitle("Overskrift"),i.newColumn("visibility_level").withTitle("Synlighed").renderWith(function(a,b){return"display"===b?e.visibilityLevelName(a):a})],a.dtOptions=h.fromFnPromise(function(){var c=b.defer();return d.get("article",{}).then(function(b){a.data=b.data,c.resolve(a.data)}),c.promise}).withOption("drawCallback",function(){}).withOption("rowCallback",function(a,b){$(a).attr("artikel-id",b.id)}).withOption("dom","Blfrtip").withOption("stateSave",!0).withOption("language",l.dataTables_daDk).withButtons([{extend:"colvis",columns:":not(.no-colvis)",text:'Vis kolonner &nbsp;<i class="caret" style="position:relative;top:-3px;"></i>',className:"btn btn-default btn-xs colvis-btn"},{text:'<span><i class="fa fa-plus text-success"></i>&nbsp;Ny artikel</span>',className:"btn btn-xs",action:function(){k.show(a).then(function(){a.dtInstance.reloadData()})}}]),angular.element("#table-artikler").on("click","tbody td:not(.no-click)",function(b){var c=$(this).parent().attr("artikel-id");if(!c||k.isShown())return b.preventDefault(),void b.stopPropagation();k.show(a,c).then(function(){a.dtInstance.reloadData()})})}]),angular.module("indeuApp").controller("AdminEventsCtrl",["$scope","$q","Utils","ESPBA","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions","EventModal","Lookup","Const",function(a,b,c,d,e,f,g,h,i,j){g.setLoadingTemplate('<img src="images/ajax-loader.3fd27945.gif">'),a.dtInstanceCallback=function(b){a.dtInstance=b};a.dtColumns=[f.newColumn("id").withTitle("#").notSortable().withClass("no-click").renderWith(function(a,b,d){return"display"===b?'<a href="#/event/'+d.id+"/"+c.urlName(d.name)+'"><i class="fa fa-eye"></i></a>':a}),f.newColumn("name").withTitle("Navn"),f.newColumn("date").withTitle("Dato"),f.newColumn("from").withTitle("Fra"),f.newColumn("to").withTitle("Til"),f.newColumn("about").withTitle("Beskrivelse").withClass("td-about-text").renderWith(function(a,b){return"display"===b?$(a).text():a}),f.newColumn("visibility_level").withTitle("Synlighed").renderWith(function(a,b){return"display"===b?i.visibilityLevelName(a):a})],a.dtOptions=e.fromFnPromise(function(){var c=b.defer();return d.get("event",{}).then(function(b){a.data=b.data,c.resolve(a.data)}),c.promise}).withOption("drawCallback",function(){}).withOption("rowCallback",function(a,b){$(a).attr("event-id",b.id)}).withOption("dom","Blfrtip").withOption("stateSave",!0).withOption("language",j.dataTables_daDk).withButtons([{extend:"colvis",text:'Vis kolonner &nbsp;<i class="caret" style="position:relative;top:-3px;"></i>',className:"btn btn-default btn-xs colvis-btn"},{text:'<span><i class="fa fa-plus text-success"></i>&nbsp;Ny event</span>',className:"btn btn-xs",action:function(){h.show(a).then(function(){a.dtInstance.reloadData()})}}]),angular.element("#table-events").on("click","tbody td:not(.no-click)",function(b){var c=$(this).parent().attr("event-id");if(!c||h.isShown())return b.preventDefault(),void b.stopPropagation();h.show(a,c).then(function(){a.dtInstance.reloadData()})})}]),angular.module("indeuApp").factory("Login",["$cookies","$timeout","$q","$location","ESPBA","RememberMe",function(a,b,c,d,e,f){function g(b){var c=new Date;c.setTime(c.getTime()+72e5),a.put(j,JSON.stringify(b),{expires:c})}function h(){a.remove(j)}function i(a,b){a&&e.update("user",{id:a.id,logged_in:b}).then(function(a){})}var j="indeu.org",k=null;return{login:function(a,b,d){var j=c.defer(),l=this;return h(),e.get("user",{email:a,password:b}).then(function(c){if(!c||c&&c.data&&0==c.data.length)return void j.resolve({error:"Email eller password ikke korrekt."});c.data&&c.data[0].id?(k=c.data[0],f.put(a,b,d),i(k,1),l.reloadGroups(),g(k),j.resolve(k)):j.resolve({error:"Email eller password ikke korrekt."})}),j.promise},logout:function(){i(k,0),k=null,h()},isLoggedIn:function(){if(k)return g(k),!0;var b=a.get(j);return!!b&&(k=JSON.parse(b),this.reloadGroups(),g(k),!0)},check:function(){this.isLoggedIn()||d.path("/")},reloadGroups:function(){e.get("group_user",{user_id:k.id}).then(function(a){console.log("user groups",a.data),k.groups=a.data})},isGroupMember:function(a){if(!k||!k.groups)return!1;for(var b=0,c=k.groups.length;b<c;b++)if(k.groups[b].group_id==a)return!0;return!1},isAdmin:function(){return!!k&&2==k.role},updateLastSeen:function(){k&&e.update("user",{id:k.id,last_seen:"CURRENT_TIMESTAMP"}).then(function(a){})},currentUser:function(){return k}}}]),angular.module("ESPBA",[]).factory("ESPBA",["$http","$location","$q",function(a,b,c){var d="http://localhost/",e="api/espba.php",f="response",g=void 0,h=function(a){return"json"==f?a.data:a},i=function(a,b){return b&&(b.limit&&(a.__limit=b.limit),b.orderBy&&("object"==typeof b.orderBy?(a.__orderBy=b.orderBy.field,b.orderBy.order&&(a.__orderBy+=" "+b.orderBy.order)):a.__orderBy=b.orderBy)),a};return{setHost:function(a){d=a},setApiPath:function(a){e=a},setReturnMode:function(a){a=a.toString().toLowerCase(),~["response","json"].indexOf(a)&&(f=a)},getHost:function(){return d},getApiPath:function(){return e},getToken:function(){return g},init:function(){var b=c.defer();return a({url:d+e,method:"POST",params:{__action:"init"}}).then(function(a){g=a.data.token||!1,b.resolve(h(a))}),b.promise},get:function(b,f,j){var k=c.defer();return f||(f={}),f.__action="get","string"==typeof b?f.__table=b:(f.__table=Object.keys(b)[0],f.__fields=b[f.__table].toString()),f.__token=g,f=i(f,j),a({url:d+e,method:"GET",params:f}).then(function(a){k.resolve(h(a))}),k.promise},delete:function(b,f){var i=c.defer();return f.__action="delete",f.__table=b,f.__token=g,a({url:d+e,method:"POST",params:f}).then(function(a){i.resolve(h(a))}),i.promise},update:function(b,f){var i=c.defer();return f.__action="update",f.__table=b,f.__token=g,a({url:d+e,method:"POST",params:f}).then(function(a){i.resolve(h(a))}),i.promise},insert:function(b,f){var h=c.defer();return f.__action="insert",f.__table=b,f.__token=g,a({url:d+e,method:"POST",params:f}).then(function(a){h.resolve(a)}),h.promise},prepared:function(b,f){var h=c.defer();f||(f={});for(var i in f)if(~i.indexOf(".")){var j=f[i],k=i.replace(/\./,"&dot;");f[k]=j,delete f[i]}return f.__action="prepared",f.__table=b,f.__token=g,a({url:d+e,method:"GET",params:f}).then(function(a){h.resolve(a)}),h.promise}}}]),angular.module("indeuApp").factory("RememberMe",["$cookies",function(a){function b(b){var c=new Date;c.setTime(c.getTime()+31536e4),a.put(d,JSON.stringify(b),{expires:c})}function c(){a.remove(d)}var d="indeu.org.rememberme",e={p:"",m:""};return{get:function(){var b=a.get(d);return b?JSON.parse(b):angular.copy(e)},put:function(a,d,e){e?b({m:a,p:d,rememberMe:!0}):c()}}}]),angular.module("indeuApp").factory("Utils",["$location","$window",function(a,b){var c="localhost"===location.hostname||"127.0.0.1"===location.hostname;return String.prototype.quote=function(){return'"'+this+'"'},String.prototype.ldQuote=function(){return"“"+this+"”"},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},{isLocalHost:function(){return c},articleUrl:function(a,b){return(this.isLocalHost()?"/#/":"/")+"artikel/"+a+"/"+this.urlName(b)},gruppeUrl:function(a,b){return(this.isLocalHost()?"/#/":"/")+"grupper/"+a+"/"+this.urlName(b)},eventUrl:function(a,b){return(this.isLocalHost()?"/#/":"/")+"event/"+a+"/"+this.urlName(b)},foreningUrl:function(a,b){return(this.isLocalHost()?"/#/":"/")+"forening/"+a+"/"+this.urlName(b)},userUrl:function(a,b){return(this.isLocalHost()?"/#/":"/")+"medlemmer/"+a+"/"+this.urlName(b)},isEmpty:function(a){return angular.equals({},a)},urlName:function(a){return a?(a=a.replace(/ /g,"-"),a=a.replace(/[\/]/g,"-"),a=a.replace(/æ/g,"ae"),a=a.replace(/Æ/g,"Ae"),a=a.replace(/ø/g,"oe"),a=a.replace(/å/g,"aa"),a=a.replace(/é/g,"e"),a=a.replace(/---/g,"-"),a=a.replace(/--/g,"-"),a.toLowerCase()):""},todayStr:function(a){a||(a="-");var b=new Date,c=b.getDate();return c+=a+(b.getMonth()+1),c+=a+b.getFullYear()},removeSecs:function(a){return a?(a=a.toString().split(":"),3==a.length?a.splice(-1,1):1==a.length&&a.push("00"),a.join(":")):""},ratingStr:function(a){do{a=a.slice(0,-1)}while("0"==a.slice(-1));return"."==a.slice(-1)&&(a=a.slice(0,-1)),a},plainText:function(a,b){var c=document.createElement("div");c.innerHTML=a;var d=c.textContent||c.innerText||"";return b&&d.length>b&&(d=d.substring(0,b)+" ..."),d},trimHtml:function(a,b){function c(a,b){var d="",e=b;return $(a).contents().each(function(){switch(this.nodeType){case Node.TEXT_NODE:d+=this.data.substr(0,e),e-=Math.min(this.data.length,e);break;case Node.ELEMENT_NODE:var a=c(this,e);d+=a.text,e-=a.count}if(0==e)return!1}),{text:a.outerHTML.match(/^<[^>]+>/m)[0]+d+"</"+a.localName+">",count:b-e}}var d=document.createElement("div");return d.innerHTML=a,c(d,b).text},createTime:function(a){var b=new Date;return a&&(a=a.split(":"),b.setHours(a[0]?a[0]:12,a[1]?a[1]:0)),b},refreshPage:function(d){c&&(d="#"+d),a.path(d),b.location.reload()},scrollTop:function(){var a=angular.element("#indeu-navbar");angular.element("body").animate({scrollTop:a.offset().top},"slow")},scrollTo:function(a,b){b||(b=300);var c=angular.element(a);angular.element("body").animate({scrollTop:c.offset().top-50},b)},getHash:function(a){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()},parse_url:function(a){var b=document.createElement("a");return b.href=a,{protocol:b.protocol?b.protocol:null,hostname:b.hostname?b.hostname:null,port:b.port?b.port:null,path:b.pathname?b.pathname:null,query:b.search?b.search:null,hash:b.hash?b.hash:null,host:b.host?b.host:null}}}}]),angular.module("indeuApp").factory("Const",["$q",function(a){var b={sEmptyTable:"Ingen tilgængelige data (prøv en anden søgning)",sInfo:"Viser _START_ til _END_ af _TOTAL_ rækker",sInfoEmpty:"Viser 0 til 0 af 0 rækker",sInfoFiltered:"(filtreret ud af _MAX_ rækker ialt)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Vis _MENU_ rækker",sLoadingRecords:"Henter data...",sProcessing:"Processing...",sSearch:"Filter:",sZeroRecords:"Ingen rækker matchede filter",oPaginate:{sFirst:"Første",sLast:"Sidste",sNext:"Næste",sPrevious:"Forrige"},oAria:{sSortAscending:": Sorter kolonne faldende",sSortDescending:": Sorter kolonne stigende"}};return{ACCESS_LEVEL_PUBLIC:1,ACCESS_LEVEL_USERS:2,ACCESS_LEVEL_CLOSED:3,VISIBILITY_LEVEL_PUBLIC:1,VISIBILITY_LEVEL_USERS:2,VISIBILITY_LEVEL_CLOSED:3,defaultMap:function(){var a={events:{map:{enable:["zoomstart","drag","click","dblclick","mouseover"],logic:"emit"}},markers:{marker:{lat:56.126627523318206,lng:11.457741782069204}},center:{lat:56.126627523318206,lng:11.457741782069204,zoom:5},defaults:{zoomAnimation:!0,markerZoomAnimation:!0,fadeAnimation:!0},layers:{baselayers:{googleTerrain:{name:"Google Terrain",layerType:"TERRAIN",type:"google",visible:!0,layerOptions:{mapOptions:{styles:this.defaultGoogleStyles}}},googleHybrid:{name:"Google Hybrid",layerType:"HYBRID",type:"google",visible:!1,layerOptions:{mapOptions:{styles:this.defaultGoogleStyles}}}}}};return $.extend({},a)},defaultGoogleStyles:function(){return[{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]}]},dataTables_daDk:b}}]),angular.module("indeuApp").factory("Lookup",["$q","$timeout","ESPBA","Utils","Const",function(a,b,c,d,e){function f(a,b,c){c||(c="name");for(var d=0,e=a.length;d<e;d++)if(a[d].id==b)return a[d][c];return""}function g(a,b){if(!a||!a.length)return{};for(var c=0,d=a.length;c<d;c++)if(a[c].id==b)return a[c];return{}}var h=void 0,i=[{id:e.ACCESS_LEVEL_PUBLIC,name:"Offentlig"},{id:e.ACCESS_LEVEL_USER,name:"Alle brugere"},{id:e.ACCESS_LEVEL_CLOSED,name:"Lukket"}],j=[{id:1,name:"Offentlig"},{id:2,name:"Alle brugere"},{id:3,name:"Lukket"}],k=[{id:1,name:"Møde"},{id:2,name:"Foredrag"},{id:3,name:"Demonstration"},{id:4,name:"Generalforsamling"}],l=void 0,m=void 0;return{setPassData:function(a){h=a},getPassData:function(a){var b=h;return void 0!=a&&1!=a||(h=void 0),b},init:function(){var b=a.defer(),e=function(){l&&m&&b.resolve()};return c.get({user:["id","first_name","last_name","full_name","alias","created_timestamp","image","email","last_seen"]},{}).then(function(a){l=a.data.map(function(a){return a.urlName=d.urlName(a.full_name),a}),e()}),c.get("group",{}).then(function(a){m=a.data,e()}),b.promise},accessLevelName:function(a){return f(i,a)},visibilityLevelName:function(a){return f(j,a)},eventTypeName:function(a){return f(k,a)},accessLevels:function(){return i},visibilityLevels:function(){return j},eventTypes:function(){return k},user:function(){return l},group:function(){return m},getUser:function(a){return g(l,a)},getGroup:function(a){return g(m,a)},getGroupsByUser:function(b){var e=a.defer(),f=this;return c.get("group_user",{user_id:b}).then(function(a){var c=[];0==a.data.length&&e.resolve(c);for(var g=0,h=a.data.length;g<h;g++){var i=a.data[g],j=f.getGroup(i.group_id);j.is_owner=j.owner_id==b,j.urlName=d.urlName(j.name),j.urlTitle=d.plainText(j.about,200),c.push(j),g==a.data.length-1&&e.resolve(c)}}),e.promise}}}]),angular.module("Meta",[]).factory("Meta",["$route",function(a){function b(a,b,c){for(var d,e=document.getElementsByTagName("head")[0],f=document.getElementsByTagName(a),g=0,h=f.length;g<h;g++){if(d=f[g],!b&&!c)return d;if(d.hasAttribute(b)){if(!c)return d;if(d.getAttribute(b)==c)return d}}var i=document.createElement(a);return b&&i.setAttribute(b,c?c:""),e.insertBefore(i,e.firstChild),i}var c="",d="";return{setTitlePrefix:function(a){c=a},setTitleSuffix:function(a){d=a},setTitle:function(a){a=a.toString().substring(0,75),b("title").innerText=c+a+d},setDescription:function(a){a=a.toString().substring(0,165),b("meta","name","description").setAttribute("content",a)}}}]),angular.module("indeuApp").factory("TicketService",["$cookies",function(a){var b="indeuTicket";return{get:function(){var c=a.get(b);if(c)return c;$.get("http://services.kortforsyningen.dk/service?service=META&request=GetTicket&login=davidkonrad&password=nhmdzm",function(d){c=d;var e=new Date;return e.setDate(e.getDate()+1),a.put(b,c,{expires:e}),c})}}}]),angular.module("indeuApp").factory("KR",["$http",function(a){var b=null;return{init:function(){$.getJSON("assets/kommuner.json",function(a){b=a})},kommuneByNr:function(a){a=a?a.trim():"";for(var c=0,d=b.length;c<d;c++)if(b[c].nr.trim()==a)return b[c];return!1}}}]),angular.module("indeuApp").run(["KR",function(a){a.init()}]),angular.module("indeuApp").factory("PostNr",["$q","TicketService","KR",function(a,b,c){var d=null;return{init:function(){$.getJSON("assets/postnumre.json",function(a){d=a})},get:function(){return d},getRemoteInfo:function(d){var e=a.defer(),f="http://services.kortforsyningen.dk/?servicename=RestGeokeys_v2&method=postdistrikt&postnr="+d+"&ticket="+b.get();return $.getJSON(f,function(a){if(a.features&&a.features.length){var g=a.features[0].bbox;f="http://services.kortforsyningen.dk/?servicename=RestGeokeys_v2&method=nadresse&geop="+(g[0]+g[2])/2+","+(g[1]+g[3])/2+"&georef="+a.crs.properties.name+"&hits=1&ticket="+b.get(),$.getJSON(f,function(a){var b=c.kommuneByNr(a.features[0].properties.kommune_kode),f={postnr:d,kommune:a.features[0].properties.kommune_navn,region:b.region.navn.replace("Region ","")};e.resolve(f)})}}),e.promise},postnrToBy:function(a){},byToPostnr:function(a){}}}]),angular.module("indeuApp").run(["PostNr",function(a){a.init()}]),angular.module("indeuApp").factory("Redirect",["$location","$window","Login","Utils",function(a,b,c,d){var e=void 0;return{checkLogin:function(b){c.isLoggedIn()||(e=b,a.path("/"))},message:function(a){if(a){var b=e;return this.clear(),b}return e},clear:function(){e=void 0},home:function(b){e=b,a.path("/")},search:function(a){e=a;var c=d.isLocalHost()?"#/soeg":"/soeg";b.location.assign(c)}}}]),angular.module("indeuApp").factory("UserVisits",["$q","Login","ESPBA",function(a,b,c){var d=void 0;return{visit:function(a){if(d)this.visited(a)||this.save(a);else{var b=this;this.reload().then(function(){b.visit(a)})}},reload:function(){var e=a.defer();if(!b.isLoggedIn())return d=[],e.resolve(),e.promise;var e=a.defer(),f=b.currentUser().id;return c.get("user_visits",{user_id:f}).then(function(a){d=a.data,e.resolve()}),e.promise},visited:function(a){for(var b=0,c=d.length;b<c;b++)if(d[b].hash==a)return!0;return!1},save:function(a){if(b.isLoggedIn()){var d=b.currentUser().id,e=this;c.insert("user_visits",{hash:a,user_id:d}).then(function(a){e.reload()})}}}}]),angular.module("indeuApp").factory("VisitCounter",["$q","$timeout","Login","ESPBA",function(a,b,c,d){var e={};return{get:function(a){d.get("visit_counter",{hash:a}).then(function(a){if(a.data&&a.data.length){var a=a.data[0];console.log("get",a),e[a.hash]=a.counter}})},visit:function(a){var b=this;d.prepared("UpdateVisitCounter",{hash:a}).then(function(){b.get(a)})}}}]),angular.module("indeuApp").factory("Settings",["$cookies","$rootScope","$timeout","Login","ESPBA",function(a,b,c,d,e){var f={recentEventsShowVisited:!0,recentArticlesShowVisited:!0,recentReactionsShowAll:!1,searchWithinEvents:!0,searchWithinArticles:!0,searchWithinBulletins:!0,groupEditCollapse:[0,1]},g=void 0,h="indeu.settings",i=void 0,j=[];return{init:function(a){i=a,j.push(a),this.load()},getExpireDate:function(){var a=new Date;return a.setTime(a.getTime()+31536e6),a},save:function(){a.put(h,JSON.stringify(g),{expires:this.getExpireDate()})},load:function(){var c=a.get(h),d=this;try{c=JSON.parse(c)}catch(a){c=void 0}g=c&&"object"==typeof c?c:$.extend({},f),i.Settings=g,i.$watch("Settings",function(a,c){a.groupEditCollapse&&a.groupEditCollapse[0]==-1||(g=a,d.save(),j.forEach(function(a){a&&(a.Settings=g)}),b.$broadcast("settings.changed"))},!0),i.Settings.searchWithinEvents||i.Settings.searchWithinArticles||i.Settings.searchWithinBulletins||(i.Settings.searchWithinArticles=!0)}}}]),angular.module("indeuApp").factory("Form",["Utils","Login","ESPBA",function(a,b,c){return{isEdited:function(a){var b=document.querySelector(a);if(b){var c,d=b.querySelectorAll("input:not(.exclude-from-form)"),e=b.querySelectorAll("textarea:not(.exclude-from-form)"),f=b.querySelectorAll("button[bs-select]"),g=b.querySelectorAll("button.button-checkbox");for(c=0;c<d.length;c++)if(angular.element(d[c]).hasClass("ng-dirty"))return!0;for(c=0;c<f.length;c++)if(angular.element(f[c]).hasClass("ng-dirty"))return!0;for(c=0;c<e.length;c++)if(angular.element(e[c]).hasClass("ng-dirty"))return!0;for(c=0;c<g.length;c++)if(angular.element(g[c]).hasClass("ng-dirty"))return!0}return!1},reset:function(a){var b=document.querySelector(a);if(b){var c,d=b.querySelectorAll("input:not(.exclude-from-form)"),e=b.querySelectorAll("textarea:not(.exclude-from-form)"),f=b.querySelectorAll("button[bs-select]"),g=b.querySelectorAll("button.button-checkbox");for(c=0;c<d.length;c++)angular.element(d[c]).removeClass("ng-dirty"),angular.element(d[c]).removeClass("ng-touched"),angular.element(d[c]).addClass("ng-pristine");for(c=0;c<f.length;c++)angular.element(f[c]).removeClass("ng-dirty");for(c=0;c<e.length;c++)angular.element(e[c]).removeClass("ng-dirty"),angular.element(e[c]).removeClass("ng-touched"),angular.element(e[c]).addClass("ng-pristine");for(c=0;c<g.length;c++)angular.element(g[c]).removeClass("ng-dirty"),angular.element(e[c]).removeClass("ng-touched"),angular.element(e[c]).addClass("ng-pristine")}},formSetDirty:function(a){var b=document.querySelector(a);if(b){var c=0,d=b.querySelectorAll("input");for(c;c<d.length;c++)angular.element(d[c]).addClass("ng-dirty")}},elementType:function(a){return a.type?a.type.toString().toLowerCase():""},toObj:function(a){var b=document.querySelector(a),c={};if(b)for(var d,e,f,g,h=b.querySelectorAll("input, textarea"),i=0,j=h.length;i<j;i++)d=h[i],e=d.getAttribute("name"),f=d.getAttribute("bs-datepicker"),g="checkbox"==this.elementType(d),e&&(f?c[e]="qwerty":g?(console.log("e.value",d.value),c[e]="on"==d.value?1:0):c[e]=d.value);return c}}}]),angular.module("indeuApp").factory("Log",["ESPBA",function(a){return{USER_MEMBER_REQUEST:1,USER_MEMBER_ACCEPTED:2,USER_PROFILE_EDITED:3,USER_ENTITY_RATING:4,ARTICLE_CREATED:10,ARTICLE_EDITED:11,EVENT_CREATED:20,EVENT_EDITED:21,EVENT_FEEDBACK_1:23,EVENT_FEEDBACK_2:24,EVENT_FEEDBACK_REMOVE:25,EVENT_CONTACTPERSON_ADDED:26,EVENT_CONTACTPERSON_REMOVED:27,EVENT_GROUP_ADDED:28,EVENT_GROUP_REMOVED:29,GROUP_CREATED:30,GROUP_EDITED:31,GROUP_MEMBER_REQUEST:32,GROUP_MEMBER_DECLINED:34,GROUP_MEMBER_ADDED:33,GROUP_MEMBER_REMOVED:35,GROUP_MEMBER_EXCLUDED:36,COMMENT_ENTITY:40,COMMENT_COMMENT:41,COMMENT_OWN_COMMENT:42,ASSOCIATION_CREATED:50,ASSOCIATION_EDITED:51,ASSOCIATION_GROUP_ADDED:52,ASSOCIATION_GROUP_REMOVED:53,ASSOCIATION_MEMBER_ADDED:54,ASSOCIATION_MEMBER_REMOVED:55,ASSOCIATION_OWNER_CHANGED:56,ASSOCIATION_MEMBER_EXCLUDED:57,log:function(b){var c={type:b.type,user_id:b.user_id,context_user_id:b.context_user_id||null,hash:b.hash||null};a.insert("log",c).then(function(a){console.log("log",a)})}}}]),angular.module("indeuApp").factory("BrugerModal",["$modal","$q","ESPBA","Utils","Lookup","ImageUploadModal","DTOptionsBuilder","DTColumnBuilder","Const",function(a,b,c,d,e,f,g,h,i){var j=null,k=null;return{isShown:function(){return null!=k},show:function(l,m){return j=b.defer(),l.__brugerModal={btnOk:m?"Gem og luk":"Opret bruger og luk"},l.edit={},m?c.get("user",{id:m}).then(function(a){l.edit=a.data[0],l.__brugerModal.title="Rediger #"+l.edit.id+", "+l.edit.first_name+" "+l.edit.last_name}):l.__brugerModal.title="Opret bruger",l.__brugerModal.canSave=function(){return void 0!=l.edit.first_name&&void 0!=l.edit.last_name&&void 0!=l.edit.full_name&&void 0!=l.edit.email&&void 0!=l.edit.alias&&void 0!=l.edit.password&&void 0!=l.edit.address&&void 0!=l.edit.postal_code&&void 0!=l.edit.city},k=a({scope:l,templateUrl:"views/admin/admin.bruger.modal.html",backdrop:"static",show:!1,keyboard:!1}),k.$promise.then(function(){}),k.$promise.then(k.show).then(function(){}),l.__brugerModal.uploadImage=function(){f.show(l,"medlem").then(function(a){a&&(l.edit.image=a.filename)})},l.brugerModalClose=function(a){function b(){k.hide(),k.destroy(),k=null,j.resolve(a)}a?m?c.update("user",l.edit).then(function(a){console.log("UPDATE",a),b()}):c.insert("user",l.edit).then(function(a){b()}):b()},angular.element("body").on("keydown",function(a){27==a.charCode&&l.brugerModalClose(!1)}),l.dtColumns_grupper=[h.newColumn("id").withTitle("#").withClass("no-click").notSortable().renderWith(function(a,b,c,e){return"display"===b?'<a href="#/grupper/'+c.id+"/"+d.urlName(c.name)+'"><i class="fa fa-eye"></i></a>':a}),h.newColumn("name").withTitle("Navn"),h.newColumn("owner_id").withTitle("Ejer").withClass("text-center").renderWith(function(a,b,c,d){return"display"===b?a==m?'<i class="fa fa-check"></i>':"":a}),h.newColumn("created_timestamp").withTitle("Oprettet")],l.dtOptions_grupper=g.fromFnPromise(function(){return e.getGroupsByUser(m)}).withOption("drawCallback",function(){}).withOption("rowCallback",function(a,b){$(a).attr("user-id",b.id)}).withOption("dom","Blfrtip").withOption("stateSave",!0).withOption("language",i.dataTables_daDk).withButtons([{extend:"colvis",text:'Vis kolonner &nbsp;<i class="caret" style="position:relative;top:-3px;"></i>',className:"btn btn-default btn-xs colvis-btn"}]),j.promise}}}]),angular.module("indeuApp").factory("SelectBrugerModal",["$modal","$q","ESPBA","Lookup","Utils","Const","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions",function(a,b,c,d,e,f,g,h,i){var j=null,k=null;return{isShown:function(){return null!=k},show:function(d,e,l){return j=b.defer(),d.__modal={btnOk:"Gem og luk",title:e?"Vælg en eller flere brugere":"Vælg en bruger"},i.setLoadingTemplate('<img src="images/ajax-loader.3fd27945.gif">'),d.__modal.dtInstanceCallback=function(a){d.__modal.dtInstance=a},d.__modal.dtColumns=[h.newColumn("id").withTitle("#"),h.newColumn("first_name").withTitle("Fornavn"),h.newColumn("last_name").withTitle("Efternavn"),h.newColumn("alias").withTitle("Alias"),h.newColumn("email").withTitle("Email"),h.newColumn("created_timestamp").withTitle("Oprettet")],d.__modal.dtOptions=g.fromFnPromise(function(){var a=b.defer();return c.get("user",{}).then(function(b){var c=[];b.data.forEach(function(a){l?~l.indexOf(a.id)||c.push(a):c.push(a)}),d.data=c,a.resolve(d.data)}),a.promise}).withOption("drawCallback",function(){}).withOption("scrollY",280).withOption("paging",!1).withOption("rowCallback",function(a,b){$(a).attr("user-id",b.id)}).withSelect({style:e?"os":"single",selector:"tr"}).withOption("dom","ft").withOption("stateSave",!0).withOption("language",f.dataTables_daDk),d.__modal.canSave=function(){return!!d.__modal.dtInstance&&d.__modal.dtInstance.DataTable.rows({selected:!0})[0].length>0},$("body").on("click","#table-brugere tr",function(){d.$apply()}),$("body").on("dblclick","#table-brugere tr",function(a){d.__modal&&(d.__modal.dtInstance.DataTable.row(this).select(),a.stopPropagation(),d.__modalClose(!0))}),k=a({scope:d,templateUrl:"views/admin.select.bruger.modal.html",backdrop:"static",show:!1,keyboard:!1}),k.$promise.then(function(){}),k.$promise.then(k.show).then(function(){}),d.__modalClose=function(a){function b(){k.hide(),k.destroy(),k=null,delete d.__modal}if(a){var c=[];d.__modal.dtInstance.DataTable.rows({selected:!0}).every(function(a,b,d){c.push(this.data())}),b(),j.resolve(e?c:c[0])}else b(),j.resolve(!1)},angular.element("body").on("keydown",function(a){27==a.charCode&&d.__modalClose(!1)}),j.promise}}}]),angular.module("indeuApp").factory("SelectGruppeModal",["$modal","$q","ESPBA","Lookup","Utils","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions",function(a,b,c,d,e,f,g,h){var i=null,j=null;return{isShown:function(){return null!=j},show:function(d,k,l){return i=b.defer(),d.__modal={btnOk:"Gem og luk",title:k?"Vælg en eller flere grupper":"Vælg en gruppe"},h.setLoadingTemplate('<img src="images/ajax-loader.3fd27945.gif">'),d.__modal.dtInstanceCallback=function(a){d.__modal.dtInstance=a},d.__modal.dtColumns=[g.newColumn("id").withTitle("#"),g.newColumn("name").withTitle("Navn")],d.__modal.dtOptions=f.fromFnPromise(function(){var a=b.defer();return c.get("group",{}).then(function(b){d.data=l?b.data.filter(function(a){if(!~l.indexOf(a.id))return a}):b.data,a.resolve(d.data)}),a.promise}).withOption("drawCallback",function(){}).withOption("scrollY",280).withOption("paging",!1).withOption("rowCallback",function(a,b){$(a).attr("group-id",b.id)}).withSelect({style:k?"multi":"single",selector:"tr"}).withOption("dom","ft").withOption("stateSave",!0).withOption("language",e.dataTables_daDk),j=a({scope:d,templateUrl:"views/admin.select.gruppe.modal.html",backdrop:"static",show:!0,keyboard:!1}),d.__modal.canSave=function(){return!!d.__modal.dtInstance&&d.__modal.dtInstance.DataTable.rows({selected:!0})[0].length>0},$("body").on("click","#table-grupper tr",function(){d.$apply()}),$("body").on("dblclick","#table-grupper tr",function(a){d.__modal&&(d.__modal.dtInstance.DataTable.row(this).select(),a.stopPropagation(),d.__modalClose(!0))}),d.__modalClose=function(a){function b(){j&&(j.hide(),j.destroy(),j=null)}if(a){var c=[];d.__modal.dtInstance.DataTable.rows({selected:!0}).every(function(a,b,d){c.push(this.data())}),b(),i.resolve(c)}else b(),i.resolve(!1)},angular.element("body").on("keydown",function(a){27==a.charCode&&d.__modalClose(!1)}),i.promise}}}]),angular.module("indeuApp").factory("SelectArtikelModal",["$modal","$q","ESPBA","Lookup","Utils","Const","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions",function(a,b,c,d,e,f,g,h,i){var j=null,k=null;return{isShown:function(){return null!=k},show:function(e){return j=b.defer(),e.__modal={btnOk:"Vælg og luk",title:"Vælg en artikel"},i.setLoadingTemplate('<img src="images/ajax-loader.3fd27945.gif">'),e.__modal.dtInstanceCallback=function(a){e.__modal.dtInstance=a},e.__modal.dtColumns=[h.newColumn("created_timestamp").withTitle("Oprettet"),h.newColumn("user_id").withTitle("Forfatter").renderWith(function(a){return d.getUser(a).full_name}),h.newColumn("header").withClass("max400").withTitle("Overskrift")],e.__modal.dtOptions=g.fromFnPromise(function(){var a=b.defer();return c.get("article",{}).then(function(b){e.data=b.data,a.resolve(e.data)}),a.promise}).withOption("drawCallback",function(){}).withOption("scrollY",280).withOption("paging",!1).withOption("rowCallback",function(a,b){$(a).attr("article-id",b.id)}).withSelect({style:"single",selector:"tr"}).withOption("dom","ft").withOption("stateSave",!0).withOption("language",f.dataTables_daDk),k=a({scope:e,templateUrl:"views/admin.select.artikel.modal.html",backdrop:"static",show:!0,keyboard:!1}),$("body").on("click","#table-artikler tr",function(){e.$apply()}),e.__modal.canSave=function(){
return!!e.__modal.dtInstance&&e.__modal.dtInstance.DataTable.rows({selected:!0})[0].length>0},e.__modalClose=function(a){function b(){k.hide(),k.destroy(),k=null}if(a){var c=[];e.__modal.dtInstance.DataTable.rows({selected:!0}).every(function(a,b,d){c.push(this.data())}),b(),j.resolve(c)}else b(),j.resolve(!1)},angular.element("body").on("keydown",function(a){27==a.charCode&&e.__modalClose(!1)}),j.promise}}}]),angular.module("indeuApp").factory("GruppeModal",["$modal","$q","ESPBA","Lookup","Const","Utils","SelectBrugerModal","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions","ImageUploadModal","Login","Log",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=null,o=null;return{isShown:function(){return null!=o},show:function(j,p){return n=b.defer(),j.accessLevels=d.accessLevels(),j.visibilityLevels=d.visibilityLevels(),j.__gruppeModal={btnOk:p?"Gem og luk":"Opret gruppe og luk"},j.edit={},p?c.get("group",{id:p}).then(function(a){j.edit=a.data[0],j.edit.access_level=parseInt(j.edit.access_level),j.edit.visibility_level=parseInt(j.edit.visibility_level),j.__gruppeModal.title='Rediger <span class="text-muted">#'+j.edit.id+"</span>, <strong>"+j.edit.name+"</strong>",j.edit.owner_id?j.__gruppeModal.owner_btn_caption=d.getUser(j.edit.owner_id).full_name:j.__gruppeModal.owner_btn_caption="Vælg gruppeejer"}):(j.__gruppeModal.title="Opret gruppe",j.__gruppeModal.create=!0),j.__gruppeModal.canSave=function(){return void 0!=j.edit.name&&void 0!=j.edit.owner_id&&void 0!=j.edit.visibility_level&&void 0!=j.edit.access_level},j.__gruppeModal.selectOwner=function(){g.show(j,!1,j.edit.owner_id).then(function(a){a&&(j.edit.owner_id=a[0].id,j.__gruppeModal.owner_btn_caption=a[0].full_name)})},j.__gruppeModal.medlemmer={},j.__gruppeModal.medlemmer.dtOptions=h.fromFnPromise(function(){var a=b.defer();return c.get("group_user",{group_id:j.edit.id}).then(function(b){j.__gruppeModal.medlemmer.data=[],j.__gruppeModal.medlemmer.current_user_ids=[];for(var c=0,e=b.data.length;c<e;c++)j.__gruppeModal.medlemmer.data.push(d.getUser(b.data[c].user_id)),j.__gruppeModal.medlemmer.current_user_ids.push(b.data[c].user_id);a.resolve(j.__gruppeModal.medlemmer.data)}),a.promise}).withOption("drawCallback",function(){}).withOption("scrollY",200).withOption("paging",!1).withOption("rowCallback",function(a,b){$(a).attr("user-id",b.id)}).withOption("dom","ft").withOption("stateSave",!0).withOption("language",e.dataTables_daDk).withButtons([{text:'<span><i class="fa fa-plus text-success"></i>&nbsp;Tilføj medlem</span>',className:"btn btn-xs",action:function(){g.show(j,!1,j.__gruppeModal.medlemmer.current_user_ids).then(function(a){a&&c.insert("group_user",{group_id:p,user_id:a[0].id}).then(function(){j.__gruppeModal.medlemmer.dtInstance.reloadData()})})}}]),j.__gruppeModal.medlemmer.dtInstanceCallback=function(a){j.__gruppeModal.medlemmer.dtInstance=a},j.__gruppeModal.medlemmer.dtColumns=[i.newColumn("id").withTitle("#").renderWith(function(a,b,c){return"display"===b?'<i class="fa fa-remove text-danger remove-medlem" data-user-id="'+a+'" title="Fjern medlem"></i>':a}),i.newColumn("full_name").withTitle("Navn"),i.newColumn("alias").withTitle("Alias"),i.newColumn("email").withTitle("Email")],$("body").on("click",".remove-medlem",function(){confirm("Fjern medlem fra gruppe?")&&c.delete("group_user",{group_id:p,user_id:$(this).data("user-id")}).then(function(){j.__gruppeModal.medlemmer.dtInstance.reloadData()})}),o=a({scope:j,templateUrl:"views/admin.gruppe.modal.html",backdrop:"static",show:!1,keyboard:!1}),j.disableMedlemmerTab=function(){return!!j.__gruppeModal.create||j.edit.access_level!=e.ACCESS_LEVEL_CLOSED},o.$promise.then(function(){}),o.$promise.then(o.show).then(function(){}),j.__gruppeModal.uploadImage=function(){k.show(j,"gruppe").then(function(a){a&&(j.edit.image=a.filename)})},j.gruppeModalClose=function(a){function b(){o.hide(),o.destroy(),o=null,delete j.__gruppeModal,n.resolve(a)}a?p?c.update("group",j.edit).then(function(a){m.log({type:m.GROUP_EDITED,user_id:l.currentUser().id,hash:j.edit.hash}),b()}):(j.edit.hash=f.getHash(),c.insert("group",j.edit).then(function(a){m.log({type:m.GROUP_CREATED,user_id:l.currentUser().id,hash:a.data[0].hash}),b()})):b()},angular.element("body").on("keydown",function(a){27==a.charCode&&j.gruppeModalClose(!1)}),n.promise}}}]),angular.module("indeuApp").factory("EventModal",["$modal","$q","ESPBA","KR","Lookup","Utils","Const","SelectBrugerModal","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions",function(a,b,c,d,e,f,g,h,i,j,k){var l=null,m=null;return{isShown:function(){return null!=m},show:function(k,n){return l=b.defer(),k.eventTypes=e.eventTypes(),k.visibilityLevels=e.visibilityLevels(),k.__eventModal={btnOk:n?"Gem og luk":"Opret event og luk",user_btn_caption:"Vælg bruger"},k.edit={},n?c.get("event",{id:n}).then(function(a){k.edit=a.data[0],k.edit.visibility_level=parseInt(k.edit.visibility_level),k.edit.event_type_id=parseInt(k.edit.event_type_id),k.edit.from=f.createTime(k.edit.from),k.edit.to=f.createTime(k.edit.to),k.__eventModal.title='Rediger <span class="text-muted">#'+k.edit.id+"</span>, <strong>"+k.edit.name+"</strong>",k.edit.user_id&&(k.__eventModal.user_btn_caption=e.getUser(k.edit.user_id).full_name)}):(k.__eventModal.title="Opret event",k.__eventModal.create=!0),k.canSave=function(){return void 0!=k.edit.firstName&&void 0!=k.edit.lastName},k.__eventModal.selectUser=function(){h.show(k,!1,k.edit.user_id).then(function(a){a&&(k.edit.user_id=a[0].id,k.__eventModal.user_btn_caption=a[0].full_name)})},k.__eventModal.medlemmer={},k.__eventModal.medlemmer.dtOptions=i.fromFnPromise(function(){var a=b.defer();return c.get("group_user",{group_id:k.edit.id}).then(function(b){k.__eventModal.medlemmer.data=[];for(var c=0,d=b.data.length;c<d;c++)k.__eventModal.medlemmer.data.push(e.getUser(b.data[c].user_id));a.resolve(k.__eventModal.medlemmer.data)}),a.promise}).withOption("drawCallback",function(){}).withOption("scrollY",200).withOption("paging",!1).withOption("rowCallback",function(a,b){$(a).attr("user-id",b.id)}).withOption("dom","ft").withOption("stateSave",!0).withOption("language",g.dataTables_daDk).withButtons([{text:'<span><i class="fa fa-plus text-success"></i>&nbsp;Tilføj medlem</span>',className:"btn btn-xs",action:function(){h.show(k,!1).then(function(a){console.log(a),k.dtInstance.reloadData()})}}]),k.__eventModal.medlemmer.dtColumns=[j.newColumn("id").withTitle("#"),j.newColumn("first_name").withTitle("Fornavn"),j.newColumn("last_name").withTitle("Efternavn"),j.newColumn("alias").withTitle("Alias"),j.newColumn("email").withTitle("Email"),j.newColumn("created_timestamp").withTitle("Oprettet")],k.adresseClick=function(){var a=$("#adresse").data("item");a&&($("#adresse").val(a.streetName+" "),$("#adresse").trigger("keyup"))},k.adresseSelect=function(a){function b(a,b,c,d,e){var e=a;return e+=", "+b+" "+c}var c=a.municipalityCode?a.municipalityCode:a.municipalityCodes,e=d.kommuneByNr(c);$("#adresse").val(b(adresse,a.postCodeIdentifier,a.districtName,e?e.navn:"",e?e.region.navn:""))},m=a({scope:k,templateUrl:"views/admin.event.modal.html",backdrop:"static",show:!1,keyboard:!1}),m.$promise.then(function(){console.log("modal promise")}),m.$promise.then(m.show).then(function(){console.log("modal show")}),k.eventModalClose=function(a){function b(){m.hide(),m.destroy(),m=null,delete k.__eventModal,l.resolve(a)}a?user_id?c.update("event",k.edit).then(function(a){b()}):(k.edit.hash=f.getHash(),c.insert("event",k.edit).then(function(a){b()})):b()},angular.element("body").on("keydown",function(a){27==a.charCode&&k.gruppeModalClose(!1)}),l.promise}}}]),angular.module("indeuApp").factory("ForeningModal",["$modal","$q","ESPBA","Lookup","Utils","Login","Const","Log","SelectBrugerModal","SelectGruppeModal","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=null,o=null;return{isShown:function(){return null!=o},show:function(j,m){return n=b.defer(),j.accessLevels=d.accessLevels(),j.visibilityLevels=d.visibilityLevels(),j.__forModal={btnOk:m?"Gem og luk":"Opret forening og luk",group_btn_caption:"Vælg gruppe",owner_btn_caption:"Vælg ejer"},j.edit={},m?c.get("association",{id:m}).then(function(a){j.edit=a.data[0],j.edit.visibility_level=parseInt(j.edit.visibility_level),j.__forModal.title='Rediger <span class="text-muted">#'+j.edit.id+"</span>, <strong>"+j.edit.name+"</strong>",parseInt(j.edit.owner_id)?j.__forModal.owner_btn_caption=d.getUser(j.edit.owner_id).full_name:j.__forModal.owner_btn_caption="Sæt foreningens ejer (admin)"}):(j.__forModal.title="Opret ny forening",j.__forModal.create=!0),j.canSave=function(){return void 0!=j.edit.owner_id&&void 0!=j.edit.name&&void 0!=j.edit.visibility_level},j.__forModal.selectOwner=function(){i.show(j,!1,j.edit.author_id).then(function(a){a&&(j.edit.owner_id=a[0].id,j.__forModal.owner_btn_caption=a[0].full_name)})},j.__forModal.medlemmer={},j.__forModal.medlemmer.dtInstanceCallback=function(a){j.__forModal.medlemmer.dtInstance=a},j.__forModal.medlemmer.dtColumns=[l.newColumn("id").withTitle("").notSortable().withClass("no-click text-center").renderWith(function(a,b,c){return"display"===b?'<a href="'+e.userUrl(c.id,c.full_name)+'" target=_blank><i class="fa fa-eye"></i></a>':a}),l.newColumn("full_name").withTitle("Navn"),l.newColumn("email").withTitle("Email"),l.newColumn(null).notSortable().withClass("no-click text-center").renderWith(function(a,b,c){return'<i class="fa fa-remove text-danger btn-remove-member" association-user-id="'+c.id+'" user-id="'+c.user_id+'" title="Fjern bruger som medlem"></i>'})],j.__forModal.medlemmer.dtOptions=k.fromFnPromise(function(){var a=b.defer();return c.get("association_user",{association_id:m}).then(function(b){var c=[];b.data.forEach(function(a){c.push(a.user_id);var b=d.getUser(a.user_id);a.email=b.email,a.full_name=b.full_name}),j.__forModal.current_members=c,a.resolve(b.data)}),a.promise}).withOption("dom","Blfrtip").withOption("stateSave",!0).withOption("language",g.dataTables_daDk).withButtons([{text:'<span><i class="fa fa-plus text-success"></i>&nbsp;Medlem</span>',className:"btn btn-xs",action:function(){i.show(j,!1,j.__forModal.current_members).then(function(a){a&&(a.length&&(a=a[0]),c.insert("association_user",{association_id:m,user_id:a.id}).then(function(){h.log({type:h.ASSOCIATION_MEMBER_ADDED,user_id:f.currentUser().id,context_user_id:a.id,hash:j.edit.hash}),j.__forModal.medlemmer.dtInstance.reloadData()}))})}}]),$("body").on("click",".btn-remove-member",function(){var a=$(this).attr("association-user-id");if(a&&confirm("Er du sikker på du vil fjerne dette medlem?")){var b=$(this).attr("user-id");c.delete("association_user",{id:a}).then(function(){h.log({type:h.ASSOCIATION_MEMBER_REMOVED,user_id:f.currentUser().id,context_user_id:b,hash:j.edit.hash}),j.__forModal.medlemmer.dtInstance.reloadData()})}}),o=a({scope:j,templateUrl:"views/admin/admin.forening.modal.html",backdrop:"static",show:!1,keyboard:!1}),o.$promise.then(function(){console.log("modal promise")}),o.$promise.then(o.show).then(function(){console.log("modal show")}),j.__forModal.modalClose=function(a){function b(a){o.hide(),o.destroy(),o=null,delete j.__forModal,n.resolve(a)}a?m?c.update("association",j.edit).then(function(a){a=a.data[0],h.log({type:h.ASSOCIATION_EDITED,user_id:f.currentUser().id,hash:a.hash}),b(a)}):(j.edit.hash=e.getHash(),c.insert("association",j.edit).then(function(a){a=a.data[0],h.log({type:h.ASSOCIATION_CREATED,user_id:f.currentUser().id,hash:a.hash}),b(a)})):b(!1)},angular.element("body").on("keydown",function(a){27==a.charCode&&j.gruppeModalClose(!1)}),n.promise}}}]),angular.module("indeuApp").factory("ArtikelModal",["$modal","$q","ESPBA","Lookup","Utils","Login","SelectBrugerModal","SelectGruppeModal","DTOptionsBuilder","DTColumnBuilder","DTDefaultOptions",function(a,b,c,d,e,f,g,h,i,j,k){var l=null,m=null;return{isShown:function(){return null!=m},show:function(i,j){return l=b.defer(),i.accessLevels=d.accessLevels(),i.visibilityLevels=d.visibilityLevels(),i.__artikelModal={btnOk:j?"Gem og luk":"Opret artikel og luk",author_btn_caption:"Vælg forfatter",group_btn_caption:"Vælg gruppe"},i.edit={},j?c.get("article",{id:j}).then(function(a){i.edit=a.data[0],i.edit.visibility_level=parseInt(i.edit.visibility_level),i.__artikelModal.title='Rediger <span class="text-muted">#'+i.edit.id+"</span>, <strong>"+i.edit.header+"</strong>",parseInt(i.edit.author_id)?i.__artikelModal.author_btn_caption=d.getUser(i.edit.author_id).full_name:i.__artikelModal.author_btn_caption="Sæt artiklens bruger (forfatter)",i.edit.reviewed_user_id&&(i.__artikelModal.reviewerFullName=d.getUser(i.edit.reviewed_user_id).full_name),i.$watch("edit.accepted",function(a,b){a&&a!=b&&(i.edit.reviewed_user_id=f.currentUser().id,i.__artikelModal.reviewerFullName=f.currentUser().full_name)})}):(i.__artikelModal.title="Opret ny artikel",i.__artikelModal.create=!0),i.canSave=function(){return void 0!=i.edit.user_id&&void 0!=i.edit.header&&void 0!=i.edit.content},i.__artikelModal.selectAuthor=function(){g.show(i,!1,i.edit.author_id).then(function(a){a&&(i.edit.author_id=a[0].id,i.__artikelModal.author_btn_caption=a[0].full_name)})},i.__artikelModal.reloadGroups=function(){c.get("group_articles",{article_id:j}).then(function(a){a.data.forEach(function(a){a.name=d.getGroup(a.group_id).name}),i.__artikelModal.article_groups=a.data})},i.__artikelModal.reloadGroups(),i.__artikelModal.removeGroup=function(a){c.delete("group_articles",{id:a}).then(function(){i.__artikelModal.reloadGroups()})},i.__artikelModal.addGroup=function(){var a=i.__artikelModal.article_groups.map(function(a){return a.group_id});h.show(i,!1,a).then(function(a){a&&c.insert("group_articles",{article_id:j,group_id:a[0].id}).then(function(a){i.__artikelModal.reloadGroups()})})},m=a({scope:i,templateUrl:"views/admin/admin.artikel.modal.html",backdrop:"static",show:!1,keyboard:!1}),m.$promise.then(function(){console.log("modal promise")}),m.$promise.then(m.show).then(function(){console.log("modal show")}),i.artikelModalClose=function(a){function b(){m.hide(),m.destroy(),m=null,delete i.__artikelModal,l.resolve(a)}a?j?c.update("article",i.edit).then(function(a){b()}):(i.edit.hash=e.getHash(),c.insert("article",i.edit).then(function(a){b()})):b()},angular.element("body").on("keydown",function(a){27==a.charCode&&i.gruppeModalClose(!1)}),l.promise}}}]),angular.module("indeuApp").factory("ImageUploadModal",["$modal","$location","$compile","$http","$q","$timeout","Upload",function(a,b,c,d,e,f,g){var h,i=null,j=null;h="localhost"===b.host()?"http://localhost/html/indeu/app/api/":"https://opgavesnyd.dk/api/";var k={target:"",title:"Tilføj billede",btnOk:"Upload",btnCancel:"Fortryd",currentImage:null,noImageCaption:"<br><br>Intet billede valgt<br>Klik for at tilføje billede",selectedFile:null};return{delete:function(a){return i=e.defer(),d({url:h+"delete-image.php",method:"GET",params:{filename:a}}).then(function(a){i.resolve(a)}),i.promise},show:function(b,d){var l=$.extend({},k);return"object"==typeof d?$.extend(l,d):l.target=d,b.__upload=l,b.__upload.noImage=function(){var a=b.__upload;return!a.selectedFile&&(null==a.currentImage||""==a.currentImage||void 0==a.currentImage)},b.uploadFile=function(){b.__upload.selectedFile?g.upload({url:h+"upload-image.php",method:"POST",file:b.__upload.selectedFile,data:{targetPath:"../media/"+b.__upload.target+"/"}}).then(function(a){console.log(a),j.hide(),i.resolve(a.data)}):i.resolve(!1)},b.canUpload=function(){return b.__upload&&null!==b.__upload.selectedFile},b.triggerSelect=function(){angular.element("#selectBtn").click()},b.registerFile=function(a,d){$("#upload-image-modal").attr("ngf-src","__upload.selectedFile").attr("ngf-background","__upload.selectedFile"),c(angular.element(".upload-image-area").contents())(b),b.errFile=d&&d[0],b.__upload.selectedFile=a,f(function(){$(window).trigger("resize"),b.$apply()})},i=e.defer(),j=a({scope:b,templateUrl:"views/image.upload.modal.html",backdrop:"static",show:!0}),j.$promise.then(j.show).then(function(){c(angular.element("#upload-image-modal").contents())(b)}),b.modalClose=function(a){delete b.__upload,$("#upload-image-modal").removeAttr("ngf-src").removeAttr("ngf-background"),j.hide(),i.resolve(a)},i.promise}}}]),angular.module("indeuApp").run(["$templateCache",function(a){a.put("views/admin.artikler.html",'<h1>Artikler</h1> <div class="admin-menu"> <div ng-include="\'views/admin.menu.html\'"></div> </div> <div class="admin-content"> <!--\n\t<div class="col-md-2">\n\t\t<attach-image ng-model="test1" type="u" size="sm" title="Dette er en prøeve"></attach-image>\n\t</div>\n\t<div class="col-md-2">\n\t\t<attach-image ng-model="test" type="a" size="md"></attach-image>\n\t</div>\n\t<div class="col-md-1">\n\t</div>\n\t<div class="col-md-7">\n\t\t<attach-image ng-model="test" type="a" size="auto" height="200"></attach-image>\n\t</div>\n--> <table datatable="" id="table-artikler" class="table table-striped col-md-12 no-padding no-margin" dt-options="dtOptions" dt-columns="dtColumns" dt-instance="dtInstanceCallback"> </table> </div>'),a.put("views/admin.brugere.html",'<h1>Brugere</h1> <div class="admin-menu"> <div ng-include="\'views/admin.menu.html\'"></div> </div> <div class="admin-content"> <table datatable="" id="table-brugere" class="table table-striped col-md-12 no-padding no-margin" dt-options="dtOptions" dt-columns="dtColumns" dt-instance="dtInstanceCallback"> </table> </div>'),a.put("views/admin.event.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center col-md-12" tabindex="-1" role="dialog" style="display: block" id="event-dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title" ng-bind-html="__eventModal.title"></h4> </div> <div class="modal-body"> <div bs-tabs> <div bs-pane data-title="Generelt"> <br> <form role="form" class="form-horizontal" autocomplete="off"> <div class="form-group"> <label class="col-md-3 control-label required" for="user_id">Bruger</label> <div class="col-md-8"> <button class="btn btn-default btn-sm" id="user_id" ng-click="__eventModal.selectUser()" ng-model="edit.user_id"> {{ __eventModal.user_btn_caption }} </button> </div> </div> <div class="form-group"> <label class="col-md-3 control-label required" for="name">Navn</label> <div class="col-md-8"> <input class="form-control" type="text" id="name" select-on-click ng-model="edit.name" placeholder="Navn på event"> </div> </div> <div class="form-group"> <label class="col-md-3 control-label required" for="event_type_idf">Type</label> <div class="col-md-5"> <button type="button" class="btn btn-default" ng-model="edit.event_type_id" data-toggle="true" placeholder="Vælg" id="event_type_id" bs-select bs-options="et.id as et.name for et in eventTypes"> <span class="caret"></span> </button> </div> </div> <div class="form-group"> <label class="col-md-3 control-label required" for="date">Dato, tid</label> <div class="col-md-3"> <input type="text" class="form-control" ng-model="edit.date" placeholder="Dato" data-date-format="dd-MM-yyyy" data-autoclose="true" data-container="#event-dialog" bs-datepicker> </div> <div class="col-md-2"> <input type="text" class="form-control" ng-model="edit.from" placeholder="Fra" data-time-format="HH:mm" data-time-type="string" data-length="1" data-minute-step="1" data-arrow-behavior="picker" data-autoclose="true" data-container="#event-dialog" bs-timepicker> </div> <div class="col-md-2"> <input type="text" class="form-control" ng-model="edit.to" data-time-format="HH:mm" data-time-type="string" data-length="1" data-minute-step="1" data-arrow-behavior="picker" data-autoclose="true" data-container="#event-dialog" placeholder="Til" bs-timepicker> </div> </div> <div class="form-group"> <label class="col-md-3 control-label required" for="visibility_level">Synlighed</label> <div class="col-md-5"> <button type="button" class="btn btn-default" ng-model="edit.visibility_level" data-toggle="true" placeholder="Vælg" id="visibility_level" bs-select bs-options="vl.id as vl.name for vl in visibilityLevels"> <span class="caret"></span> </button> </div> </div> </form> </div> <div bs-pane data-title="Adresse"> <br> <form role="form" class="form-horizontal" autocomplete="off"> <div class="form-group"> <label class="col-md-3 control-label required" for="adresse">Adresse</label> <div class="col-md-8"> <input class="form-control" type="text" id="adresse" select-on-click ng-model="edit.address" ng-click="adresseClick()" adresse-opslag adresse-type="adresser" on-select="adresseSelect" placeholder="Vej, nr"> </div> </div> <div class="form-group"> <label class="col-md-3 control-label required" for="postnr">Postnr</label> <div class="col-md-2"> <input class="form-control" type="text" id="postnr" select-on-click ng-model="edit.postal_code" placeholder="Postnr"> </div> <label class="col-md-2 control-label required" for="by">By</label> <div class="col-md-4"> <input class="form-control" type="text" id="by" select-on-click ng-model="edit.city" placeholder="by"> </div> </div> </form> </div> <div bs-pane data-title="Beskrivelse"> <form role="form" class="form-horizontal" autocomplete="off"> <br> <div class="form-group" style="height:50px !important"> <div class="col-md-12"> <text-angular ng-model="edit.about" ta-text-editor-class="form-control col-md-12 gruppe-dialog" ta-toolbar="[[\'h2\',\'h3\'],[\'bold\',\'italics\',\'underline\'],[\'insertLink\'], [\'undo\', \'redo\', \'html\']]"> </text-angular> </div> </div> </form> </div> <div bs-pane data-title="Kontaktpersoner" data-disabled="__eventModal.create == true"> <table datatable="" id="table-gruppe-medlemmer" class="table table-striped col-md-12 no-padding no-margin" dt-options="__eventModal.medlemmer.dtOptions" dt-columns="__eventModal.medlemmer.dtColumns" dt-instance="__eventModal.medlemmer.dtInstanceCallback"> </table> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn" ng-click="eventModalClose(true)" ng-class="{ \'btn-success\' : canSave() }" ng-enabled="canSave()"> {{ __eventModal.btnOk }} </button> <button type="button" class="btn btn-default" ng-click="eventModalClose(false)"> Fortryd </button> </div> </div> </div> </div>'),a.put("views/admin.events.html",'<h1>Events</h1> <div class="admin-menu"> <div ng-include="\'views/admin.menu.html\'"></div> </div> <div class="admin-content"> <table datatable="" id="table-events" class="table table-striped col-md-12 no-padding no-margin" dt-options="dtOptions" dt-columns="dtColumns" dt-instance="dtInstanceCallback"> </table> </div>'),a.put("views/admin.foreninger.html",'<h1>Foreninger</h1> <div class="admin-menu"> <div ng-include="\'views/admin.menu.html\'"></div> </div> <div class="admin-content"> <table datatable="" id="table-foreninger" class="table table-striped col-md-12 no-padding no-margin" dt-options="dtOptions" dt-columns="dtColumns" dt-instance="dtInstanceCallback"> </table> </div>'),a.put("views/admin.forside.html",'<h1>Forside</h1> <div class="admin-menu"> <div ng-include="\'views/admin.menu.html\'"></div> </div> <div class="admin-content" style="width:auto"> <h3>Generelt</h3> <form role="form" class="form-horizontal"> <div class="form-group"> <label class="control-label col-md-2 no-wrap"> Cover artikel </label> <div class="col-md-8"> <button class="btn btn-sm btn-primary" ng-click="selectArtikel()"> <span ng-if="promoted_article"> {{ promoted_article.header }} </span> <span ng-if="!promoted_article">Vælg fremhævet forsideartikel</span> </button> </div> </div> </form> </div>'),a.put("views/admin.gruppe.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center col-md-12" tabindex="-1" role="dialog" style="display: block" id="gruppe-dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title" ng-bind-html="__gruppeModal.title"></h4> </div> <div class="modal-body"> <div bs-tabs> <div bs-pane data-title="Generelt"> <br> <form role="form" class="form-horizontal" autocomplete="off"> <div class="form-group"> <label class="col-md-3 control-label required" for="name">Navn</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="name" select-on-click ng-model="edit.name" placeholder="Navn på gruppe"> </div> </div> <div class="form-group no-bottom-margin"> <label class="col-md-3 control-label"></label> <div class="col-md-9"> <label class="checkbox-inline"> <input type="checkbox" id="accepted" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="edit.accepted"> Godkendt </label> <label class="checkbox-inline"> <input type="checkbox" id="active" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="edit.active"> Aktiv </label> </div> </div> <div class="form-group no-bottom-margin"> <label class="col-md-3 control-label"></label> <div class="col-md-9"> <label class="checkbox-inline"> <input type="checkbox" id="events_enabled" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="edit.events_enabled"> Tillad events </label> <label class="checkbox-inline"> <input type="checkbox" id="articles_enabled" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="edit.articles_enabled"> Tillad artikler </label> <label class="checkbox-inline"> <input type="checkbox" id="articles_enabled" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="edit.allow_comments"> Tillad kommentarer </label> </div> </div> <div class="form-group"> <label class="col-md-3 control-label"></label> <div class="col-md-9"> <label class="checkbox-inline"> <input type="checkbox" id="visible_members" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="edit.visible_members"> Medlemmer synlige </label> <label class="checkbox-inline"> <input type="checkbox" id="visible_social" ng-true-value="\'1\'" ng-false-value="\'0\'" ng-model="edit.visible_social"> Sociale medier synlige </label> </div> </div> <div class="form-group"> <label class="col-md-3 control-label required" for="owner_id">Gruppeejer</label> <div class="col-md-4"> <button class="btn btn-default btn-sm" id="owner_id" ng-click="__gruppeModal.selectOwner()" ng-model="edit.owner_id"> {{ __gruppeModal.owner_btn_caption }} </button> </div> </div> <div class="form-group"> <label class="col-md-3 control-label required" for="access_level">Niveau</label> <div class="col-md-5"> <button type="button" class="btn btn-default btn-sm" ng-model="edit.access_level" data-toggle="true" placeholder="Vælg" id="access_level" bs-select bs-options="al.id as al.name for al in accessLevels"> <span class="caret"></span> </button> </div> </div> <div class="form-group"> <label class="col-md-3 control-label required" for="visibility_level">Synlighed</label> <div class="col-md-5"> <button type="button" class="btn btn-default btn-sm" ng-model="edit.visibility_level" data-toggle="true" placeholder="Vælg" id="visibility_level" bs-select bs-options="vl.id as vl.name for vl in visibilityLevels"> <span class="caret"></span> </button> </div> </div> </form> </div> <div bs-pane data-title="Socialt"> <br> <form role="form" class="form-horizontal" autocomplete="off"> <div class="form-group"> <label class="col-md-3 control-label" for="email">Email</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="email" select-on-click ng-model="edit.email" placeholder="Email"> </div> </div> <div class="form-group"> <label class="col-md-3 control-label" for="homepage">Hjemmeside</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="homepage" select-on-click ng-model="edit.homepage" placeholder="Hjemmeside adresse"> </div> </div> <div class="form-group"> <label class="col-md-3 control-label" for="facebook">Facebook</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="facebook" select-on-click ng-model="edit.facebook" placeholder="Facebook url"> </div> </div> <div class="form-group"> <label class="col-md-3 control-label" for="twitter">Twitter</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="twitter" select-on-click ng-model="edit.twitter" placeholder="Twitter konto"> </div> </div> </form> </div> <div bs-pane data-title="Beskrivelse"> <form role="form" class="form-horizontal" autocomplete="off"> <br> <div class="form-group" style="height:50px !important"> <div class="col-md-12"> <text-angular ng-model="edit.about" ta-text-editor-class="form-control col-md-12 gruppe-dialog" ta-toolbar="[[\'h2\',\'h3\'],[\'bold\',\'italics\',\'underline\'],[\'insertLink\'], [\'undo\', \'redo\', \'html\']]"> </text-angular> </div> </div> </form> </div> <div bs-pane data-title="Logo" data-disabled="__gruppeModal.create == true"> <div class="gruppe-modal-image" ng-click="__gruppeModal.uploadImage()"> <i ng-if="edit.image == \'\' " class="fa fa-users medlem-default-image"></i> <img ng-if="edit.image != \'\' " ng-src="../media/gruppe/{{ edit.image }}"> </div> </div> <div bs-pane data-title="Medlemmer" ng-if="!disableMedlemmerTab()"> <table datatable="" id="table-gruppe-medlemmer" class="table table-striped col-md-12 no-padding no-margin" dt-options="__gruppeModal.medlemmer.dtOptions" dt-columns="__gruppeModal.medlemmer.dtColumns" dt-instance="__gruppeModal.medlemmer.dtInstanceCallback"> </table> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn" ng-click="gruppeModalClose(true)" ng-class="{ \'btn-success\' : __gruppeModal.canSave() }" ng-disabled="!__gruppeModal.canSave()"> {{ __gruppeModal.btnOk }} </button> <button type="button" class="btn btn-default" ng-click="gruppeModalClose(false)"> Fortryd </button> </div> </div> </div> </div>'),a.put("views/admin.grupper.html",'<h1>Grupper</h1> <div class="admin-menu"> <div ng-include="\'views/admin.menu.html\'"></div> </div> <div class="admin-content"> <table datatable="" id="table-grupper" class="table table-striped col-md-12 no-padding no-margin" dt-options="dtOptions" dt-columns="dtColumns" dt-instance="dtInstanceCallback"> </table> </div>'),a.put("views/admin.html",'<h1>Administration</h1> <div class="admin-menu"> <div ng-include="\'views/admin.menu.html\'"></div> </div>'),a.put("views/admin.menu.html",'<div ng-controller="AdminCtrl"> <a href="/admin-overblik" debug-link admin-is-selected>Overblik</a> <a href="/admin-forside" debug-link admin-is-selected>Forside</a> <a href="/admin-brugere" debug-link admin-is-selected>Brugere</a> <a href="/admin-foreninger" debug-link admin-is-selected>Foreninger</a> <a href="/admin-grupper" debug-link admin-is-selected>Grupper</a> <a href="/admin-events" debug-link admin-is-selected>Events</a> <a href="/admin-artikler" debug-link admin-is-selected>Artikler</a> <a href="/admin-kommentarer" debug-link admin-is-selected>Kommentarer</a> <a href="/admin-statisk" debug-link admin-is-selected>Statiske sider</a> </div>'),a.put("views/admin.overblik.html",'<h1>Administration</h1> <div class="admin-menu"> <div ng-include="\'views/admin.menu.html\'"></div> </div> <div class="admin-content"> <h3>brugere online</h3> <h3>seneste events</h3> <h3>seneste kommentarer</h3> <h3>etc ..</h3> </div>'),a.put("views/admin.select.artikel.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center large-dialog" tabindex="-1" role="dialog" style="display: block" id="select-artikel-dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title" ng-bind-html="__modal.title"></h4> </div> <div class="modal-body"> <table datatable="" id="table-artikler" class="table table-striped col-md-12 no-padding no-margin no-select" dt-options="__modal.dtOptions" dt-columns="__modal.dtColumns" dt-instance="__modal.dtInstanceCallback"> </table> </div> <div class="modal-footer"> <button type="button" class="btn" ng-click="__modalClose(true)" ng-class="{ \'btn-success\' : __modal.canSave() }" ng-disabled="!__modal.canSave()"> {{ __modal.btnOk }} </button> <button type="button" class="btn btn-default" ng-click="__modalClose(false)"> Fortryd </button> </div> </div> </div> </div>'),
a.put("views/admin.select.bruger.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center col-md-12" tabindex="-1" role="dialog" style="display: block" id="select-bruger-dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title" ng-bind-html="__modal.title"></h4> </div> <div class="modal-body no-padding-top"> <table datatable="" id="table-brugere" class="table table-striped col-md-12 no-padding no-margin no-select" dt-options="__modal.dtOptions" dt-columns="__modal.dtColumns" dt-instance="__modal.dtInstanceCallback"> </table> </div> <div class="modal-footer"> <button type="button" class="btn" ng-click="__modalClose(true)" ng-class="{ \'btn-success\' : __modal.canSave() }" ng-disabled="!__modal.canSave()"> {{ __modal.btnOk }} </button> <button type="button" class="btn btn-default" ng-click="__modalClose(false)"> Fortryd </button> </div> </div> </div> </div>'),a.put("views/admin.select.gruppe.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center col-md-12" tabindex="-1" role="dialog" style="display: block" id="select-gruppe-dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title" ng-bind-html="__modal.title"></h4> </div> <div class="modal-body no-padding-top"> <table datatable="" id="table-grupper" class="table table-striped col-md-12 no-padding no-margin" dt-options="__modal.dtOptions" dt-columns="__modal.dtColumns" dt-instance="__modal.dtInstanceCallback"> </table> </div> <div class="modal-footer"> <button type="button" class="btn" ng-click="__modalClose(true)" ng-class="{ \'btn-success\' : __modal.canSave() }" ng-disabled="!__modal.canSave()"> {{ __modal.btnOk }} </button> <button type="button" class="btn btn-default" ng-click="__modalClose(false)"> Fortryd </button> </div> </div> </div> </div>'),a.put("views/admin/admin.artikel.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center col-md-12" tabindex="-1" role="dialog" style="display: block" id="artikel-dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title" ng-bind-html="__artikelModal.title"></h4> </div> <div class="modal-body"> <div bs-tabs> <div bs-pane data-title="Generelt"> <br> <form role="form" class="form-horizontal" autocomplete="off"> <div class="form-group"> <label class="col-md-2 control-label" for="author_id">Bruger (forf.)</label> <div class="col-md-4"> <button class="btn btn-default btn-sm" id="author_id" ng-click="__artikelModal.selectAuthor()" ng-model="edit.author_id"> {{ __artikelModal.author_btn_caption }} </button> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="alternative_author">Alt. forfatter</label> <div class="col-md-4"> <input class="form-control input-sm" type="text" id="alternative_author" select-on-click ng-model="edit.alternative_author" placeholder="Alternativ forfatter"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="visibility_level">Synlighed</label> <div class="col-md-4"> <button type="button" class="btn btn-default btn-sm" ng-model="edit.visibility_level" data-toggle="true" placeholder="Vælg" id="visibility_level" bs-select bs-options="vl.id as vl.name for vl in visibilityLevels"> <span class="caret"></span> </button> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for=""></label> <div class="col-md-10 checkbox"> <label class="checkbox-inline"> <input type="checkbox" ng-model="edit.accepted" ng-false-value="\'0\'" ng-true-value="\'1\'">Godkendt </label> <label class="control-label checkbox-inline"> <input type="checkbox" ng-model="edit.published" ng-false-value="\'0\'" ng-true-value="\'1\'">Publiceret </label> <label class="control-label checkbox-inline"> <input type="checkbox" ng-model="edit.allow_comments" ng-false-value="\'0\'" ng-true-value="\'1\'">Kommentarer </label> <span class="pull-right" style="margin-right:100px"> Valideret af <strong>{{ __artikelModal.reviewerFullName }}&nbsp;</strong> </span> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="">Grupper</label> <div class="col-md-10"> <span ng-repeat="g in __artikelModal.article_groups"> <button class="btn btn-default btn-sm" type="button"> {{ g.name }} <i class="fa fa-remove text-danger" title="Fjern gruppe" ng-click="__artikelModal.removeGroup(g.id)"> </i> </button> </span> <button class="btn btn-default btn-xs" ng-disabled="!edit.id" ng-click="__artikelModal.addGroup()"> <i class="fa fa-plus text-success"></i>&nbsp;Tilføj gruppe </button> </div> </div> </form> </div> <div bs-pane data-title="Overskrift mm"> <br> <div class="col-md-6"> <form role="form" autocomplete="off"> <div class="form-group"> <label class="control-label" for="header">Overskrift</label> <input class="form-control input" type="text" id="header" select-on-click ng-model="edit.header" placeholder="overskrift"> </div> <div class="form-group"> <label class="control-label" for="sub_header">Manchet</label> <input class="form-control input" type="text" id="sub_header" select-on-click ng-model="edit.Sub_header" placeholder="Manchet"> </div> </form> </div> <div class="col-md-6"> <attach-image ng-model="edit.image" type="a" size="auto" height="200"></attach-image> </div> </div> <div bs-pane data-title="Tekst"> <form role="form" class="form-horizontal" autocomplete="off"> <br> <div class="form-group" style="height:50px !important"> <div class="col-md-12"> <text-angular ng-model="edit.content" ta-text-editor-class="form-control col-md-12 gruppe-dialog" ta-toolbar="[[\'h2\',\'h3\'],[\'bold\',\'italics\',\'underline\'],[\'insertLink\'], [\'undo\', \'redo\', \'html\']]"> </text-angular> </div> </div> </form> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn" ng-click="artikelModalClose(true)" ng-class="{ \'btn-success\' : canSave() }" ng-enabled="canSave()"> {{ __artikelModal.btnOk }} </button> <button type="button" class="btn btn-default" ng-click="artikelModalClose(false)"> Fortryd </button> </div> </div> </div> </div>'),a.put("views/admin/admin.bruger.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center col-md-12" tabindex="-1" role="dialog" style="display: block" id="bruger-dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title"> {{ __brugerModal.title }}</h4> </div> <div class="modal-body"> <div bs-tabs> <div bs-pane data-title="Generelt"> <br> <form role="form" class="form-horizontal" autocomplete="off"> <div class="form-group"> <label class="col-md-2 control-label required" for="first_name">Fornavn</label> <div class="col-md-4"> <input class="form-control" type="text" id="first_name" select-on-click ng-model="edit.first_name" placeholder="Fornavn"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="last_name">Efternavn</label> <div class="col-md-4"> <input class="form-control" type="text" id="last_name" select-on-click ng-model="edit.last_name" placeholder="Efternavn"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="full_name">Fulde navn</label> <div class="col-md-5"> <input class="form-control" type="text" id="full_name" select-on-click ng-model="edit.full_name" placeholder="Fulde navn"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="alias">Alias</label> <div class="col-md-5"> <input class="form-control" type="text" id="alias" select-on-click ng-model="edit.alias" placeholder="Alias, kaldenavn"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="email">Email</label> <div class="col-md-5"> <input class="form-control" type="text" id="email" select-on-click ng-model="edit.email" placeholder="Email"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="password">Password</label> <div class="col-md-5"> <input class="form-control" type="text" id="password" select-on-click ng-model="edit.password" placeholder="Password"> </div> </div> </form> </div> <!---- adresse ---> <div bs-pane data-title="Adresse"> <br> <form role="form" class="form-horizontal" autocomplete="off"> <div class="form-group"> <label class="col-md-2 control-label required" for="adresse">Adresse</label> <div class="col-md-5"> <input class="form-control" type="text" id="adresse" select-on-click ng-model="edit.address" placeholder="Adresse"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="postal_code">Postnr</label> <div class="col-md-2"> <input class="form-control" type="text" id="postal_code" select-on-click only-numbers ng-model="edit.postal_code" placeholder="Postnr"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="city">By</label> <div class="col-md-5"> <input class="form-control" type="text" id="city" select-on-click ng-model="edit.city" placeholder="By"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="phone">Telefon</label> <div class="col-md-3"> <input class="form-control" type="text" id="phone" select-on-click ng-model="edit.phone" placeholder="12345678"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="visible_address">Synlig adresse</label> <div class="col-md-3"> <input class="checkbox" type="checkbox" id="visible_address" select-on-click ng-model="edit.visible_adress"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="visible_phone">Synlig tlf.nr</label> <div class="col-md-3"> <input class="checkbox" type="checkbox" id="visible_phone" select-on-click ng-model="edit.visible_phone"> </div> </div> </form> </div> <!---- socialt ---> <div bs-pane data-title="Socialt"> <br> <form role="form" class="form-horizontal" autocomplete="off"> <div class="form-group"> <label class="col-md-2 control-label" for="homepage">Hjemmeside</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="homepage" select-on-click ng-model="edit.homepage" placeholder="Hjemmeside adresse"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="facebook">Facebook</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="facebook" select-on-click ng-model="edit.facebook" placeholder="Facebook url"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="twitter">Twitter</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="twitter" select-on-click ng-model="edit.twitter" placeholder="Twitter konto"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="linkedin">LinkedIn</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="linkedin" select-on-click ng-model="edit.linkedin" placeholder="LinkedIn konto"> </div> </div> </form> </div> <!---- bio ---> <div bs-pane data-title="Bio"> <form role="form" class="form-horizontal" autocomplete="off"> <br> <div class="form-group"> <div class="col-md-12"> <text-angular ng-model="edit.about" ta-text-editor-class="form-control col-md-12" ta-toolbar="[[\'h2\',\'h3\'],[\'bold\',\'italics\',\'underline\'],[\'insertLink\'], [\'undo\', \'redo\', \'html\']]"> </text-angular> </div> </div> </form> </div> <!---- billede ---> <div bs-pane data-title="Billede"> <div class="bruger-modal-image" ng-click="__brugerModal.uploadImage()"> <i ng-if="edit.image == \'\' " class="fa fa-user medlem-default-image"></i> <img ng-if="edit.image != \'\' " ng-src="../media/medlem/{{ edit.image }}"> </div> </div> <!---- grupper ---> <div bs-pane data-title="Grupper"> <table datatable="" id="table-bruger-grupper" class="table table-striped col-md-12 no-padding no-margin" dt-options="dtOptions_grupper" dt-columns="dtColumns_grupper" dt-instance="dtInstanceCallback"> </table> </div> <!---- handlinger ---> <div bs-pane data-title="Handlinger"> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn" ng-click="brugerModalClose(true)" ng-class="{ \'btn-success\' : __brugerModal.canSave() }" ng-disabled="!__brugerModal.canSave()"> {{ __brugerModal.btnOk }} </button> <button type="button" class="btn btn-default" ng-click="brugerModalClose(false)" ng-show="!alertParams.okOnly"> Fortryd </button> </div> </div> </div> </div>'),a.put("views/admin/admin.forening.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center medium-dialog" tabindex="-1" role="dialog" style="display: block" id="forening-dialog"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title" ng-bind-html="__forModal.title"></h4> </div> <div class="modal-body"> <div bs-tabs> <div bs-pane data-title="Generelt"> <br> <form role="form" class="form-horizontal" autocomplete="off"> <div class="form-group"> <label class="col-md-3 control-label required" for="name">Navn</label> <div class="col-md-9"> <input class="form-control input-sm" type="text" id="name" select-on-click ng-model="edit.name" placeholder="Navn"> </div> </div> <div class="form-group"> <label class="col-md-3 control-label required" for="owner_id">Ejer</label> <div class="col-md-5"> <button class="btn btn-default btn-sm" id="owner_id" ng-click="__forModal.selectOwner()" ng-model="edit.owner_id"> {{ __forModal.owner_btn_caption }} </button> </div> </div> <div class="form-group"> <label class="col-md-3 control-label required" for="visibility_level">Synlighed</label> <div class="col-md-4"> <button type="button" class="btn btn-default btn-sm" ng-model="edit.visibility_level" data-toggle="true" placeholder="Vælg" id="visibility_level" bs-select bs-options="vl.id as vl.name for vl in visibilityLevels"> <span class="caret"></span> </button> </div> </div> <div class="form-group"> <label class="col-md-3 control-label" for=""></label> <div class="col-md-10 checkbox"> <label class="checkbox-inline"> <input type="checkbox" ng-model="edit.active" ng-false-value="\'0\'" ng-true-value="\'1\'">Aktiv </label> <label class="control-label checkbox-inline"> <input type="checkbox" ng-model="edit.allow_comments" ng-false-value="\'0\'" ng-true-value="\'1\'">Kommentarer </label> </div> </div> </form> </div> <div bs-pane data-title="Tekst & logo"> </div> <div bs-pane data-title="Medlemmer" ng-if="edit.id != null"> <table datatable="" id="table-forening-medlemmer" class="table table-striped col-md-12 no-padding no-margin" dt-options="__forModal.medlemmer.dtOptions" dt-columns="__forModal.medlemmer.dtColumns" dt-instance="__forModal.medlemmer.dtInstanceCallback"> </table> </div> <div bs-pane data-title="Grupper" ng-if="edit.id != null"> <!--\n\t\t\t\t\t\t<table datatable="" \n\t\t\t\t\t\t\tid="table-forening-grupper"\n\t\t\t\t\t\t\tclass="table table-striped col-md-12 no-padding no-margin" \n\t\t\t\t\t\t\tdt-options="__forModal.grupper.dtOptions" \n\t\t\t\t\t\t\tdt-columns="__forModal.grupper.dtColumns"\n\t\t\t\t\t\t\tdt-instance="__forModal.grupper.dtInstanceCallback">\n\t\t\t\t\t\t</table>\n--> </div> </div> </div> <div class="modal-footer"> <button type="button" class="btn" ng-click="__forModal.modalClose(true)" ng-class="{ \'btn-success\' : canSave() }" ng-enabled="canSave()"> {{ __forModal.btnOk }} </button> <button type="button" class="btn btn-default" ng-click="__forModal.modalClose(false)"> Fortryd </button> </div> </div> </div> </div>'),a.put("views/article.forside.html",'<div class="col-md-9"> <div ng-if="action == \'\' "> <div class="artikel"> <h4> <small> <a href="{{ article.userUrlLink }}">{{ article.userFullName }}</a>, uploadet <span title="{{ article.realDate }}">{{ article.dateStamp }}</span> </small> </h4> <h1> {{ article.header }} </h1> <h4><em> {{ article.sub_header }} </em></h4> <div ng-if="article.image" class="artikel-image"> <img ng-src="media/artikel/{{ article.image }}"> </div> <div class="artikel-content" ng-bind-html="article.content"></div> <div class="col-md-12 clearfix"> <entity-rating hash="{{ article.hash }}" user-id="{{ user.id }}" class="pull-right"></entity-rating> </div> <comments hash="{{ article.hash }}" on-comment-added="onCommentAdded"></comments> </div> </div> <div ng-if="action == \'a\'"> <h3 class="no-padding no-margin">&nbsp;Rediger</h3> <div edit-article="{{ article.id }}" user-id="{{ user.id }}" on-save="actionSaved(item)" on-cancel="actionCancel()"> </div> </div> </div> <div class="col-md-3"> <div ng-if="user.id == article.user_id"> <div class="layout-right-header">Handlinger</div> <div class="layout-right-header-content"> <small ng-if="visitCounter != false " style="display: inline-block; position: relative; top: -9px" class="pull-right no-padding no-margin"> <small>Vist {{ visitCounter }} gange</small> </small> <a href="" ng-class="{ \'disabled\': actionDisable(\'e\') }" ng-disabled="actionDisable(\'a\')" ng-click="setAction(\'a\')"> <i class="fa fa-fw fa-wrench fa-x2"></i> Rediger artikel<br> </a> </div> </div> <div ng-if="article_groups.length"> <div class="layout-right-header">Grupper</div> <div class="layout-right-header-content"> <span ng-repeat="g in article_groups"> <a ng-href="/grupper/{{ g.group_id }}/{{ g.urlName }}" debug-link>{{ g.name }}</a><br> </span> </div> </div> <div class="layout-right-header">Kommentarer</div> <div class="layout-right-header-content" recent-comments="{{ article.hash }}" limit="5"></div> </div> '),a.put("views/bliv-medlem.html",'<div class="container-fluid"> <div class="col-md-9"> <h1>Bliv medlem</h1> <h3>Man skal ansøge om medlemsskab på indeu.org.</h3> <p>Godkendelse af nye medlemmer er 100% brugerstyret, og findes kun for at forhindre at brodne kar kan få adgang til følsomme data, såsom events i den lukkede kalender</p> <br> <ol> <li>Udfyld nedenstående ansøgnings-formular og klik "Send ansøgning"</li> <li>Du modtager kort efter en mail, klik på linket i mailen for at bekræfte din email-adresse</li> <li>Når du har fået tilstrækkelig mange bruger-stemmer modtager du en bekræftelses-mail</li> <li>Medlemsskab koster kr. 300 om året</li> </ol> <br> <form role="form" class="form-horizontal bliv-medlem" autocomplete="off"> <div class="form-group"> <label class="col-md-2 control-label required" for="navn">Fulde navn</label> <div class="col-md-9"> <input class="form-control" type="text" select-on-click ng-model="reg.fuldeNavn" placeholder="Fornavn og efternavn"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="email">Email</label> <div class="col-md-9"> <input class="form-control" select-on-click ng-model="reg.email" placeholder="Email-adresse"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="adresse">Adresse</label> <div class="col-md-9"> <input class="form-control" select-on-click ng-model="reg.adresse" placeholder="Adresse"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="postnr">Postnr</label> <div class="col-md-2"> <input class="form-control" select-on-click ng-model="reg.postnr" placeholder="Postnr"> </div> <label class="col-md-1 control-label required" for="by">By</label> <div class="col-md-6"> <input class="form-control" select-on-click ng-model="reg.by" placeholder="By"> </div> </div> <div class="form-group"> <div class="col-md-12"> <hr> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for=""></label> <div class="col-md-9"> <button role="button" class="btn btn-default" ng-class="{ \'btn-success\' : canRegister() }"> Send ansøgning </button> </div> </div> </form> </div> <div class="col-md-3"> lille kolonne #1 </div> </div> <div class="clearfix"> <br><br><br><br> </div>'),a.put("views/dig.forside.html",'<div class="col-md-9" id="main-cnt"> <h1>{{ user.first_name }} {{ user.last_name }} <small ng-if="action_caption" style="position:relative;top:-2px"><small>&mdash;</small> {{ action_caption }}</small> </h1> <!-- profile --> <div ng-if="action == \'\'"> <div class="medlem-image"> <i ng-if="user.image == \'\'" class="fa fa-user medlem-default-image"></i> <img ng-if="user.image != \'\'" ng-src="../media/medlem/{{ user.image }}" fancyboxable="{centerOnScroll:true,margin:20}"> </div> <div class="medlem-info"> <span ng-bind-html="user.about"></span> </div> <div class="layout-right-header"> Notifikationer </div> <div class="layout-right-header-content"> <log-notifications user-id="{{ user.id }}"></log-notifications> </div> <div class="clearfix"></div> <div class="col-md-9 no-padding" style="padding-right:15px !important"> <div class="layout-right-header">Næste 5 dage</div> <div ui-calendar="calConfig" class="calendar dig-calendar"></div> </div> <div class="col-md-3 no-padding"> <div class="layout-right-header">Kommende</div> <div class="layout-right-header-content"> <span ng-repeat="event in calConfig.futureEvents | orderBy:\'start\':false"> <a href="{{ event.urlLink }}" debug-link> <span class="medlem-event-date"> <strong> {{ event.start | date:"dd/MM" }} </strong> </span> <span class="px100"> {{ event.name }} </span> </a> </span> </div> </div> <div class="col-md-12 clearfix">&nbsp;</div> <div class="layout-right-header no-bottom-margin">Dine artikler</div> <div entity-articles="{{ user.id }}" entity-type="user" user-id="{{ user.id }}" on-edit="editArticle"></div> <div class="clearfix"> <br> </div> <div class="layout-right-header no-bottom-margin">Dine events</div> <div entity-events="{{ user.id }}" entity-type="user" user-id="{{ user.id }}" on-edit="editEvent"></div> <div class="clearfix"> <br><br><br> </div> </div> <!-- create gruppe ---> <div ng-if="action == \'g\'"> <div edit-gruppe="{{ edit_gruppe_id }}" user-id="{{ user.id }}" on-save="actionSaved(item)" on-cancel="actionCancel()"> </div> </div> <!-- edit event ---> <div ng-if="action == \'e\'"> <div edit-event="{{ edit_event_id }}" user-id="{{ user.id }}" on-save="actionSaved(item)" on-cancel="actionCancel()"> </div> </div> <!-- edit article --> <div ng-if="action == \'a\'"> <div edit-article="{{ edit_article_id }}" user-id="{{ user.id }}" on-save="actionSaved(item)" on-cancel="actionCancel()"> </div> </div> <!-- edit profile --> <div ng-if="action == \'p\'"> <div edit-profile="{{ user.id }}" on-save="actionProfileSaved(item)" on-cancel="actionCancel()"> </div> </div> </div> <div class="col-md-3"> <div class="layout-right-header">Handlinger</div> <div class="layout-right-header-content"> <a href="" ng-class="{ \'disabled\': actionDisable(\'p\') }" ng-disabled="actionDisable(\'p\')" ng-click="setAction(\'p\')"> <i class="fa fa-fw fa-wrench fa-x2"></i>Rediger profil<br> </a> <a href="" ng-class="{ \'disabled\': actionDisable(\'a\') }" ng-disabled="actionDisable(\'a\')" ng-click="setAction(\'a\')"> <i class="fa fa-fw fa-file-code-o fa-x2"></i>Skriv artikel <span ng-if="edit_article_id != undefined ">Rediger artikel</span> <br> </a> <!-- ---> <a href="" ng-if="edit_event_id == undefined " ng-class="{ \'disabled\': actionDisable(\'e\') }" ng-disabled="actionDisable(\'e\')" ng-click="setAction(\'e\')"> <i class="fa fa-fw fa-calendar fa-x2"></i>Opret ny event <span ng-if="edit_event_id != undefined ">Rediger event</span> <br> </a> <a href="" ng-if="edit_event_id != undefined " ng-class="{ \'disabled\': actionDisable(\'e\') }" ng-disabled="actionDisable(\'e\')" ng-click="setAction(\'e\')"> <i class="fa fa-fw fa-calendar fa-x2"></i>Rediger event<br> </a> <!-- ---> <!--\n\t\t<a href="" \n\t\t\tng-class="{ \'disabled\': actionDisable(\'g\') }"\n\t\t\tng-disabled="actionDisable(\'g\')" \n\t\t\tng-click="setAction(\'g\')">\n\t\t\t<i class="fa fa-fw fa-user-plus fa-x2"></i>Bliv medlem af gruppe<br>\n\t\t</a>\n--> <a href="" ng-class="{ \'disabled\': actionDisable(\'g\') }" ng-disabled="actionDisable(\'g\')" ng-click="setAction(\'g\')"> <i class="fa fa-fw fa-users fa-x2"></i>Opret ny gruppe<br> </a> <a href="" ng-class="{ \'disabled\': actionDisable(\'r\') }" ng-disabled="actionDisable(\'r\')" ng-click="setAction(\'r\')"> <i class="fa fa-fw fa-star-half-empty fa-x2"></i>Review nye brugere<br> </a> </div> <!--\n\t<div class="layout-right-header">\n\t\tNotifikationer\n\t</div>\n\t<div class="layout-right-header-content">\n\t\t{{ user.id }}\n\t\t<log-notifications user-id="{{ user.id }}"></log-notifications>\n\t</div>\n--> <div class="layout-right-header"> Reaktioner <span class="pull-right"> <small class="text-muted" style="font-weight: 100;line-height: 10px;position:relative; top:-2px">Seneste 7 dage</small> <input type="checkbox" ng-false-value="undefined" ng-true-value="true" ng-model="Settings.recentReactionsShowAll"> </span> </div> <div class="layout-right-header-content" user-reactions></div> <div class="layout-right-header"> Seneste events <span class="pull-right"> <small class="text-muted" style="font-weight: 100;line-height: 10px;position:relative; top:-2px">Kun ikke-sete</small> <input type="checkbox" ng-false-value="undefined" ng-true-value="true" ng-model="Settings.recentEventsShowVisited"> </span> </div> <div class="layout-right-header-content" recent-events></div> <div class="layout-right-header"> Nyeste artikler <span class="pull-right"> <small class="text-muted" style="font-weight: 100;line-height: 10px;position:relative; top:-2px">Kun ikke-sete</small> <input type="checkbox" ng-false-value="undefined" ng-true-value="true" ng-model="Settings.recentArticlesShowVisited"> </span> </div> <div class="layout-right-header-content" recent-articles></div> <div class="layout-right-header">Grupper</div> <div class="layout-right-header-content"> <div class="list-group"> <a ng-repeat="group in groups" href="#" class="list-group-item list-group-item-sm" ng-href="#/grupper/{{ group.id }}/{{ group.urlName }}"> {{ group.name }} <i ng-if="group.is_owner" class="fa fa-hand-paper-o dig-gruppe-owner-icon text-primary" title="{{ group.owner_title }}"> </i> </a> </div> </div> </div> '),a.put("views/event.forside.html",'<div class="col-md-9"> <div ng-if="action == \'\' "> <h4> <small> <a href="{{ event.userUrlLink }}">{{ event.userFullName }}</a>, uploadet <span title="{{ event.realDate }}">{{ event.dateStamp }}</span> </small> </h4> <h1> {{ event.name }} </h1> <div class="col-md-8"> <div class="well well-lg"> <h4 class="no-margin"> Hvornår: <strong class="text-primary">{{ event.date | date : "dd/MM/yyyy" }} </strong> kl. <strong class="text-primary">{{ event.from | date : "HH:mm" }}</strong> <span ng-if="event.to != null"> til kl. <strong class="text-primary">{{ event.to | date : "HH:mm" }} </strong> </span> </h4> <h4 class="no-margin" style="padding-top:15px"> Sted: <strong class="text-primary">{{ event.address }}</strong> </h4> </div> <div ng-bind-html="event.about"></div> <entity-rating hash="{{ event.hash }}" user-id="{{ user.id }}" class="pull-right"></entity-rating> </div> <div class="col-md-4 no-padding"> <leaflet class="event-leaflet-map" center="eventMap.center" defaults="eventMap.defaults" layers="eventMap.layers" markers="eventMap.markers" events="eventMap.events"> </leaflet> </div> <div class="col-md-12" ng-if="user"> <hr> <span>Hvad vil du?&nbsp;&nbsp;</span> <div class="btn-group" ng-model="feedback.feedback" bs-radio-group> <label class="btn btn-default btn-sm" ng-class="{ \'btn-danger\' : feedback.feedback == 0 }" ng-click="setFeedback(0)"> <input type="radio" class="btn btn-default" value="0"> Deltager ikke </label> <label class="btn btn-default btn-sm" ng-class="{ \'btn-primary\' : feedback.feedback == 1 }" ng-click="setFeedback(1)"> <input type="radio" class="btn btn-default" value="1"> Deltager måske </label> <label class="btn btn-default btn-sm" ng-class="{ \'btn-success\' : feedback.feedback == 2 }" ng-click="setFeedback(2)"> <input type="radio" class="btn btn-default" value="2"> Jeg deltager </label> </div> <hr> </div> </div> <div ng-if="action == \'e\'"> <h3 class="no-padding no-margin">&nbsp;Rediger</h3> <div edit-event="{{ event.id }}" user-id="{{ user.id }}" on-save="actionSaved(item)" on-cancel="actionCancel()"> </div> </div> <log-notifications hash="{{ event.hash }}"></log-notifications> <comments hash="{{ event.hash }}" user-id="{{ user.id }}"></comments> </div> <div class="col-md-3"> <div class="layout-right-header">Handlinger</div> <div class="layout-right-header-content"> <a ng-if="user.id == event.user_id" href="" ng-class="{ \'disabled\': actionDisable(\'e\') }" ng-disabled="actionDisable(\'e\')" ng-click="setAction(\'e\')"> <i class="fa fa-fw fa-wrench fa-x2"></i> Rediger event<br> </a> <a href="" ng-class="{ \'disabled\': actionDisable(\'e\') }" ng-disabled="actionDisable(\'n\')" ng-click="setAction(\'n\')"> <i class="fa fa-fw fa-calendar fa-x2"></i> Ny event </a> </div> <div ng-if="user.id != event.user_id"> <div class="layout-right-header">Oprettet af</div> <div class="layout-right-header-content"> <a ng-href="/medlemmer/{{ event_user.id }}/{{ event_user.urlName }}" debug-link>{{ event_user.full_name }}</a> </div> </div> <div class="layout-right-header">Kontakt</div> <div class="layout-right-header-content"> <span ng-repeat="cp in event_contactpersons"> <a ng-href="/medlemmer/{{ cp.user.id }}/{{ cp.user.urlName }}" debug-link>{{ cp.user.full_name }}</a><br> </span> </div> <div class="layout-right-header">Grupper</div> <div class="layout-right-header-content"> <span ng-repeat="g in event_groups"> <a ng-href="/grupper/{{ g.group_id }}/{{ g.urlName }}" debug-link>{{ g.name }}</a><br> </span> </div> <div class="layout-right-header">Deltagere</div> <div class="layout-right-header-content"> <div event-participants="{{ event.id }}"></div> </div> </div> <div class="col-md-12 clearfix"> <br><br> </div>'),a.put("views/footer.html",'<div class="clearfix"> <br><br><br> </div> <footer class="footer-bs"> <div class="row"> <div class="col-md-3 footer-brand animated fadeInLeft"> <h2>indeu.org</h2> <p> Indigenous Europe </p> <p> <i class="fa fa-copyright"></i>&nbsp;2017 indeu.org<br> </p> </div> <div class="col-md-4 footer-nav animated fadeInUp"> <h4>Kort</h4> Kort beskrivelse, reduceret formålsparagraf o.lign </div> <div class="col-md-3 footer-nav footer-social animated fadeInDown"> <h4>Info</h4> <ul> <li><i class="fa fa-envelope"></i>&nbsp;&nbsp;<a href="mailto:info@indeu.org">info@indeu.org</a></li> <li><small>CVR</small>&nbsp;&nbsp;12345678</li> </ul> </div> <div class="col-md-2 footer-nav animated fadeInUp"> <h4>Links</h4> <ul class="list"> <li><a href="/bliv-medlem" debug-link>Bliv medlem</a></li> <li><a href="/" debug-link>Om indeu.org</a></li> <li><a href="/" debug-link>Kontakt</a></li> </ul> </div> </div> </footer>'),a.put("views/frontpage.html",'<div class="col-md-6"> <div class="frontpage"> <h2>{{ article.header }}</h2> <div ng-if="article.sub_header" class="frontpage-manchet"> <h3 class="no-margin"><em>{{ article.sub_header }}</em></h3> </div> <div class="frontpage-image"> <img ng-if="article.image" ng-src="media/artikel/{{ article.image }}"> </div> <div class="frontpage-content" ng-bind-html="article.html"></div> </div> </div> <div class="col-md-3"> <div class="layout-right-header">Nye Artikler</div> <div class="layout-right-header-content" recent-articles></div> </div> <div class="col-md-3"> <div class="layout-right-header">Kommende 30 dage</div> <div class="layout-right-header-content" upcoming-events></div> </div>'),
a.put("views/gruppe.forside.html",'<div class="col-md-9"> <!-- info --> <div ng-if="action == \'\'"> <div class="medlem-image"> <i ng-if="group.image == \'\' " class="fa fa-users medlem-default-image"></i> <img ng-if="group.image != \'\' " ng-src="../media/gruppe/{{ group.image }}" fancyboxable="{centerOnScroll:true,margin:20}"> </div> <div class="medlem-info"> <h1>{{ group.name }} </h1> <button role="button" ng-if="!userIsMember && !userIsOwner" ng-click="followRequest()" title="Følg denne gruppe. Er gruppen lukket skal du godkendes først." class="btn btn-xs btn-primary pull-right"> <i class="fa fa-user-plus"></i> {{ btn_follow_caption }} </button> <span ng-bind-html="group.about"></span> </div> <div ng-if="group.events_enabled"> <div class="layout-right-header no-bottom-margin">Kommende events</div> <div entity-events="{{ group.id }}" entity-type="group" user-id="{{ user.id }}" on-edit="editEvent"></div> </div> <div ng-if="group.articles_enabled"> <div class="layout-right-header no-bottom-margin">Artikler</div> <div entity-articles="{{ group.id }}" entity-type="group" user-id="{{ user.id }}" on-edit="editArticle"></div> </div> <comments ng-if="group.allow_comments" hash="{{ group.hash }}" on-comment-added="onCommentAdded"></comments> </div> <!-- edit group --> <div ng-if="action == \'g\'"> <div edit-gruppe="{{ group.id }}" on-save="onEventSave()" on-cancel="onActionCancel()"> </div> </div> <!-- event --> <div ng-if="action == \'e\'"> <h1>{{ group.name }} </h1> <h3>Opret ny event</h3> <div edit-event="{{ edit_event_id }}" group-id="{{ group.id }}" user-id="{{ user.id }}" on-save="onEventSave()" on-cancel="onActionCancel()"> </div> </div> <!-- article --> <div ng-if="action == \'a\'"> <h3 class="no-padding no-margin">&nbsp;Skriv ny artikel</h3> <div edit-article="{{ edit_article_id }}" user-id="{{ user.id }}" group-id="{{ group.id }}" on-save="onArticleSave()" on-cancel="onActionCancel()"> </div> </div> <div class="clearfix"> <br><br><br><br><br> </div> </div> <div class="col-md-3"> <div> <div class="layout-right-header">Gruppestatus</div> <div class="layout-right-header-content"> {{ group.visibility_status }} {{ group.access_status }} </div> </div> <div ng-if="userIsOwner || userIsMember"> <div class="layout-right-header">Handlinger</div> <div class="layout-right-header-content"> <a ng-if="userIsOwner" ng-disabled="actionDisable(\'g\')" ng-click="setAction(\'g\')" href=""> <i class="fa fa-fw fa-wrench fa-x2"></i>Rediger gruppe<br> </a> <a ng-if="group.articles_enabled" ng-disabled="actionDisable(\'a\')" ng-click="setAction(\'a\')" href=""> <i class="fa fa-fw fa-file-code-o fa-x2"></i>Opret ny artikel<br> </a> <a ng-if="group.events_enabled" ng-disabled="actionDisable(\'e\')" ng-click="setAction(\'e\')" href=""> <i class="fa fa-fw fa-calendar fa-x2"></i>Opret ny event<br> </a> <a ng-if="userIsMember && !userIsOwner" href=""> <i class="fa fa-fw fa-remove fa-x2 text-danger"></i>Følg ikke længere<br> </a> </div> </div> <div ng-if="group.visible_social"> <div class="layout-right-header">Socialt</div> <div class="layout-right-header-content" social-links="{{ group }}"></div> </div> <div class="layout-right-header">Medlemmer</div> <div ng-repeat="user in group_users" class="layout-right-header-content"> <a ng-href="/medlemmer/{{ user.id }}/{{ user.urlName }}" debug-link style="float: left; clear: none; display: inline; margin-right: 10px">{{ user.full_name }}</a> </div> </div> <div class="col-md-12 clearfix"> <br><br><br> </div>'),a.put("views/image.upload.modal.html",'<div class="modal ng-scope top am-fade-and-slide-top center" tabindex="-1" role="dialog" style="display: block" id="modal-upload"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <h4 class="modal-title pull-left">{{ __upload.title }}</h4> <div ng-show="false" id="selectBtn" class="btn btn-primary btn-sm pull-right" ngf-select="registerFile($file, $invalidFiles)" ng-model="file" name="file" ngf-pattern="\'image/*\'" ngf-accept="\'image/*\'" ngf-max-size="10MB" ngf-min-height="100">Vælg billede fra computer </div> </div> <div class="modal-body text-center"> <form name="form" class="form-inline"> <div class="form-group"> <div class="form-control col-md-12 upload-image-area" ng-click="triggerSelect()"> <span class="upload-image-span" ng-if="__upload.noImage()" ng-bind-html="__upload.noImageCaption"> </span> <img id="upload-image-modal" class="upload-image-img cursor-pointer" ng-src="{{ __upload.currentImage }}"> </div> </div> </form> </div> <div class="modal-footer clearfix"> <button class="btn" ng-class="{ \'btn-success\': canUpload() }" ng-disabled="!canUpload()" ng-click="uploadFile()">{{ __upload.btnOk }} </button> <button type="button" class="btn btn-default" ng-click="modalClose(false)">{{ __upload.btnCancel }} </button> </div> </div> </div> </div>'),a.put("views/inc.entityArticles.html",'<div> <table class="table table-striped"> <tr ng-repeat="article in articles | orderBy: \'dateInt\':true "> <td class="h5"> &nbsp;&nbsp; <i ng-if="user_id == article.user_id" title="Rediger artikel" ng-click="onEdit(article.id)" class="fa fa-fw fa-wrench fa-x2 text-primary cursor-pointer"> </i> </td> <td> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{ article.created_timestamp | date:"dd MMM yyyy HH:mm" }} </td> <td class="max500"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a class="unstyled h4" ng-href="/artikel/{{ article.id }}/{{ article.urlName }}" debug-link style="overflow: hidden"> {{ article.header }} </a> </td> </tr> </table> </div>'),a.put("views/inc.entityEvents.html",'<div> <table class="table table-striped" id="entity-event-directive"> <tr ng-repeat="event in events | orderBy:\'dateInt\':true | filter:filterEvent "> <td class="h5"> &nbsp;&nbsp; <i ng-if="user_id == event.user_id" title="Rediger event" ng-click="onEdit(event.id)" class="fa fa-fw fa-wrench fa-x2 text-primary cursor-pointer"> </i> </td> <td> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{ event.date | date:"dd MMM yyyy" }}, <span ng-if="event.from != \'\' ">{{ event.from }}</span> <span ng-if="event.to != \'\' ">-{{ event.to }}</span> </td> <td> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a class="unstyled h4" ng-href="/event/{{ event.id }}/{{ event.urlName }}" debug-link style="overflow: hidden"> {{ event.name }} </a> </td> <td> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a class="unstyled h4" ng-href="/event/{{ event.id }}/{{ event.urlName }}" debug-link style="overflow: hidden"> {{ event.city }} </a> </td> </tr> <tr> <td colspan="4" style="background-color: #fff !important"> <small class="pull-right"> <a ng-if="allEvents" href="" ng-click="setEventFilter(false)"> Vis færre&nbsp;<i class="fa fa-level-up"></i> </a> <a ng-if="!allEvents" href="" ng-click="setEventFilter(true)"> Vis alle&nbsp;<i class="fa fa-level-down"></i> </a> </small> </td> </tr> </table> </div>'),a.put("views/inc.userGroups.html",'<div> <div ng-repeat="group in groups"> <a ng-href="/grupper/{{ group.id }}/{{ group.urlName }}" class="unstyled" title="{{ group.urlTitle }}" debug-link> <span class="medlem-gruppe"> <span class="medlem-gruppe-logo"> <i ng-if="group.image == \'\'" class="fa fa-users"></i> <img ng-if="group.image != \'\'" class="img-circle" ng-src="media/gruppe/{{ group.image }}" auto-zoom="h,40"> </span> {{ group.name }} <i ng-if="group.is_owner" class="fa fa-hand-paper-o medlem-gruppe-owner-icon text-primary" title="{{ group.owner_title }}"> </i> </span> </a> </div> </div>'),a.put("views/inc/attachImage.directive.html",'<div class="attach-image cursor-pointer" ng-class="getSizeClass()" ng-click="loadImage()"> <span ng-if="image == \'\'" ng-bind-html="defaultImage" title="Klik for at skifte billede"></span> <span class="attach-image-center"> <img ng-if="image != \'\'" ng-src="{{ image }}" title="Klik for at skifte billede"> </span> </div>'),a.put("views/inc/editGruppe.directive.html",'<div> <form class="form-horizontal"> <div class="form-group"> <label class="col-md-1 control-label" for=""></label> <label class="radio-inline"> <input type="radio" name="visibility_level" ng-model="edit.visibility_level" ng-value="1"> Offentlig </label> <label class="radio-inline"> <input type="radio" name="visibility_level" ng-model="edit.visibility_level" ng-value="2"> Kun brugere </label> <label class="radio-inline"> <input type="radio" name="edit.visibility_level" ng-model="edit.visibility_level" ng-value="3"> Kun gruppe </label> <div class="pull-right action-element"> <button class="btn btn-default btn-sm" type="button" ng-class="{ \'btn-success\' : canSave() }" ng-disabled="!canSave()" ng-click="doSaveClose()"> {{ save_btn_caption }} </button> <button class="btn btn-danger btn-sm" type="button" ng-click="doCancel()">Fortryd </button> </div> </div> <table class="col-md-12"> <tr> <td class="col-md-8"> <div class="form-group"> <label class="col-md-1 control-label required" for="name">Navn</label> <div class="col-md-11"> <input class="form-control" type="text" id="name" select-on-click ng-model="edit.name" placeholder="Navn på gruppe"> </div> </div> <div class="form-group"> <div class="col-md-12"> <text-angular ng-model="edit.about" ta-text-editor-class="form-control ta-editor-md" ta-toolbar="[[\'h2\',\'h3\'],[\'bold\',\'italics\',\'underline\',\'strikeThrough\'],[\'insertLink\'], [\'html\']]"> </text-angular> </div> </div> </td> <td class="col-md-4"> <attach-image ng-model="edit.image" type="g"></attach-image> </td> </tr> </table> </form> <!-- collapsible --> <div class="panel-group" ng-model="Settings.groupEditCollapse" role="tablist" aria-multiselectable="true" bs-collapse bs-collapse-icons data-start-collapsed="true" data-allow-multiple="true"> <!-- indstillinger --> <div class="panel panel-default"> <div class="panel-heading" role="tab"> <h4 class="panel-title"> <a bs-collapse-toggle> Indstillinger </a> </h4> </div> <div class="panel-collapse" role="tabpanel" bs-collapse-target> <div class="panel-body"> <div class="col-md-1"></div> <form id="settings" role="form" class="form-horizontal" autocomplete="off"> <div class="col-md-12 no-padding no-margin"> <button class="btn btn-xs btn-default pull-right" ng-click="formSave(\'#settings\')" ng-class="{ \'btn-primary\' : formSaveEnabled(\'#settings\') }" ng-disabled="!formSaveEnabled(\'#settings\')"> Gem </button> </div> <div class="form-group"> <label class="col-md-2 control-label" for="owner">Gruppeejer</label> <div class="col-md-10"> <button class="btn btn-default btn-sm" id="owner_id" ng-click="selectOwner()" ng-model="edit.owner_id"> {{ owner_btn_caption }} </button> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for=""></label> <div class="col-md-4"> <div class="checkbox"> <label class="control-label"> <input type="checkbox" ng-false-value="\'0\'" ng-true-value="\'1\'" name="events_enabled" ng-model="edit.events_enabled">Tillad events </label> </div> <div class="checkbox"> <label class="control-label"> <input type="checkbox" ng-false-value="\'0\'" ng-true-value="\'1\'" name="articles_enabled" ng-model="edit.articles_enabled">Tillad artikler </label> </div> <div class="checkbox"> <label class="control-label"> <input type="checkbox" ng-false-value="\'0\'" ng-true-value="\'1\'" name="allow_comments" ng-model="edit.allow_comments">Kommentarer slået til </label> </div> </div> <div class="col-md-5"> <div class="checkbox"> <label class="control-label"> <input type="checkbox" ng-false-value="\'0\'" ng-true-value="\'1\'" name="visible_members" ng-model="edit.visible_members">Medlemmer offentlige </label> </div> <div class="checkbox"> <label class="control-label"> <input type="checkbox" ng-false-value="\'0\'" ng-true-value="\'1\'" name="visible_members" ng-model="edit.visible_members">Kontakt offentlige </label> </div> </div> </div> </form> </div> </div> </div> <!-- sociale links --> <div class="panel panel-default"> <div class="panel-heading" role="tab"> <h4 class="panel-title"> <a bs-collapse-toggle> <i class="fa fa-plus text-muted"></i> Socialt </a> </h4> </div> <div class="panel-collapse" role="tabpanel" bs-collapse-target> <div class="panel-body"> <form id="social" role="form" class="form-horizontal" autocomplete="off"> <div class="col-md-12 no-padding no-margin"> <button class="btn btn-xs btn-default pull-right" ng-click="formSave(\'#social\')" ng-class="{ \'btn-primary\' : formSaveEnabled(\'#social\') }" ng-disabled="!formSaveEnabled(\'#social\')"> Gem </button> </div> <div class="form-group"> <label class="col-md-2 control-label" for="homepage">Hjemmeside</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="homepage" select-on-click ng-model="edit.homepage" placeholder="Hjemmeside adresse"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="facebook">Facebook</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="facebook" select-on-click ng-model="edit.facebook" placeholder="Facebook url"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="twitter">Twitter</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="twitter" select-on-click ng-model="edit.twitter" placeholder="Twitter konto"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="linkedin">LinkedIn</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="linkedin" select-on-click ng-model="edit.linkedin" placeholder="LinkedIn konto"> </div> </div> </form> </div> </div> </div> <!-- group members --> <div class="panel panel-default"> <div class="panel-heading" role="tab"> <h4 class="panel-title"> <a bs-collapse-toggle> Medlemmer </a> </h4> </div> <div class="panel-collapse" role="tabpanel" bs-collapse-target> <div class="panel-body"> <table datatable="" ng-enabled="edit.id > -1" id="table-gruppe-medlemmer" class="table table-striped col-md-12 no-padding no-margin" dt-options="dtOptions" dt-columns="dtColumns" dt-instance="dtInstanceCallback"> </table> </div> </div> </div> </div> </div>'),a.put("views/inc/inc.comments.html",'<div class="col-md-12 no-padding no-margin"> <div class="clearfix"> <br><br><br> </div> <span class="h4"> {{ commentsHeader }} <span ng-if="user == undefined" class="h5 pull-right no-padding no-margin text-muted" style="position:relative; top:4px"> Du skal være logget ind for at se kommentarer </span> </span> <hr style="margin-top: 1px"> <div ng-if="user != undefined"> <div class="comment-box col-md-12 no-padding no-margin"> <span class="comment-user-image col-md-2 no-padding no-margin"> <i ng-if="user.image == null " class="fa fa-user default-image"></i> <img ng-if="user.image != null " ng-src="../media/medlem/{{ user.image }}"> </span> <span class="comment-comment col-md-10"> <textarea class="form-control" ng-disabled="actionAnswer != \'\' " id="comment-content" ng-keyup="textAreaAdjust(\'comment-content\')" rows="3" ng-model="comment.content">\n\t\t\t\t</textarea> <span class="comment-action pull-right"> <button class="btn btn-xs btn-default" ng-disabled="actionAnswer != \'\' " ng-click="actionCancel()"> Fortryd </button> <button class="btn btn-xs" ng-click="actionSave()" ng-disabled="actionAnswer != \'\' " ng-class="{ \'btn-primary\' : canSave(\'content\') }" ng-disabled="!canSave(\'content\')"> <strong>Gem</strong> </button> </span> </span> </div> <div class="comments"> <div ng-repeat="_c in comments"> <div class="comment" ng-class="indentClass(_c.id)" id="comment{{ _c.id }}"> <span class="user-image"> <i ng-if="_c.user.image == null " class="fa fa-user default-image"></i> <img ng-if="_c.user.image != null " ng-src="../media/medlem/{{ _c.user.image }}"> </span> <span class="content"> <span class="user-info"> <span ng-if="_c.parent_user"> <strong> {{ _c.user.full_name }} </strong> &nbsp;<i class="fa fa-share"></i>&nbsp; <strong> {{ _c.parent_user.full_name }}, </strong> </span> <span ng-if="!_c.parent_user"> <strong> {{ _c.user.full_name }}, </strong> </span> {{ _c.dateStamp }} </span> <pre smilies="_c.content">{{ _c.content }}</pre> <span class="clearfix"></span> <a class="answer-comment" href="" ng-click="setActionAnswer(_c.id)"> Svar </a> <span class="comment-answer-box indent1" ng-if="actionAnswer == _c.id"> <textarea class="form-control" id="answer-comment-content{{_c.id}}" ng-keyup="textAreaAdjust(\'answer-comment-content\'+_c.id)" rows="3" ng-model="comment.contentAnswer">\n\t\t\t\t\t\t\t</textarea> <span class="answer-comment-action pull-right"> <button class="btn btn-xs btn-default" ng-click="actionCancel()"> Fortryd </button> <button class="btn btn-xs" ng-click="actionSave()" ng-class="{ \'btn-primary\' : canSave(\'contentAnswer\') }" ng-disabled="!canSave(\'contentAnswer\')"> <strong>Gem</strong> </button> </span> </span> </span> </div> </div> </div> </div> </div>'),a.put("views/inc/inc.editArticle.html",'<div> <form class="form-horizontal"> <div class="form-group"> <label class="col-md-1 control-label" for=""></label> <label class="radio-inline"> <input type="radio" name="visibility_level" ng-model="article.visibility_level" ng-value="1"> Offentlig </label> <label class="radio-inline"> <input type="radio" name="visibility_level" ng-model="article.visibility_level" ng-value="2"> Kun medlemmer </label> <label ng-if="group_id" class="radio-inline"> <input type="radio" name="article.visibility_level" ng-model="article.visibility_level" ng-value="3"> Kun gruppe </label> <div class="pull-right action-element"> <button class="btn btn-default btn-sm" ng-class="{ \'btn-success\' : articleAction.canSave() }" ng-disabled="!articleAction.canSave()" ng-click="articleAction.save()"> {{ articleAction.caption }} </button> <button class="btn btn-danger btn-sm" ng-click="articleAction.cancel()"> Fortryd </button> </div> </div> <table class="col-md-12"> <tr> <td class="col-md-8"> <div class="form-group"> <label class="col-md-3 control-label required" for="header">Overskrift</label> <div class="col-md-9"> <input class="form-control input-sm" type="text" id="header" select-on-click ng-model="article.header" placeholder="Overskrift"> </div> </div> <div class="form-group"> <label class="col-md-3 control-label" for="sub_header">Manchet</label> <div class="col-md-9"> <textarea class="form-control input-sm" select-on-click rows="3" ng-model="article.sub_header" placeholder="Manchet">\n\t\t\t\t\t\t\t\t</textarea> </div> </div> </td> <td class="col-md-4"> <div class="article-image" ng-click="articleUploadImage()"> <i ng-if="article.image == \'\'" class="fa fa-image article-default-image"></i> <img ng-if="article.image != \'\'" ng-src="../media/artikel/{{ article.image }}" xxfancyboxable="{centerOnScroll:true,margin:20}"> </div> </td> </tr> <!-- groups --> <tr> <td colspan="2"> <div class="form-group"> <div class="col-md-12"> <span ng-repeat="g in article_groups"> <button class="btn btn-default btn-xs" type="button"> {{ g.name }} <i class="fa fa-remove text-danger" title="Fjern gruppe" ng-click="articleAction.removeGroup(g.id)"> </i> </button> </span> <button class="btn btn-primary btn-xs" type="button" ng-click="articleAction.addGroup()"> <i class="fa fa-plus"></i> Gruppe  </button></div> </div> </td> </tr> </table> <div class="form-group"> <div class="col-md-12"> <text-angular ng-model="article.content" ta-text-editor-class="form-control col-md-12" ta-toolbar="[[\'h2\',\'h3\'],[\'bold\',\'italics\',\'underline\',\'strikeThrough\'],[\'insertLink\'], [\'quote\'], [\'ol\', \'ul\'], [\'undo\', \'redo\', \'clear\', \'html\']]"> </text-angular> </div> </div> <br><br><br> </form> </div>'),a.put("views/inc/inc.editEvent.html",'<div> <form class="form-horizontal"> <div class="form-group"> <label class="col-md-1 control-label" for=""></label> <label class="radio-inline"> <input type="radio" name="event.visibility_level" ng-model="event.visibility_level" ng-value="1"> Offentlig </label> <label class="radio-inline"> <input type="radio" name="event.visibility_level" ng-model="event.visibility_level" ng-value="2"> Kun brugere </label> <label ng-if="group_id" class="radio-inline"> <input type="radio" name="event.visibility_level" ng-model="event.visibility_level" ng-value="3"> Kun gruppe </label> <div class="pull-right action-element"> <button class="btn btn-default btn-sm" type="button" ng-class="{ \'btn-success\' : eventAction.canSave() }" ng-disabled="!eventAction.canSave()" ng-click="eventAction.save()"> {{ eventAction.caption }} </button> <button class="btn btn-danger btn-sm" type="button" ng-click="eventAction.cancel()"> Fortryd </button> </div> </div> <table class="col-md-12"> <tr> <td class="col-md-7"> <div class="form-group"> <label class="col-md-3 control-label required" for="">Hvad</label> <div class="col-md-9"> <input class="form-control" ng-model="event.name"> </div> </div> <div class="form-group"> <label class="col-md-3 control-label required" for="">Hvornår</label> <div class="col-md-9"> <div class="input-group registration-date-time"> <span class="input-group-addon" id="basic-addon1"> <span class="fa fa-calendar" aria-hidden="true"></span> </span> <input class="form-control event-date" bs-datepicker data-container="body" data-placement="bottom" data-autoclose="true" ng-model="event.date"> <span class="input-group-addon" id="basic-addon1"> <span class="fa fa-clock-o" aria-hidden="true"></span> </span> <input class="form-control event-from" bs-timepicker data-container="body" data-placement="bottom" data-time-format="HH:mm" data-time-type="string" data-length="1" data-minute-step="15" data-arrow-behavior="picker" data-autoclose="true" ng-model="event.from"> <input class="form-control event-to" bs-timepicker data-container="body" data-placement="bottom" data-time-format="HH:mm" data-time-type="string" data-length="1" data-minute-step="15" data-arrow-behavior="picker" data-autoclose="true" ng-model="event.to"> </div> </div> </div> <div class="form-group"> <label class="col-md-3 control-label required" for="">Sted</label> <div class="col-md-9"> <input class="form-control" select-on-click adresse-opslag adresse-type="adresser" adresse-on-select="eventAdresseSelect" ng-model="event.address"> </div> </div> <div class="form-group"> <label class="col-md-3 control-label" for=""></label> <div class="col-md-9"> <div class="input-group"> <input class="form-control event-postalcode" ng-model="event.postal_code"> <input class="form-control event-city" ng-model="event.city"> </div> </div> </div> </td> <td class="col-md-5 no-padding no-margin"> <leaflet class="event-leaflet-map" id="eventMapId" center="eventMap.center" defaults="eventMap.defaults" layers="eventMap.layers" markers="eventMap.markers" events="eventMap.events"> </leaflet> </td> </tr> <!-- contact persons --> <tr> <td colspan="2"> <div class="form-group"> <div class="col-md-12"> <span ng-repeat="cp in event_contactpersons"> <button class="btn btn-default btn-xs" ng-class="{ \'pull-left\' : cp.user.id == user_id }" type="button"> {{ cp.user.full_name }} <i ng-if="cp.user.id != user_id" class="fa fa-remove text-danger" title="Fjern kontaktperson" ng-click="eventAction.removeContact(cp.id, cp.user.id)"> </i> <i ng-if="cp.user.id == user_id" ng-click="eventAction.cannotRemoveContact()" class="fa fa-remove text-muted"> </i> </button> </span> <button class="btn btn-primary btn-xs" type="button" ng-click="eventAction.addContact()"> <i class="fa fa-plus"></i> Kontakt  </button></div> </div> </td> </tr> <!-- groups --> <tr> <td colspan="2"> <div class="form-group"> <div class="col-md-12"> <span ng-repeat="g in event_groups"> <button class="btn btn-default btn-xs" type="button"> {{ g.name }} <i class="fa fa-remove text-danger" title="Fjern gruppe" ng-click="eventAction.removeGroup(g.id, g.group_id)"> </i> </button> </span> <button class="btn btn-primary btn-xs" type="button" ng-click="eventAction.addGroup()"> <i class="fa fa-plus"></i> Gruppe  </button></div> </div> </td> </tr> <!-- about --> <tr> <td colspan="2"> <div class="form-group"> <div class="col-md-12"> <text-angular ng-model="event.about" ta-text-editor-class="form-control ta-editor-small" ta-toolbar="[[\'h2\',\'h3\'],[\'bold\',\'italics\',\'underline\',\'strikeThrough\'],[\'insertLink\'], [\'html\']]"> </text-angular> </div> </div> </td> </tr> </table> <br><br><br><br> </form> </div>'),
a.put("views/inc/inc.editProfile.html",'<div> <div class="col-md-12"> <div class="medlem-image medlem-image-edit cursor-pointer" ng-click="changeImage()"> <i ng-if="edit.image == \'\'" class="fa fa-user medlem-default-image"></i> <img ng-if="edit.image != \'\'" ng-src="../media/medlem/{{ edit.image }}"> </div> <div class="pull-right action-element"> <button class="btn btn-default btn-sm" type="button" ng-class="{ \'btn-success\' : saveEnabled() }" ng-disabled="!saveEnabled()" ng-click="doSaveClose()">Gem og luk </button> <button class="btn btn-danger btn-sm" type="button" ng-click="doCancel()">Fortryd </button> </div> </div> <div class="col-md-12"> <div class=""> <text-angular ng-model="edit.about" ta-text-editor-class="form-control ta-editor-md" ta-toolbar="[[\'h2\',\'h3\'],[\'bold\',\'italics\',\'underline\',\'strikeThrough\'],[\'insertLink\'], [\'html\']]"> </text-angular> <div class="clearfix">&nbsp;</div> </div> </div> <!-- collapsible --> <div class="panel-group" role="tablist" aria-multiselectable="true" bs-collapse data-start-collapsed="true" data-allow-multiple="true"> <!-- indstillinger --> <div class="panel panel-default"> <div class="panel-heading" role="tab"> <h4 class="panel-title"> <a bs-collapse-toggle> <i class="fa fa-plus text-muted"></i> Indstillinger </a> </h4> </div> <div class="panel-collapse" role="tabpanel" bs-collapse-target> <div class="panel-body"> <div class="col-md-1"></div> <form id="settings" role="form" class="form-horizontal" autocomplete="off"> <div class="col-md-12 no-padding no-margin"> <button class="btn btn-xs btn-default pull-right" ng-click="formSave(\'#settings\')" ng-class="{ \'btn-primary\' : formSaveEnabled(\'#settings\') }" ng-disabled="!formSaveEnabled(\'#settings\')"> Gem </button> </div> <div class="form-group col-md-4"> <div class="checkbox"> <label class="control-label"> <input type="checkbox" ng-false-value="\'0\'" ng-true-value="\'1\'" name="visible_address" ng-model="edit.visible_address">Synlig adresse </label> </div> <div class="checkbox"> <label class="control-label"> <input type="checkbox" ng-false-value="\'0\'" ng-true-value="\'1\'" name="visible_email" ng-model="edit.visible_email">Synlig email </label> </div> <div class="checkbox"> <label class="control-label"> <input type="checkbox" ng-false-value="\'0\'" ng-true-value="\'1\'" name="visible_phone" ng-model="edit.visible_phone">Synlig telefon </label> </div> </div> <div class="form-group col-md-4"> <div class="checkbox"> <label class="control-label"> <input type="checkbox" ng-false-value="\'0\'" ng-true-value="\'1\'" name="visible_calendar" ng-model="edit.visible_calendar">Synlig kalender </label> </div> <div class="radio"> <label class="no-padding">Signatur</label><br> &nbsp;&nbsp;<label><input type="radio" name="signatur">Alias</label><br> &nbsp;&nbsp;<label><input type="radio" name="signatur">Fulde navn</label><br> &nbsp;&nbsp;<label><input type="radio" name="signatur">Fornavn</label><br> &nbsp;&nbsp;<label><input type="radio" name="signatur">Efternavn</label><br> </div> </div> </form> </div> </div> </div> <!-- personligt --> <div class="panel panel-default"> <div class="panel-heading" role="tab"> <h4 class="panel-title"> <a bs-collapse-toggle> <i class="fa fa-plus text-muted"></i> Personligt </a> </h4> </div> <div class="panel-collapse" role="tabpanel" bs-collapse-target> <div class="panel-body"> <form id="personal" role="form" class="form-horizontal" autocomplete="off"> <div class="col-md-12 no-padding no-margin"> <button class="btn btn-xs btn-default pull-right" ng-click="formSave(\'#personal\')" ng-class="{ \'btn-primary\' : formSaveEnabled(\'#personal\') }" ng-disabled="!formSaveEnabled(\'#personal\')"> Gem </button> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="first_name">Fornavn</label> <div class="col-md-4"> <input class="form-control" type="text" id="first_name" select-on-click disabled ng-model="edit.first_name" placeholder="Fornavn"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="last_name">Efternavn</label> <div class="col-md-4"> <input class="form-control" type="text" id="last_name" select-on-click disabled ng-model="edit.last_name" placeholder="Efternavn"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="full_name">Fulde navn</label> <div class="col-md-5"> <input class="form-control" type="text" id="full_name" select-on-click disabled ng-model="edit.full_name" placeholder="Fulde navn"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="alias">Alias</label> <div class="col-md-5"> <input class="form-control" type="text" id="alias" select-on-click ng-model="edit.alias" placeholder="Alias, kaldenavn"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="email">Email</label> <div class="col-md-5"> <input class="form-control" type="text" id="email" select-on-click disabled ng-model="edit.email" placeholder="Email"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="password">Password</label> <div class="col-md-5"> <input class="form-control" type="text" id="password" select-on-click ng-model="edit.password" placeholder="Password"> </div> </div> </form> </div> </div> </div> <!-- adresse --> <div class="panel panel-default"> <div class="panel-heading" role="tab"> <h4 class="panel-title"> <a bs-collapse-toggle> <i class="fa fa-plus text-muted"></i> Adresse </a> </h4> </div> <div class="panel-collapse" role="tabpanel" bs-collapse-target> <div class="panel-body"> <form id="address" role="form" class="form-horizontal" autocomplete="off"> <div class="col-md-12 no-padding no-margin"> <button class="btn btn-xs btn-default pull-right" ng-click="formSave(\'#address\')" ng-class="{ \'btn-primary\' : formSaveEnabled(\'#address\') }" ng-disabled="!formSaveEnabled(\'#address\')"> Gem </button> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="adresse">Adresse</label> <div class="col-md-5"> <input class="form-control" type="text" id="adresse" select-on-click ng-model="edit.address" adresse-opslag adresse-type="adresser" adresse-on-select="adresseSelect" placeholder="Adresse"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="postal_code">Postnr</label> <div class="col-md-2"> <input class="form-control" type="text" id="postal_code" select-on-click only-numbers ng-model="edit.postal_code" placeholder="Postnr"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label required" for="city">By</label> <div class="col-md-5"> <input class="form-control" type="text" id="city" select-on-click ng-model="edit.city" placeholder="By"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="phone">Telefon</label> <div class="col-md-3"> <input class="form-control" type="text" id="phone" select-on-click ng-model="edit.phone" placeholder="12345678"> </div> </div> </form> </div> </div> </div> <!-- sociale links --> <div class="panel panel-default"> <div class="panel-heading" role="tab"> <h4 class="panel-title"> <a bs-collapse-toggle> <i class="fa fa-plus text-muted"></i> Socialt </a> </h4> </div> <div class="panel-collapse" role="tabpanel" bs-collapse-target> <div class="panel-body"> <form id="social" role="form" class="form-horizontal" autocomplete="off"> <div class="col-md-12 no-padding no-margin"> <button class="btn btn-xs btn-default pull-right" ng-click="formSave(\'#social\')" ng-class="{ \'btn-primary\' : formSaveEnabled(\'#social\') }" ng-disabled="!formSaveEnabled(\'#social\')"> Gem </button> </div> <div class="form-group"> <label class="col-md-2 control-label" for="homepage">Hjemmeside</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="homepage" select-on-click ng-model="edit.homepage" placeholder="Hjemmeside adresse"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="facebook">Facebook</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="facebook" select-on-click ng-model="edit.facebook" placeholder="Facebook url"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="twitter">Twitter</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="twitter" select-on-click ng-model="edit.twitter" placeholder="Twitter konto"> </div> </div> <div class="form-group"> <label class="col-md-2 control-label" for="linkedin">LinkedIn</label> <div class="col-md-8"> <input class="form-control input-sm" type="text" id="linkedin" select-on-click ng-model="edit.linkedin" placeholder="LinkedIn konto"> </div> </div> </form> </div> </div> </div> </div></div>'),a.put("views/inc/inc.entityRating.html",'<div> <div ng-if="user.id"> <span class="msg-ngrateit text-muted">Vurder dette</span> <button class="btn btn-xs btn-ngrateit" title="Afgiv bedømmelse" ng-class="{ \'btn-success\': canSaveRating() }" ng-disabled="!canSaveRating()" ng-click="saveRating()"> <i class="fa fa-check"></i> </button> <ng-rate-it max="6" ng-model="user.rating" read-only="user.readonly" resetable="false"> </ng-rate-it> </div> <div> <span class="msg-ngrateit" ng-if="user.id" style="color:#fff">Vurder dette</span> <ng-rate-it max="6" title="{{ total.title }}" ng-model="total.average" read-only="true" resetable="false"> </ng-rate-it> </div> </div>'),a.put("views/inc/inc.eventParticipants.html",'<div> <span ng-if="message">{{ message }}</span> <span ng-repeat="p in participants"> <span ng-if="!p.isUser"> <a href="{{ p.urlLink }}">{{p.full_name}}</a><span ng-if="!$last">{{ sep }}</span> <span ng-if="$last">deltager.</span> </span> </span> </div>'),a.put("views/inc/inc.logNotifications.html",'<div class="list-group"> <div ng-repeat="n in notifications" class="list-group-item list-group-item-sm" title="{{ n.title }}"> [<small> {{ n.type }} </small>] <span> {{ n.display_timestamp }}: </span> <span> {{ n.userName }} </span> <span ng-bind-html="n.action"></span> </div> </div>'),a.put("views/inc/inc.recentArticles.html",'<div class="list-group"> <span class="text-muted" ng-if="showEmpty()">Ingen nye eller ikke læste artikler</span> <a ng-repeat="a in articles" ng-if="!Settings.recentArticlesShowVisited || (Settings.recentArticlesShowVisited && !a.user_visited)" ng-href="/artikel/{{ a.id }}/{{ a.urlName }}" debug-link ng-class="{ \'list-group-item-success\' : !a.user_visited }" class="list-group-item list-group-item-sm"> <span ng-if="a.image" class="list-group-item-image"> <img ng-src="media/artikel/{{ a.image }}"> </span> <span class="list-group-item-image-text">{{ a.header }}</span> </a> </div>'),a.put("views/inc/inc.recentComments.html",'<div class="list-group"> <a ng-repeat="c in comments" href="" ng-click="commentClick(\'#comment\'+c.id)" class="list-group-item list-group-item-sm"> <img ng-if="c.image" ng-src="media/medlem/{{ c.image }}"> <span ng-if="!c.image" class="no-image"><i class="fa fa-user"></i></span> <small><em>{{ c.content }}</em></small> </a> </div>'),a.put("views/inc/inc.recentEvents.html",'<div> <div class="list-group"> <span class="text-muted" ng-if="showEmpty()">Ingen nye eller ikke sete events</span> <a ng-repeat="e in events" ng-if="!Settings.recentEventsShowVisited || (Settings.recentEventsShowVisited && !e.user_visited)" ng-href="{{ e.urlLink }}" ng-class="{ \'list-group-item-success\' : !e.user_visited }" debug-link class="list-group-item list-group-item-sm"> <!--\n\t\t\t\t\t<small ng-if="e.group_id != false" class="text-muted">&#9658;\n\t\t\t\t\t<a ng-href="{{ e.group_urlLink }}" class="unstyled" debug-link bs-tooltip="e.group_name">\n\t\t\t\t\t\t<i class="fa fa-users text-muted"></i>ss\n\t\t\t\t\t</a>\n\t\t\t\t\t</small>\n--> <span> {{ e.name }} </span> <span ng-if="e.group_id != false"> <small class="text-priority" style="position: relative; top:-1px">&nbsp;&#9658;</small> <i class="fa fa-users text-muted"></i> </span> </a> </div> </div>'),a.put("views/inc/inc.searchBox.html",'<div class="input-group search-input-group"> <input type="text" class="form-control" placeholder="søg ..."> <span class="input-group-addon"> <button type="submit"> <span class="fa fa-search text-muted"></span> </button> </span> </div>'),a.put("views/inc/inc.upcomingEvents.html",'<div ng-repeat="e in events"> <div class="recent"> <a ng-href="/event/{{ e.id }}/{{ e.urlName }}" class="unstyled" debug-link> <span class="header small"> <strong>{{ e.city }}</strong>. {{ e.date | date:\'dd MMM yyyy\' }} fra kl. {{ e.from }} </span> <span ng-if="e.image" class="recent-image"> <img ng-src="media/event/{{ e.image }}"> </span> <span class="recent-desc h5"> {{ e.name }} </span> </a> </div> </div>'),a.put("views/inc/inc.userEventsParticipate.html",'<div> <span ng-if="message">{{ message }} </span> <span ng-repeat="event in events" xxxstyle="background-color: red !important;max-width:100px !important;overflow: hidden; word-break:keep-all; white-space: nowrap;"> <a href="{{ event.urlLink }}" debug-link> <span class="medlem-event-date"> {{ event.date | date:"dd/MM" }} </span> <span class="medlem-event-name"> <strong> {{ event.name }} </strong> </span> </a> </span> </div>'),a.put("views/inc/inc.userReactions.html",'<div> <div class="list-group"> <span class="text-muted" ng-if="showEmpty()">Ingen nye reaktioner</span> <div ng-repeat="r in reactions" title="{{ r.title }}" class="list-group-item list-group-item-sm"> <div ng-if="r.type == \'f\'"> <i class="fa fa-thumbs-o-up text-success"></i> <small> <em> <a ng-href="{{ r.userUrl }}" xclass="unstyled"> {{ r.show_name }} </a> </em> &nbsp;&nbsp;<i class="fa fa-calendar-check-o text-success"></i> <a ng-href="{{ r.url }}" xclass="unstyled"> {{ r.caption }} </a> </small> </div> <div ng-if="r.type == \'a\' || r.type == \'e\'"> <i ng-if="r.type == \'a\'" class="fa fa-file-code-o text-muted"></i> <i ng-if="r.type == \'e\'" class="fa fa-calendar text-muted"></i> <small> <em> <a ng-href="{{ r.userUrl }}" xclass="unstyled"> {{ r.show_name }} </a> </em> &nbsp; <i class="fa fa-comments-o text-muted"></i> <a ng-href="{{ r.url }}" xclass="unstyled"> {{ r.caption }} </a> </small> </div> <div ng-if="r.type == \'c\'"> <i class="fa fa-comments-o"></i> <small> <em> <a ng-href="{{ r.userUrl }}" xclass="unstyled"> {{ r.show_name }} </a> </em> &nbsp; <small><i class="fa fa-play text-muted"></i> </small> {{ r.caption }} </small> </div> </div> </div> </div>'),a.put("views/inc/inc.userRecentArticles.html",'<div class="list-group"> <span class="text-muted" ng-if="showEmpty()">Ingen nye reaktioner</span> <div ng-repeat="a in articles" class="list-group-item list-group-item-sm"> <a ng-href="{{ a.url }}"> {{ a.header }} </a> </div> </div>'),a.put("views/kalender.forside.html",'<div class="container-fluid"> <div class="col-md-8"> <!--\n\t\t<h1 ng-if="!isLoggedIn">Åben kalender</h1>\n\t\t<h1 ng-if="isLoggedIn">Kalender</h1>\n\t\t<p ng-if="!isLoggedIn">Der vises kun events fra den åbne, offentlige kalender. For at se alle events skal du logge ind.</p>\n\t\t<p ng-if="isLoggedIn">Alle offentlige events, events forbeholdt brugere samt events knyttet til de grupper du er medlem af.</p>\n--> <div ui-calendar="uiConfig.calendar" class="calendar" ng-model="events"></div> </div> <div class="col-md-4"> <leaflet class="event-leaflet-map" height="300" center="eventMap.center" defaults="eventMap.defaults" layers="eventMap.layers" markers="eventMap.markers" events="eventMap.events"> </leaflet> </div> </div>'),a.put("views/login.html",'<div class="col-md-8 col-md-offset-2"> <form class="form-signin" autocomplete="off"> <h2 class="form-signin-heading">Login</h2> <label for="inputEmail" class="sr-only">Brugernavn</label> <input type="text" ng-model="user.navn" class="form-control" placeholder="Brugernavn" required autofocus autocomplete="off"> <br> <label for="inputPassword" class="sr-only">Password</label> <input type="password" ng-model="user.password" class="form-control" placeholder="Password" required autocomplete="off"> <div class="checkbox"> <label class="pull-right"> <input type="checkbox" ng-model="user.rememberMe"> Husk mig </label> </div> <div class="alert alert-danger" style="margin-top:20px" role="alert" ng-show="user.error != undefined"> {{ user.error }} </div> <button class="btn btn-lg" type="submit" ng-class="{\'btn-primary\' : canLogin() }" ng-enabled="canLogin()" ng-click="doLogin()">Log ind</button> </form> <br><br><br><br><br> </div>'),a.put("views/medlem.forside.html",'<div class="col-md-9"> <div class="medlem-image"> <i ng-if="user.image == \'\'" class="fa fa-user medlem-default-image"></i> <img ng-if="user.image != \'\'" ng-src="../media/medlem/{{ user.image }}" fancyboxable="{centerOnScroll:true,margin:20}"> </div> <div class="medlem-info"> <h1>{{ user.first_name }} {{ user.last_name }} </h1> <span ng-bind-html="user.about"></span> </div> <div class="layout-right-header">Grupper</div> <div user-groups="{{ user.id }}" personal="{{ user.first_name }}"></div> <div class="clearfix"> <br> </div> <div class="layout-right-header">Kontaktoplysninger</div> </div> <div class="col-md-3"> <div class="layout-right-header">Socialt</div> <div class="layout-right-header-content" social-links="{{ user }}"></div> <div class="layout-right-header">Deltager i kommende events</div> <div class="layout-right-header-content"> <div user-events-participate="{{ user }}"></div> </div> <div class="layout-right-header">Seneste artikler</div> <div class="layout-right-header-content" user-recent-articles="{{ user.id }}"></div> <!--\n\t\t<span ng-repeat="article in articles">\n\t\t\t<a ng-href="#/artikel/{{ article.id }}/{{ article.headerUrl }}" debug-link>\n\t\t\t\t<span class="medlem-event-name">\n\t\t\t\t\t<strong>\t\t\t\t\n\t\t\t\t\t\t{{ article.header }}\n\t\t\t\t\t</strong>\n\t\t\t\t</span>\n\t\t\t</a>\n\t\t</span>\n\t</div>\n--> <div class="layout-right-header">Seneste events</div> <div class="layout-right-header-content"> <span ng-repeat="event in events"> <a ng-href="#/event/{{ event.id }}/{{ event.name }}" debug-link> <span class="medlem-event-date"> {{ event.date | date:"dd/MM" }} </span> <span class="medlem-event-name"> <strong> {{ event.name }} </strong> </span> </a> </span> </div> <div class="layout-right-header">Seneste kommentarer</div> </div>'),a.put("views/medlem.html","<h1>Medlem</h1>"),a.put("views/navbar.html",'<div ng-controller="NavbarCtrl" class="container-fluid"> <div class="indeu-navbar"> <div class="indeu-navbar-left col-md-7 col-sm-6 col-xs-12"> <h1><strong><code class="indeu-navbar-logo"><a href="/" class="unstyled" title="indeu,org">indeu.org</a></code></strong></h1> </div> <div class="indeu-navbar-right col-md-4 col-sm-12 col-xs-12 form-fade" ng-show="!isLoggedIn()" id="login-form"> <div> <i ng-if="login.error != \'\'" class="fa fa-remove text-danger bg-warning"></i> {{ login.error }} &nbsp; </div> <form role="form" class="form-inline form-group-sm" autocomplete="off"> <input class="form-control input-sm" type="text" select-on-click ng-model="login.email" size="16" name="email" placeholder="Email"> <input class="form-control input-sm" type="password" size="16" ng-model="login.password" name="password" placeholder="Password"> <button role="button" ng-click="doLogin()" class="btn btn-sm btn-default"> Login </button> </form> <div class="checkbox xxpull-right no-padding no-margin"> <label> <input type="checkbox" ng-model="login.rememberMe" ng-false-value="0" ng-true-value="1"> Husk mig </label> </div> </div> <div class="indeu-navbar-right col-md-3 col-sm-12 col-xs-12" ng-show="showSearchForm()"> <div ng-if="showSearchBox()" style="margin-top:15px"> <search-box></search-box> </div> </div> </div> </div> <!--\n<nav class="navbar navbar-default navbar-fixed-top" bs-affix data-offset-top="97" ng-controller="NavbarCtrl">\n--> <nav id="indeu-navbar" class="navbar yamm navbar-default XXnavbar-fixed-top" ng-controller="NavbarCtrl"> <div class="no-margin no-padding"> <!-- Brand and toggle get grouped for better mobile display --> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <!-- Collect the nav links, forms, and other content for toggling --> <div class="collapse navbar-collapse" id="navbar-collapse-1"> <ul class="nav navbar-nav navbar-left" style="margin-left:15px"> <li class="dropdown"> <a class="dropdown-toggle text-primary" data-toggle="dropdown" href=""> indeu.org <span class="caret"></span> </a> <ul class="dropdown-menu"> <li><a href="#">Formålsparagraf</a></li> <li><a href="#">Foreningen bag</a></li> <li><a href="#">Kontakt</a></li> </ul> </li> <li><a href="/det-sker" debug-link>Kalender</a></li> <!-- ---> <li class="dropdown mega-dropdown"> <a class="dropdown-toggle text-primary" data-toggle="dropdown" href=""> Foreninger <span class="caret"></span> </a> <ul class="dropdown-menu mega-dropdown-menu"> <li class="col-sm-6"> <ul> <li class="dropdown-header">header</li> <li><a href="">item item item</a></li> <li><a href="">item item item</a></li> <li><a href="">item item item</a></li> <li><a href="">item item item</a></li> <li><a href="">item item item</a></li> </ul> </li> <li class="col-sm-6"> <ul> <li class="dropdown-header">header</li> <li><a href="">item item item</a></li> <li><a href="">item item item</a></li> <li><a href="">item item item</a></li> <li><a href="">item item item</a></li> <li><a href="">item item item</a></li> </ul> </li> </ul> </li> <li class="dropdown mega-dropdown"> <a class="dropdown-toggle text-primary" data-toggle="dropdown" href=""> Grupper <span class="caret"></span> </a> <ul class="dropdown-menu mega-dropdown-menu" id="nav-indeu-groups"> <li class="col-sm-4"> <ul> <li ng-repeat="g in groups.f" class="list-unstyled"> <a ng-href="{{ g.url }}"> {{ g.name }}</a> </li> </ul> </li> <li class="col-sm-4"> <ul> <li ng-repeat="g in groups.s" class="list-unstyled"> <a ng-href="{{ g.url }}"> {{ g.name }}</a> </li> </ul> </li> <li class="col-sm-4"> <ul> <li ng-repeat="g in groups.t" class="list-unstyled"> <a ng-href="{{ g.url }}"> {{ g.name }}</a> </li> </ul> </li> </ul> </li> <!-- ---> </ul> <ul class="nav navbar-nav navbar-right"> <li ng-if="isLoggedIn()"> <a href="/dig" debug-link title="Din forside"> <i class="fa fa-user fa-1x text-primary"></i> <strong>{{ user_name }}</strong> </a> </li> <li ng-if="showSearchBox() && userIsAdmin()"> <a href="/admin-overblik" debug-link>Administration</a> </li> <li ng-if="!isLoggedIn()"><a href="/bliv-medlem" debug-link>Bliv medlem</a></li> <li ng-if="isLoggedIn()"><a href="" ng-click="logout()">Log af</a></li> </ul> </div><!-- /.navbar-collapse --> </div><!-- /.container --> </nav><!-- /.navbar -->'),a.put("views/search.html",'<div class="col-md-9"> <div class="col-md-12"> <form> <label class="checkbox-inline"> <input type="checkbox" ng-false-value="undefined" ng-true-value="true" ng-model="Settings.searchWithinArticles">Artikler </label> <label class="checkbox-inline"> <input type="checkbox" ng-false-value="undefined" ng-true-value="true" ng-model="Settings.searchWithinEvents">Events </label> <label class="checkbox-inline"> <input type="checkbox" ng-false-value="undefined" ng-true-value="true" ng-model="Settings.searchWithinBulletins">Opslag </label> <br><br> </form> </div> <div class="input-group col-md-6"> <input id="input" type="search" class="form-control" select-on-click ng-model="term" placeholder="søg .."> <span class="input-group-btn"> <button class="btn btn-default" type="submit"> <i class="fa fa-search"></i> </button> </span> </div> <p ng-if="!results" class="text-muted"> <br> Ingen søgning </p> <p ng-if="results" class="text-muted"> <br> {{ results.length }} resultater </p> <div ng-repeat="r in results"> <div class="clearfix" style="margin-bottom:16px">&nbsp;</div> <a ng-href="{{ r.url }}" class="unstyled"> <h3 class="text-primary no-margin search">{{ r.caption }}</h3> <span class="h5"><small> {{ r.full_name }}, {{ r.date_str }} </small></span> <p class="col-md-11" ng-bind-html="r.content_extract"></p> </a> </div> </div> <div class="col-md-3"> højre </div>')}]);